<div class="col-md-12" ng-controller="CreateFamilyMemberController">
    <div class="paddedbottom10">
        <ul class="breadcrumb">
            <li>
                <a href="#/viewclient/{{clientId}}">{{'label.anchor.viewclient' | translate}}</a>
            </li>
            <li>
                <a href="#/listfamilydetails/{{clientId}}">{{'label.anchor.family.details' | translate}}</a>
            </li>
            <li class="active">{{'label.view.add.familymember' | translate}}</li>
        </ul>

        <api-validate></api-validate>
        <div class="clearfix"></div>

        <form name="createFamilyDetails" novalidate="" class="form-horizontal well" rc-submit="submit()">
            <fieldset>
                <legend>{{'label.view.add.familymember' | translate}}</legend>
                <div class="form-group">
                    <div class="col-sm-4 col-md-4">
                        <input id="isExistingClient" type="checkbox" ng-model="isExisitingClient" ng-click="showOrHideSearch()" /> {{ 'label.input.isExisiting.client' | translate }}
                    </div>
                </div>
                <div class="form-group" ng-show="isExisitingClient == true">
                    <label class="control-label col-sm-2">{{ 'label.input.searchformember' | translate }}</label>
                    <div class="col-sm-4 col-md-4">
                        <input id="members" type="text" autocomplete="off" ng-model="available" class="col-md-4 form-control" typeahead-min-length="1" typeahead-editable="false"
                            typeahead="client as client.entityName for client in clientOptions($viewValue)" typeahead-on-select="viewClient(available)"
                        />
                    </div>
                    <div class="col-sm-1 col-md-1">
                        <button ng-show="available" type="button" class="btn angled-btn btn-primary" data-ng-click="add()">
                            {{ 'label.button.add' | translate }}
                            <i class="icon-double-angle-right"></i>
                        </button>
                    </div>
                </div>

                <div class="form-group" ng-hide="isHideSalutation">
                    <label class="control-label col-sm-2">{{ 'label.input.salutation' | translate }}</label>

                    <div class="col-sm-3">
                        <select id="salutation" name="salutation" ng-model="salutationId" class="form-control" ng-options="salutationOption.id as salutationOption.name for salutationOption in salutationOptions "
                            value="salutationOption.id">
                            <option value="">--{{'label.input.selectoptions' | translate}}--</option>
                        </select>
                    </div>
                    <div class="col-sm-2">
                        <form-validate valattributeform="createFamilyDetails" valattribute="salutation" />
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-sm-2" for="firstName">{{ 'label.input.firstName' | translate }}
                        <span class="required">*</span>
                    </label>

                    <div class="col-sm-3">
                        <input placeholder="FIRST NAME" type="text" autocomplete="off" id="firstname" name="firstname" ng-pattern="{{firstNamePattern}}" ng-model="formData.firstname"
                            class="form-control" ng-required="isFirstnameRequired" ng-autofocus="true"/>
                    </div>
                    <div class="col-sm-2">
                        <span class="error" ng-show="submitted && createFamilyDetails.firstname.$error.required">{{'label.error.required'|translate}}</span>
                        <span class="error" ng-show="createFamilyDetails.firstname.$invalid">{{'label.only.text' | translate}}</span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-sm-2" for="middlename">{{ 'label.input.middlename' | translate }}
                    </label>

                    <div class="col-sm-3">
                        <input placeholder="MIDDLE NAME" type="text" autocomplete="off" id="middlename" name="middlename" ng-pattern="/^[a-zA-Z\s]*$/" ng-model="formData.middlename"
                            class="form-control" ng-required="isMiddlenameRequired" />
                        
                    </div>
                    <div class="col-sm-2">
                            <span class="error" ng-show="submitted && createFamilyDetails.firstname.$error.required">{{'label.error.required'|translate}}</span>
                            <span class="error" ng-show="createFamilyDetails.middlename.$invalid">{{'label.only.text' | translate}}</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-2" for="lastName">{{ 'label.input.lastName' | translate }}
                        <span ng-if="isLastnameRequired" class="required">*</span>
                    </label>

                    <div class="col-sm-3">
                        <input placeholder="LAST NAME" type="text" autocomplete="off" id="lastname" name="lastname" ng-pattern="{{regexFormats.lastName}}" ng-model="formData.lastname"
                            class="form-control" ng-required="isLastnameRequired" />
                      
                    </div>
                    <div class="col-sm-2">
                            <span class="error" ng-show="submitted && createFamilyDetails.firstname.$error.required">{{'label.error.required'|translate}}</span>
                            <span class="error" ng-show="createFamilyDetails.lastname.$invalid">{{'label.only.text.lname' | translate}}</span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-sm-2">{{'label.input.dateofbirth' | translate}}
                       
                    </label>
                    <div class="col-sm-3">
                        <input id="dateofbirth" type="text" autocomplete="off" name="dateofbirth" datepicker-pop="{{df}}" ng-model="formData.dateOfBirth" 
                             is-open="opened1" class="form-control" ng-required="isDateOfBirthMandatory"  ng-readonly="isDatePickerReadOnly" />
                        <span class="error" ng-show="dateOfBirthNotInRange">{{'label.input.dob.not.range' | translate}} {{minAge}} {{'label.input.and' | translate}} {{maxAge}} {{'label.input.year'
                            | translate}}</span>
                    </div>
                    <div class="col-sm-2">
                        <form-validate valattributeform="createFamilyDetails" valattribute="dateofbirth" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-2">{{ 'label.input.age' | translate }}<span ng-if="isAgeMandatory" class="required">*</span></label>
                    </label>
                
                    <div class="col-sm-2">
                        <input id="age" type="number" autocomplete="off" name="age" ng-model="formData.age" ng-minlength="1"
                            ng-maxlength="3" min="{{familyMemberMinAge}}" max="{{familyMemberMaxAge}}" class="form-control" placeholder="{{formData.age}}"
                            ng-change="validateAge()" ng-required="isAgeMandatory" />
                        <span class="error" ng-hide="isValidAge">{{'label.input.dob.not.range' | translate}}
                            {{familyMemberMinAge}}{{'label.input.and' | translate}} {{familyMemberMaxAge}}</span>
                    </div>
                    <div class="col-sm-2">
                        <form-validate valattributeform="createFamilyDetails" valattribute="age" />
                    </div>
                
                </div>
 
                <div class="form-group">
                    <label class="control-label col-sm-2">{{ 'label.input.relationship' | translate }}
                
                    </label>
                
                    <div class="col-sm-3">
                        <select id="relationship" name="relationship" ng-model="relationshipId" class="form-control" ng-change="findRelationCodeValue(relationshipId)"
                            ng-options="relationshipOption.id as relationshipOption.name for relationshipOption in relationshipOptions"
                            value="relationshipOption.id">
                            <option value="">--{{'label.input.selectoptions' | translate}}--</option>
                        </select>
                    </div>
                    <label class="control-label col-sm-2">{{ 'label.input.gender' | translate }}</label>
                
                    <div class="col-sm-3">
                        <select id="gender" name="gender" ng-model="genderId" class="form-control" ng-options="genderOption.id as genderOption.name for genderOption in genderOptions"
                            value="genderOption.id">
                            <option value="">--{{'label.input.selectoptions' | translate}}--</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-2" for="documentTypeId">{{'label.input.familymembertypeid' | translate}}
                        <span ng-if="isfamilyMemeberIDTypeMandatory" class="required">*</span>
                    </label>
                    <div class="col-sm-3">
                        <select id="documentTypeId" ng-model="formData.documentTypeId" name="documentTypeId" ng-options="documentType.id as documentType.name for documentType in documentTypes"
                            ng-change="documentTypeChange()" value="{{documenttype.id}}" class="form-control" ng-required="isfamilyMemeberIDTypeMandatory">
                            <option value="">{{'label.menu.select' | translate}}</option>
                        </select>
                    </div>
                    <div class="col-sm-2">
                        <form-validate valattributeform="createFamilyDetails" valattribute="documentTypeId" />
                    </div>
                </div>

                <div class="form-group" ng-if="formData.documentTypeId">
                    <label class="control-label col-sm-2" for="uniqueNo">{{ 'label.input.familymemberuniqueno' | translate }}
                        <span class="required">*</span>
                    </label>

                    <div class="col-sm-3">
                        <input type="text" autocomplete="off" id="documentKey" name="documentKey" ng-model="formData.documentKey" class="form-control" required late-validate/>
                    </div>
                    <div class="col-sm-2">
                        <form-validate valattributeform="createFamilyDetails" valattribute="documentKey" />
                    </div>
                    
                    <div class="col-sm-3">
                        <input id="dateofbirth" type="text" name="dateofbirth" datepicker-pop="dd MMMM yyyy" ng-model="first.dateOfBirth"
                        is-open="opened1" class="form-control" ng-required="isDateOfBirthMandatory"/>
                    </div>
                    <div class="col-sm-2">
                        <label class="control-label col-sm-1" ng-show="displayAge">{{'label.input.age' | translate}}{{":"}}{{age}}</label>
                        <form-validate valattributeform="createclientform" valattribute="dateofbirth"/>
                    </div>
                </div>
             
                <div class="form-group">
                    <label class="control-label col-sm-2"></label>

                    <div class="col-sm-3">
                        <input id="isDependent" type="checkbox" ng-model="formData.isDependent"> {{ 'label.input.dependent' | translate }}
                    </div>
                    <div class="col-sm-3">
                        <input id="isSeriousIllness" type="checkbox" ng-model="formData.isSeriousIllness"> {{ 'label.input.isSeriousIllness' | translate }}
                    </div>
                    <div class="col-sm-3">
                        <input id="isDeceased" type="checkbox" ng-model="formData.isDeceased"> {{ 'label.input.isDeceased' | translate }}
                    </div>
                </div>

                <div class="form-group">
                    <div>
                        <label class="control-label col-sm-2">{{ 'label.input.occupation' | translate }}</label>

                        <div class="col-sm-3">
                            <select id="occupationId" name="occupation" ng-model="occupationOption" class="form-control" ng-options="occupationOption as occupationOption.name for occupationOption in occupationOptions"
                                value="occupationOption.id">
                                <option value="">--{{'label.input.selectoptions' | translate}}--</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="control-label col-sm-2">{{ 'label.input.sub.occupation' | translate }}</label>

                        <div class="col-sm-3">
                            <select id="subOccupation" name="subOccupation" ng-model="formData.occupationDetailsId" class="form-control" ng-options="subOccupation.id as subOccupation.name for subOccupation in occupationOption.incomeExpenseDatas"
                                value="subOccupation.id">
                                <option value="">--{{'label.input.selectoptions' | translate}}--</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-sm-2">{{ 'label.input.education' | translate }}</label>

                    <div class="col-sm-3">
                        <select id="education" name="education" ng-model="educationId" class="form-control" ng-options="educationOption.id as educationOption.name for educationOption in educationOptions "
                            value="occupationOption.id">
                            <option value="">--{{'label.input.selectoptions' | translate}}--</option>
                        </select>
                    </div>
                    <div class="col-sm-2">
                        <form-validate valattributeform="createFamilyDetails" valattribute="education" />
                    </div>
                </div>

                <div class="col-md-offset-2 paddedleft">
                    <a id="cancel" href="#/listfamilydetails/{{clientId}}" class="btn btn-default">{{'label.button.cancel' |
                        translate}}
                    </a>
                    <button id="save" type="submit" class="btn btn-primary">{{'label.button.save' | translate}}
                    </button>
                </div>
            </fieldset>
        </form>

    </div>
</div>