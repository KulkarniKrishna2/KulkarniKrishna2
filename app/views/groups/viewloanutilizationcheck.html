<div class="col-md-12" ng-controller="ViewLoanUtilizationCheckController">
    <div class="paddedbottom10">
        <ul class="breadcrumb" ng-show="entityType=='center'">
            <li><a href="#/viewcenter/{{entityId}}">{{'label.anchor.viewcenter' | translate}}</a></li>
            <li class="active">{{'label.heading.view.loanutilizationcheck' | translate}}</li>
        </ul>
        <ul class="breadcrumb" ng-show="entityType=='group'">
            <li><a href="#/viewgroup/{{entityId}}">{{'label.anchor.viewgroup' | translate}}</a></li>
            <li class="active">{{'label.heading.view.loanutilizationcheck' | translate}}</li>
        </ul>
        <api-validate></api-validate>
    </div>
    <button class="btn btn-primary pull-right" ng-if="luc.id" 
        has-permission = "UPDATE_LOANUTILIZATIONCHECK"
        ng-click="showEdit()">
           <i class="icon-edit icon-white"></i>{{'label.button.edit' | translate}}
    </button>
    <h3>{{'label.heading.loanutilizationcheck.details' | translate}}</h3>
    <hr>
    <div class="table-response">
        <table class="table table-striped">
            <tbody>
                <tr>
                    <td class="pointer">{{'label.heading.group' | translate}}</td>
                    <td class="pointer">{{luc.loanUtilizationCheckDetailData.groupName}}</td>
                </tr>
                <tr>
                    <td class="pointer">{{'label.heading.client' | translate}}</td>
                    <td class="pointer">{{luc.loanUtilizationCheckDetailData.clientName}}</td>
                </tr>
                <tr>
                    <td class="pointer">{{'label.heading.loan' | translate}}</td>
                    <td class="pointer">{{luc.loanUtilizationCheckDetailData.loanType.value}}-{{luc.loanId}}</td>
                </tr>
                <tr>
                    <td class="pointer">{{'label.heading.amount.disb' | translate}}</td>
                    <td class="pointer">{{luc.loanUtilizationCheckDetailData.principalAmount}}</td>
                </tr>
                <tr>
                    <td class="pointer">{{'label.heading.auditedon' | translate}}</td>
                    <td class="pointer">{{luc.auditDoneOn | DateFormat}}</td>
                </tr>
            </tbody>
        </table>
    </div>
        <button class="btn btn-primary pull-right" 
           ng-click="showUploadDocument = !showUploadDocument">
           <i class="icon-plus icon-white"></i>{{'label.button.upload' | translate}}
       </button>
        <br>
        <div ng-if = "showUploadDocument">
            <form name="documentform" novalidate="" class="row form-horizontal" 
                    rc-submit="submit()">
                <fieldset>
                    <legend>{{'label.heading.uploaddocument' | translate}}</legend>
                    <div class="form-group">
                        <label class="control-label col-sm-2" for="name">{{'label.input.name' | translate}}<span
                                class="required">*</span></label>
                        <div class="col-sm-3">
                            <input ng-autofocus="true" type="text" id="name" name="name" ng-model="formData.name" class="form-control" required
                                   late-Validate/>
                        </div>
                        <div class="col-sm-3">
                            <form-validate valattributeform="documentform" valattribute="name"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2">{{'label.input.description' | translate}}</label>

                        <div class="col-sm-3">
                            <textarea rows="2" ng-model="formData.description" class="form-control"></textarea>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-2" for="file">{{'label.input.selectfile' | translate}}<span
                                class="required">*</span></label>

                        <div class="col-sm-3">
                            <input type="file" id="file" ng-file-select="onFileSelect($files)">
                        </div>
                    </div>

                    <div class="col-md-offset-3">
                        <button id="save" type="submit" has-permission='CREATE_LOANUTILIZATIONCHECK' class="btn btn-primary">{{'label.button.save' | translate}}</button>
                    </div>
                </fieldset>
            </form>
        </div>  
        <br>  
            <div class="table-response">
                <h3>{{'label.heading.loanutilizationcheck.documents' | translate}}</h3>
                <table class="table">
                    <thead>
                    <tr class="graybg">
                        <th>{{'label.heading.name' | translate}}</th>
                        <th>{{'label.heading.description' | translate}}</th>
                        <th>{{'label.heading.filename' | translate}}</th>
                        <th>{{'label.heading.actions' | translate}}</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="lucDocument in lucDocuments">{{clientdocuments}}
                        <td>{{lucDocument.name}}</td>
                        <td>{{lucDocument.description}}</td>
                        <td>
                            <span>
                                {{lucDocument.fileName}}&nbsp;
                                <a target="_blank" data-ng-click="openViewDocument(lucDocument)"><i
                                   class="icon-eye-open text-success"></i></a>
                            </span>
                        </td>
                        <td>
                            <a ng-show="lucDocument.id" target="_blank" href="{{hostUrl}}{{lucDocument.docUrl}}"><i class="icon-cloud-download"></i></a>&nbsp;
                            <a ng-show="lucDocument.id" 
                              ng-click="deleteDocument(lucDocument)"><i class="icon-remove"></i></a>
                        </td>
                    </tr>
                    </tbody>
                </table>    
            </div>
        <script type="text/ng-template" id="viewDocument.html">
             <div style="position: fixed; top:20%; right:10%; width:600px; height: 500px;">
                <view-document-directive  ng-entity-type="{{data.parentEntityType}}"
                ng-entity-id="{{data.parentEntityId}}"
                ng-document-id="{{data.id}}"></view-document-directive>
            </div>
        </script>
</div>


