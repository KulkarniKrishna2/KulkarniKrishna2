<div class="col-md-12" ng-controller="CenterMeetingActivityController">
    <api-validate></api-validate>
    <form ng-submit="submit()" ng-if=!isCenterMeetingAttached>
        <div class="form-group">
            <div class="row">
                <div class="col-md-3">
                    <legend ng-show="!isCenterMeetingEdit" class="control-label offset2">
                        {{'label.heading.attachmeeting' | translate}}
                    </legend>
                    <legend ng-show="isCenterMeetingEdit">{{'label.heading.editmeeting' | translate}}
                    </legend>
                </div>
                <div class="col-md-4">
                    <legend>{{'label.heading.expecteddisbursementdate' | translate}}</legend>
                </div>
                <div class="col-md-3">
                    <legend>{{expecteddisbursementon | DateFormat}}</legend>
                </div>
            </div>
            <div>
                <table class="col-sm-8">
                    <tr>
                        <td class="col-sm-2 text-right">
                            <label class="control-label">{{'label.input.meetingstartdate' | translate}}
                                <span class="required">*</span>
                            </label>
                        </td>
                        <td class="col-sm-2">
                            <input id="startDate" type="text" datepicker-pop="dd MMMM yyyy" ng-model="first.date" is-open="opened" min="minMeetingDate"
                                max="maxMeetingDate" class="form-control" />
                        </td>
                        <td class="col-sm-2 text-right">
                            <label class="control-label">{{'label.input.meetingtime' | translate}}
                                <span class="required"></span>
                            </label>
                        </td>
                        <td class="col-sm-3">
                            <timepicker ng-model="formData.meetingTime"></timepicker>
                        </td>
                    </tr>'
                    <tr>
                        <td class="col-sm-2 text-right">
                            <label class="control-label">{{'label.input.location' |translate}}</label>
                        </td>
                        <td class="col-sm-2">
                            <input type="text" ng-model="formData.location" class="form-control">
                        </td>
                    </tr>
                    <tr>
                        <td class="col-sm-2 text-right">
                            <label class="control-label">{{'label.input.repeat' | translate}}</label>
                        </td>
                        <td class="col-sm-2">
                            <input type="checkbox" ng-model="formData.repeating" ng-bind="formData.repeating" ng-disabled="true">
                        </td>
                    </tr>
                    <tr>
                        <td class="col-sm-2 text-right">
                            <span ng-show="formData.repeating">
                                <label class="control-label offset2 paddedtop">
                                    <h4 class="paddedleft paddedtop">{{'label.heading.repeatdetails' | translate}}</h4>
                                </label>
                            </span>
                        </td>
                    </tr>
                </table>
            </div>
            <table class="col-sm-8" ng-show="formData.repeating">
                <tr>
                    <td class="col-sm-2 text-right">
                        <label class="control-label">{{'label.input.repeats' | translate}}</label>
                    </td>
                    <td class="col-sm-2">
                        <select ng-model="formData.frequency" class="form-control" ng-disabled="true" ng-options="repeatsOption.id as repeatsOption.value for repeatsOption in repeatsOptions"
                            ng-change="selectedPeriod(formData.frequency)" value="{{repeatsOption.id}}">
                            <option value=""></option>
                        </select>
                    </td>
                    <td class="col-sm-2 text-right">
                        <label class="control-label">{{'label.input.repeatsevery' | translate}}</label>
                    </td>
                    <td ng-if="!showAsTextBox" class="col-sm-2">
                        <select class="form-control" ng-model="formData.interval" ng-disabled="true" ng-options="repeatsEveryOption for repeatsEveryOption in repeatsEveryOptions">{{repeatsEveryOption}}
                        </select>
                    </td>
                    <td ng-if="showAsTextBox" class="col-sm-2">
                        <input type="number" min="1" max="365" ng-model="formData.interval" class="form-control">
                    </td>
                    <td class="col-sm-2">
                        <label>{{periodValue}} </label>
                        <label ng-show="formData.frequency=='2' || formData.frequency == 3"> - on - </label>
                    </td>
                </tr>
            </table>

            <table class="col-sm-4">
                <tr ng-show="formData.frequency == 3">
                    <td class="col-sm-2">
                        <select id="repeatsOnNthDayOfMonth" class="form-control" ng-model="formData.repeatsOnNthDayOfMonth" ng-options="repeatsOnNthDayOfMonth.id as repeatsOnNthDayOfMonth.value for repeatsOnNthDayOfMonth in frequencyNthDayOptions"
                            value="{{repeatsOnNthDayOfMonth.id}}">
                            <option value=""></option>
                        </select>&nbsp;
                    </td>
                    <td class="col-sm-2" data-ng-hide="formData.repeatsOnNthDayOfMonth == -2">
                        <select id="repeatsOnLastWeekdayOfMonth" class="form-control" ng-model="formData.repeatsOnLastWeekdayOfMonth" ng-options="repeatsOnLastWeekdayOfMonth.value as repeatsOnLastWeekdayOfMonth.name for repeatsOnLastWeekdayOfMonth in frequencyDayOfWeekOptions"
                            value="{{repeatsOnLastWeekdayOfMonth.value}}">
                            <option value=""></option>
                        </select>&nbsp;
                    </td>
                    <td class="col-sm-2" data-ng-show="formData.repeatsOnNthDayOfMonth == -2">&nbsp;
                    </td>
                </tr>
            </table>
            <div class="form-group" data-ng-show="formData.frequency == 3 && formData.repeatsOnNthDayOfMonth == -2">
                <div class="col-sm-3 col-md-3 col-md-offset-1">
                    <label class="control-label col-sm-9">{{ 'label.input.availablemonthdays' | translate }}</label>
                    <select id="avilabledays" ng-model="available" name="avilabledays" class="form-control multiselectmin" multiple>
                        <option ng-repeat="onday in repeatsOnDayOfMonthOptions" value="{{onday}}">
                            {{onday}}
                        </option>
                    </select>
                </div>
                <div class="col-sm-1 col-md-1 paddedtop25px">
                    <button type="button" class="btn btn-primary" data-ng-click="addMonthDay()">
                        <i class="icon-double-angle-right"></i>
                    </button>
                    <br/>
                    <button type="button" class="btn btn-primary" data-ng-click="removeMonthDay()">
                        <i class="icon-double-angle-left"></i>
                    </button>
                </div>
                <div class="col-sm-3 col-md-3">
                    <label class="control-label col-sm-9">{{ 'label.input.selectedmonthdays' | translate}}</label>
                    <select id="selecteddays" ng-model="selected" name="selecteddays" class="form-control multiselectmin" multiple>
                        <option ng-repeat="onday in selectedOnDayOfMonthOptions" value="{{onday}}">
                            {{onday}}
                        </option>
                    </select>
                </div>
            </div>
            <table class="col-sm-4">
                <tr ng-show="formData.repeating">
                    <td class="col-sm-2">
                        <select ng-show="formData.frequency=='2'" class="form-control" ng-model="formData.repeatsOnDay" ng-options="repeatsOnOption.value as repeatsOnOption.name for repeatsOnOption in repeatsOnOptions"
                            value="{{repeatsOnOption.name}}">
                            <option value=""></option>
                        </select>
                    </td>
                    <td class="col-sm-2"></td>
                </tr>
            </table>
        </div>
        <div class="col-sm-8 center">
            <div>
                <a id="cancel" ng-if="isCenterMeetingEdit" class="btn btn-default" href="" ng-click="cancel()">{{'label.button.cancel' | translate}}</a>
                <button id="save" type="submit" class="btn btn-primary" has-permission='CREATE_MEETING'>
                    {{'label.button.save' | translate}}
                </button>
            </div>
        </div>
    </form>
    <form ng-if="isCenterMeetingAttached && !isCenterMeetingEdit">
        <div class="alert alert-warning" role="alert">
            <h4>
                <strong>{{ 'label.heading.meeting' | translate }}</strong>
            </h4>
            <table class="table-minified">
                <tr>
                    <td>
                        <strong>{{ 'label.heading.nextmeetingon' | translate }}</strong>
                    </td>
                    <td>
                        <span class="padded-td">{{centerMeetingData.collectionMeetingCalendar.nextTenRecurringDates[0] | DateFormat}}&nbsp;
                            <a href="" ng-click="updateMeeting(centerMeetingData.collectionMeetingCalendar)" ng-show="centerMeetingData.collectionMeetingCalendar"
                                has-permission='UPDATE_MEETING'>
                                <i class="icon-edit icon-white"></i>
                            </a>
                            <span class="marginleftn7px" data-ng-hide="centerMeetingData.collectionMeetingCalendar.nextTenRecurringDates[0]">{{ 'label.unassigned' | translate }}</span>
                        </span>
                    </td>
                </tr>
                <tr data-ng-show="centerMeetingData.collectionMeetingCalendar.humanReadable">
                    <td>
                        <strong>{{ 'label.heading.meetingfrequency' | translate }}</strong>
                    </td>
                    <td>
                        <span class="padded-td">{{centerMeetingData.collectionMeetingCalendar.humanReadable}}</span>
                    </td>
                </tr>
                <tr data-ng-show="center.status.value=='Closed'">
                    <td>
                        <strong>{{ 'label.heading.closedate' | translate }}</strong>
                    </td>
                    <td>
                        <span class="padded-td">{{centerMeetingData.timeline.closedOnDate | DateFormat}}</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <strong>{{'label.input.meetingtime' | translate}}</strong>
                    </td>
                    <td>
                        <span class="padded-td">{{meetingTime | date:"h:mma"}}</span>
                    </td>
                </tr>
            </table>
        </div>
    </form>
</div>