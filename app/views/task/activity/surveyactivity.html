<div class="col-md-12 col-sm-12" ng-controller="surveyActivityController">
    <div ng-if="isDisplaySurveys" class="row">
        <div>
            <div class="pull-right" ng-if="surveys && surveys.length > 0">
                <div class="btn-group">
                    <a id="takesurvey" ng-click="takeNewSurvey()" class="btn btn-primary"><i
                            class="icon-plus-sign icon-white"></i>{{'label.button.take.survey' | translate}}</a>
                </div>
            </div>

            <table class="table" ng-show="surveys && surveys.length > 0">
                <thead>
                <tr class="graybg">
                    <th>{{'label.survey.name' | translate}}</th>
                    <th>{{'label.survey.taken.date' | translate}}</th>
                    <th>{{'label.survey.taken.doneby' | translate}}</th>
                    <th>{{'label.survey.taken.score' | translate}}</th>
                </tr>
                </thead>
                <tbody>
                <tr class="pointer-main" ng-repeat="survey in surveys">
                    <td>{{survey.surveyName}}</td>
                    <td>{{survey.surveyedOn}}</td>
                    <td>{{survey.surveyedByName}}</td>
                    <td>{{survey.totalScore}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div ng-if="!isDisplaySurveys" class="row client">
        <form name="takesurveyform" novalidate="" class="form-horizontal well" rc-submit="submit()">
            <api-validate></api-validate>
            <fieldset>
                <div class="form-group" ng-if="false">
                    <label class="control-label col-sm-2">{{'label.survey.done.by' | translate}}<span class="required">*</span></label>
                    <div class="col-sm-2">
                        <select id="surveyedBy" name="surveyedBy" ng-model="formData.surveyedBy" class="form-control"
                                ng-options="loanOfficer.id as loanOfficer.displayName for loanOfficer in loanOfficers"
                                value="{{loanOfficer.id}}" required late-validate="">
                            <option value="">{{'label.selectloanofficer' | translate}}</option>
                        </select>
                    </div>
                    <div class="col-sm-2">
                        <form-validate valattributeform="takesurveyform" valattribute="surveyedBy"/>
                    </div>

                    <label class="control-label col-sm-2">{{'label.survey.done.on' | translate}}<span class="required">*</span></label>
                    <div class="col-sm-2">
                        <input id="surveyedOn" type="text" name="surveyedOn" datepicker-pop="dd MMMM yyyy"
                               ng-model="formData.surveyedOn" is-open="opened1" class="form-control" required/>
                    </div>
                    <div class="col-sm-2">
                        <form-validate valattributeform="takesurveyform" valattribute="surveyedOn"/>
                    </div>
                </div>

                <div ng-if="questionDatas && questionDatas.length > 0">
                    <div ng-repeat="questionData in questionDatas track by $index" ng-init="questionIndex = $index">
                        <div class="form-group">
                            <label class="control-label col-sm-2">{{'label.survey.question' |translate}}&nbsp;:&nbsp;</label>
                            <div class="col-sm-10">{{questionData.text}} ?</div>
                        </div>
                        <div ng-if="questionData.responseDatas && questionData.responseDatas.length > 0">
                            <div class="form-group">
                                <label class="control-label col-sm-2">{{'label.survey.answers' |translate}}&nbsp;:&nbsp;</label>
                                <div class="col-sm-10">
                                    <div ng-repeat="responseData in questionData.responseDatas track by $index" ng-init="responseIndex = $index">
                                        <input type="radio" name="response{{questionIndex}}" value="{{responseData.id}}" ng-model="responseData.responseId">
                                        {{responseData.text}}<br>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <legend></legend>
                    </div>
                </div>

                <div class="col-md-offset-5">
                    <a id="cancel"ng-click="cancel()" class="btn btn-default">{{ 'label.button.cancel' |
                        translate }}</a>
                    <button id="save" type="submit" class="btn btn-primary">{{ 'label.button.save' | translate }}</button>
                </div>
            </fieldset>
        </form>
    </div>
</div>