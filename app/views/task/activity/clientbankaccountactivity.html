<div class="col-md-12" ng-controller="ClientBankAccountActivityController">
    <div>
        <a ng-click="addBankAccountDetails()" ng-show="showAddBankAccountsButton && !showViewBankAccountsScreen && !isTaskCompleted()"
            class="btn btn-primary pull-right"><i class="icon-plus icon-white"></i>
            {{'label.button.add.bankaccountdetails' | translate}}
        </a>
    </div>
    <api-validate></api-validate>

    <div class="col-md-offset-2 paddedleft pull-right">
        <a ng-click="activate()" ng-show="!isPennyDrop && showActivateBankAccountsButton && !isTaskCompleted()" class="btn btn-success"><i
                class="icon-ok icon-white"></i>
            {{'label.button.activate' | translate}}
        </a>
        <a ng-click="verify()" ng-show="isPennyDrop && showVerifyBankAccountsButton && !isTaskCompleted()" class="btn btn-success "><i
            class="icon-ok icon-white"></i>
        {{'label.button.verify' | translate}}
         </a>
        <a ng-click="edit()" ng-show="showEditBankAccountsButton && !isTaskCompleted()" class="btn btn-primary "><i
                class="icon-edit icon-white"></i>
            {{'label.button.edit' | translate}}
        </a>
        <a ng-click="deactivate()" ng-show="showDeactivateBankAccountsButton && !isTaskCompleted()" class="btn btn-danger "><i
                class="icon-trash icon-white"></i>
            {{'label.button.deactivate' | translate}}
        </a>
    </div>

    <div class="clearfix"></div>
    <div ng-if="bankAccountDetailsData==undefined" ng-show="showAddBankAccountsButton && !showViewBankAccountsScreen">
        <div class="" style="padding:10px;">
            <div class="alert alert-info" style="border-style: dashed;">
                <span class="fa fa-info-circle"></span> {{'info.message.activity.bankaccount.nodata' | translate}}
            </div>
        </div>
    </div>
    <br>

    <form ng-show="showAddBankAccountsScreen" name="bankaccountdetail" novalidate="" rc-submit="submit()"
        class="form-horizontal" autocomplete="off">
        <api-validate></api-validate>
        <fieldset>
            <legend>{{'label.anchor.add.bank.account.details' | translate}}</legend>

            <div class="form-group">
                <label class="control-label col-sm-3">
                    {{'label.input.holdername' | translate}}<span class="required">*</span>
                </label>

                <div class="col-sm-3">
                    <input name="bankAccountHolderName" id="bankAccountHolderName" ng-model="formData.name" type="text"
                        ng-required="true" autocomplete="off" maxlength="50" class="form-control" />
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-3" >{{'label.input.accountnumber' | translate}}
                    <span  class="required">*</span></label>

                <div class="col-sm-3">
                    <input name="bankAccountNumberRepeat" id="bankAccountNumberRepeat" ng-model="repeatFormData.accountNumberRepeat"
                           type="password" ng-pattern="/^[0-9]{1,50}$/" maxlength="50" class="form-control" ng-required="true"/>
                </div>
                <div class="col-sm-2">
                    <span ng-show="bankaccountdetail.bankAccountNumberRepeat.$error.pattern">
                        <small class="required">{{'invalid.accountnumber.format' | translate}}</small>
                    </span>
                    <span ng-show="formData.accountNumber != undefined && formData.accountNumber != repeatFormData.accountNumberRepeat">
                        <small class="required">{{'label.mismatch.account.number' | translate}}</small>
                    </span>
                    <form-validate valattributeform="bankaccountdetail" valattribute="bankAccountNumberRepeat"/>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-3" >{{'label.input.accountnumber.repeat' | translate}}
                    <span class="required">*</span></label>

                <div class="col-sm-3">
                    <input name="bankAccountNumber" id="bankAccountNumber" ng-model="formData.accountNumber"
                           type="text" autocomplete="off" ng-pattern="/^[0-9]{1,50}$/" maxlength="50" class="form-control" ng-required="true" onpaste="return false;"/>
                </div>
                <div class="col-sm-2">
                    <span ng-show="bankaccountdetail.bankAccountNumber.$error.pattern">
                        <small class="required">{{'invalid.accountnumber.format' | translate}}</small>
                    </span>
                    <form-validate valattributeform="bankaccountdetail" valattribute="bankAccountNumber"/>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-3">{{'label.input.accounttype' | translate}}</label>
                </label>
                <div class="col-sm-3">
                    <select id="accountType" name="accountType" ng-model="formData.accountTypeId" class="form-control"
                        ng-options="accountType.id as accountType.value for accountType in bankAccountTypeOptions"
                        value="{{accountType.id}}">
                    </select>
                </div>
                <div class="col-sm-2">
                    <form-validate valattributeform="bankaccountdetail" valattribute="accountType" />
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-3">{{'label.input.ifsccode' | translate}}
                    <span class="required">*</span></label>

                <div class="col-sm-3">
                    <input name="bankIFSCCodeRepeat" id="bankIFSCCodeRepeat" ng-model="repeatFormData.ifscCodeRepeat"
                        minlength="11" maxlength="11" type="password" ng-pattern="/^[A-Z]{4}0[A-Z0-9]{6}$/"
                        class="form-control" ng-required="true" />
                </div>
                <div class="col-sm-2">
                    <span ng-show="bankaccountdetail.bankIFSCCodeRepeat.$error.pattern">
                        <small class="required">{{'inavalid.ifsc.format' | translate}}</small>
                    </span>
                    <span
                        ng-show="formData.ifscCode != undefined && formData.ifscCode != repeatFormData.ifscCodeRepeat">
                        <small class="required">{{'label.mismatch.ifsc.number' | translate}}</small>
                    </span>
                    <form-validate code="bankaccountdetail" valattribute="bankIFSCCodeRepeat" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3">{{'label.input.ifsccode.repeat' | translate}}
                    <span class="required">*</span></label>

                <div class="col-sm-3">
                    <input name="bankIFSCCode" id="bankIFSCCode" ng-model="formData.ifscCode" ng-minlength="11"
                        maxlength="11" type="text" autocomplete="off" ng-pattern="/^[A-Z]{4}0[A-Z0-9]{6}$/"
                        class="form-control" ng-required="true" onpaste="return false;" />
                </div>
                <div class="col-sm-3">
                    <span ng-show="bankaccountdetail.bankIFSCCode.$invalid && bankaccountdetail.bankIFSCCode.$dirty">
                        <small class="required" ng-show="bankaccountdetail.bankIFSCCode.$error.pattern">
                            {{'error.msg.invalid.ifscCode' | translate}}</small></span>
                    <span ng-show="bankaccountdetail.bankIFSCCode.$error.minlength">
                        <small class="required"> {{'error.msg.ifsc.minimum.number' | translate}}</small>
                    </span>
                    <form-validate valattributeform="bankaccountdetail" valattribute="bankIFSCCode" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3">{{'label.input.micrcode' | translate}}
                </label>
                <div class="col-sm-3">
                    <input name="micrCode" id="micrCode" ng-model="formData.micrCode" type="text" autocomplete="off"
                        ng-pattern="regexPattern('micrCode')" class="form-control" />
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-3">{{'label.input.bankname' | translate}}</label>

                <div class="col-sm-3">
                    <input name="bankName" id="bankName" ng-model="formData.bankName" type="text" autocomplete="off"
                        class="form-control" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3">{{'label.input.branchName' | translate}}</label>
                <div class="col-sm-3">
                    <input name="branchName" id="branchName" ng-model="formData.branchName" type="text"
                        autocomplete="off" class="form-control" />
                </div>

            </div>
            <div class="form-group">
                <label class="control-label col-sm-3">{{'label.input.bankcity' | translate}}</label>

                <div class="col-sm-3">
                    <input name="bankCity" id="bankCity" ng-model="formData.bankCity" type="text" autocomplete="off"
                        class="form-control" />
                </div>

            </div>
            <div class="form-group">
                <label class="control-label col-sm-3">{{'label.input.mobilenumber' | translate}}</label>

                <div class="col-sm-3">
                    <input name="mobileNumber" id="mobileNumber" ng-model="formData.mobileNumber" type="text"
                        autocomplete="off" class="form-control" ng-pattern="{{regexFormats.mobileNumberPattern}}" />
                </div>
                <div class="col-sm-2">
                    <span ng-show="bankaccountdetail.mobileNumber.$invalid && bankaccountdetail.mobileNumber.$dirty">
                        <small class="required" ng-show="bankaccountdetail.mobileNumber.$error.pattern">
                            {{'label.must.be.ten.digits.numeric' | translate}}
                        </small>
                    </span>
                    <form-validate valattributeform="bankaccountdetail" valattribute="mobileNumber" />
                </div>
            </div>
            <div class="col-md-offset-2 paddedleft">
                <a id="cancel" ng-click="cancel()" class="btn btn-default">{{'label.button.cancel' | translate}}</a>
                <button id="save" type="submit" class="btn btn-primary">{{'label.button.submit' | translate}}</button>
            </div>
        </fieldset>
    </form>

    <form ng-show="showViewBankAccountsScreen" name="bankaccountdetails" class="form-horizontal" autocomplete="off">
        <div class="col-md-12 col-sm-12 ng-scope">
            <div class="col-md-6">
                <div class="form-group paddedtop">
                    <span><b>{{'label.input.holdername' | translate}}:&nbsp;</b></span>
                    <span>{{bankAccountDetailsData.name}}</span>
                </div>
                <div class="form-group paddedtop">
                    <span><b>{{'label.input.accountnumber' | translate}}:&nbsp;</b></span>
                    <span>{{bankAccountDetailsData.accountNumber}}</span>
                </div>
                <div class="form-group paddedtop">
                    <span><b>{{'label.input.accounttype' | translate}}:&nbsp;</b></span>
                    <span>{{bankAccountDetailsData.accountType.code | translate}}</span>
                </div>
                <div class="form-group paddedtop">
                    <span><b>{{'label.heading.status' | translate}}:&nbsp;</b></span>
                    <span>{{bankAccountDetailsData.status.value.charAt(0).toUpperCase() +
                        bankAccountDetailsData.status.value.slice(1) | translate}}</span>
                </div>
                <div class="form-group paddedtop">
                    <span><b>{{'label.input.ifsccode' | translate}}:&nbsp;</b></span>
                    <span>{{bankAccountDetailsData.ifscCode}}</span>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group paddedtop">
                    <span><b>{{'label.input.bankname' | translate}}:&nbsp;</b></span>
                    <span>{{bankAccountDetailsData.bankName}}</span>
                </div>
                <div class="form-group paddedtop">
                    <span><b>{{'label.input.branchName' | translate}}:&nbsp;</b></span>
                    <span>{{bankAccountDetailsData.branchName}}</span>
                </div>
                <div class="form-group paddedtop">
                    <span><b>{{'label.input.bankcity' | translate}}:&nbsp;</b></span>
                    <span>{{bankAccountDetailsData.bankCity}}</span>
                </div>
                <div class="form-group paddedtop">
                    <span><b>{{'label.input.mobilenumber' | translate}}:&nbsp;</b></span>
                    <span>{{bankAccountDetailsData.mobileNumber}}</span>
                </div>
            </div>
        </div>
        <legend></legend>
        <div ng-if="bankAccountDetailsData.isVerified" class="row paddedtop10">>
            <div class="col-md-12 span gray-head">
                <span class="boldlabel">
                    <strong class="ng-binding">{{'label.heading.verification.bankaccount' | translate}}</strong>
                </span>
            </div>
            <div class="col-md-12">
                <table class="table loan-details">
                    <thead>
                    <tr>
                        <th><h5><strong>{{'label.heading.verification.type' | translate}}</strong></h5></th>
                        <th><h5><strong>{{'label.heading.verification.status' | translate}}</strong></h5></th>
                        <th><h5><strong>{{'label.heading.verification.beneficiary' | translate}}</strong></h5></th>
                        <th><h5><strong>{{'label.heading.verification.comment' | translate}}</strong></h5></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class= "verification-details" >
                        <td> {{bankAccountDetailsData.verificationType.value}}</td>
                        <td> {{bankAccountDetailsData.verificationStatus.value}}</td>
                        <td> {{bankAccountDetailsData.verifiedBeneficiaryName}}</td>
                        <td> {{bankAccountDetailsData.verifiedComment}}</td>
                        
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </form>
</div>
