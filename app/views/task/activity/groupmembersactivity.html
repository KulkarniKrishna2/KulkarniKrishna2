<div ng-controller="groupmembersActivityController">

    <!-- Submit form, new data    -->
    <div class="col-md-12 col-sm-12" ng-if="isTaskCompleted()  || viewSummary">
        <div class="row">
            <div ng-if="!isTaskCompleted()" class="col-md-offset-11 col-md-1">
                    <button id="add" class="btn btn-primary" ng-click="showAddMemberView()"><i class="icon-plus-sign-alt icon-white"></i>{{'label.button.add' | translate}}</button>
            </div>

        </div>
        <div class="row">
            <table class="table table-condensed marginbottom0" style="display:inline-table;">
                <thead>
                <tr class="graybg">
                    <th>{{'label.heading.accnum' | translate}}</th>
                    <th>{{'label.heading.name' | translate}}</th>
                    <th>{{ 'label.heading.actions' | translate }}</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr class="pointer-main" ng-repeat="member in group.clientMembers">
                    <td class="pointer" data-ng-click="routeToMem(member.id)">
                        <i class="icon-stop {{member.status.code | StatusLookup}}" tooltip="{{member.status.value}}"></i>
                        {{member.accountNo}}
                    </td>
                    <td class="pointer" data-ng-click="routeToMem(member.id)">{{member.displayName}}</td>
                    </td>
                    <td>
                        <a class="btn btn-primary btn-sm" ng-href="#/newindividualjlgloanaccount/{{group.id}}/{{member.id}}" data-ng-show="isActiveMember(member.status.code)"><i
                                class="icon-plus icon-white"></i>{{ 'label.button.jlgloanapplication' | translate }}</a>

                    </td>
                    <td>
                        <a has-permission='CREATE_LOANAPPLICATIONREFERENCE' ng-show="isLoanApplication === true" class="btn btn-primary btn-sm" ng-href="#/newindividualjlgloanapplicationreference/{{group.id}}/{{member.id}}" data-ng-show="isActiveMember(member.status.code)"><i
                                class="icon-plus icon-white"></i></a>

                    </td>
                </tr>
                </tbody>
            </table>

        </div>
              
    </div>


    <form name="managemembers" ng-if="viewAddMember" class="form-horizontal">
        <fieldset>
            <div class="row">
                <div class="col-md-7">
                    <legend>{{'label.heading.associatenewmembers' | translate}}</legend>
                    <div class="form-group">
                        <label class="control-label col-sm-4">{{ 'label.input.searchformember' | translate }}</label>
                        <div class="col-sm-4 col-md-4">
                            <input id="members" type="text" ng-model="available" class="col-md-4 form-control"
                                   typeahead-min-length="3"
                                   typeahead-editable="false"
                                   typeahead="client as client.displayName for client in clientOptions($viewValue)"
                                   typeahead-on-select="viewClient(available)"/>
                        </div>
                        <div class="col-sm-1 col-md-1">
                            <button ng-show="available" type="button" class="btn angled-btn btn-primary" data-ng-click="addMember()">
                                {{ 'label.button.add' | translate }}
                                <i class="icon-double-angle-right"></i></button>
                        </div>
                    </div>
                    <div class="form-group">
                        <div data-ng-show="available" class="col-md-6 col-md-offset-1">
                            <p>{{'label.heading.groupdetails' | translate}}</p>
                            <table class="table">
                                <tr>
                                    <td>{{'label.heading.name' | translate}}</td>
                                    <td>{{client.displayName}}</td>
                                </tr>
                                <tr>
                                    <td>{{ 'label.heading.id' | translate }}</td>
                                    <td valign="top">{{client.id}}</td>
                                </tr>
                                <tr>
                                    <td>{{ 'label.heading.office' | translate }}</td>
                                    <td>{{client.officeName}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-3 col-md-offset-5">
                <br>
                <button id="cancel" ng-click="cancel()" class="btn btn-default"><i class="icon-double-angle-left"></i> {{ 'label.button.back' | translate }}</button>
            </div>
        </fieldset>
    </form>
</div>
