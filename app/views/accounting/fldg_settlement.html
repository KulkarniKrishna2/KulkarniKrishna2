<div ng-controller="FldgSettlementController">
    <ul class="breadcrumb">
        <li><a href="#/viewtranche">{{'label.anchor.fldgtranche' | translate}}</a></li>
        <li class="active">{{'label.anchor.fldgsettlement' | translate}}</li>
    </ul>
    <form name="fldg" novalidate="" class="form-horizontal well" rc-submit="submit()">
        <api-validate></api-validate>
        <fieldset>
            <legend>{{'label.anchor.fldgsettlement'
                | translate}}&nbsp;</legend>
            <div class="col-md-5">
                <table class="table-bordered table view-table">
                    <tr>
                        <td>{{'label.heading.name' | translate}}</td>
                        <td>{{trancheDetails.name}}</td>
                    </tr>
                    <tr>
                        <td>{{'label.heading.disbursementammount' | translate}}</td>
                        <td>{{trancheDetails.disbursementAmount | number:2}}</td>
                    </tr>
                    <tr>
                        <td>{{'label.heading.provisioningpercentage' | translate}}</td>
                        <td>{{trancheDetails.percentage | number:2}}</td>
                    </tr>
                    <tr>
                        <td>{{'label.input.trancheamount' | translate}}</td>
                        <td>{{trancheDetails.trancheAmount | number:2}}</td>
                    </tr>
                </table>
            </div>
            <legend>{{'label.anchor.overdueloans'
                | translate}}&nbsp;</legend>
            <div class="col-md-10" ng-if ="overdueLoans.length>0">
                <table class="table-bordered table view-table">
                    <thead>
                        <tr class="graybg">
                            <th>{{'label.input.loanaccountnumber' | translate}}</th>
                            <th>{{'label.heading.amount' | translate}}</th>
                            <th>{{'label.heading.settledby' | translate}}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="overdueLoan in overdueLoans">
                            <td style="width: 300px" ng-model="overdueLoan.account">{{overdueLoan.accountNumber}}</td>
                            <td>{{overdueLoan.overDueAmount | number:2}}</td>
                            <td style="width: 350px">
                                <select chosen="settlementTypeOptions" id="settlementTypeId" name="settlementTypeId"
                                    ng-model="overdueLoan.settlementId" class="form-control" ng-options="settlementTypeOption.id as settlementTypeOption.value for settlementTypeOption in settlementOptions"
                                    value="{{settlementTypeOption.id}}" required late-validate>
                                    <option value="">{{'label.menu.selectone' | translate}}</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="center">
                    <a id="cancel" href="#/viewtranche" type="submit" class="btn btn-default">{{'label.button.cancel'
                        | translate}}&nbsp;</a>&nbsp;
                    <a id="save" type="submit" has-permission='CREATE_FLDG_SETTLEMENT' ng-click="submit()" class="btn btn-primary">{{'label.anchor.save'
                        | translate}}&nbsp;</a>
                </div>
            </div>  
        </fieldset>
    </form>
</div>