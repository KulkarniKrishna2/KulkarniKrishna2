<div class="col-md-12" ng-controller="ViewLoanDetailsController">
    <div>
        <ul class="breadcrumb" ng-show="loandetails.clientData">
            <li><a ng-href="#/viewoffice/{{loandetails.clientData.officeId}}">{{getOfficeName(loandetails.clientData.officeName,loandetails.clientData.officeReferenceNumber)}}</a></li>
            <li ng-show="group.villageData"><a ng-href="#/viewvillage/{{group.villageData.villageId}}">{{group.villageData.villageName}}</a></li>
            <li ng-show="group.centerName"><a ng-href="#/viewcenter/{{group.centerId}}">{{group.centerName}}</a></li>
            <li ng-show="group.name"><a ng-href="#/viewgroup/{{group.id}}">{{group.name}}</a></li>
            <li ng-show="loandetails.clientName"><a
                    ng-href="#/viewclient/{{loandetails.clientId}}">{{loandetails.clientName}}</a></li>
            <li class="active">{{loandetails.loanProductName}}({{loandetails.accountNo}})</li>
        </ul>
        <ul class="breadcrumb" ng-hide="loandetails.clientData">
            <li><a ng-href="#/viewoffice/{{loandetails.group.officeId}}">{{loandetails.group.officeName}}</a></li>
            <li ng-show="loandetails.group.villageData"><a ng-href="#/viewvillage/{{loandetails.group.villageData.villageId}}">{{loandetails.group.villageData.villageName}}</a></li>
            <li ng-show="loandetails.group.centerName"><a ng-href="#/viewcenter/{{loandetails.group.centerId}}">{{loandetails.group.centerName}}</a></li>
            <li ng-show="loandetails.group.name"><a ng-href="#/viewgroup/{{loandetails.group.id}}">{{loandetails.group.name}}</a></li>
            <li class="active">{{loandetails.loanProductName}}({{loandetails.accountNo}})</li>
        </ul>
    </div>
    <div>
        <div ng-hide="report">
            <api-validate></api-validate>
        </div>

        <div class="form-horizontal" ng-show="report">
            <api-validate></api-validate>
            <div id="print">

                <h3 align="center">{{'label.heading.companyname' | translate}}</h3>
                <h3 align="center">{{'label.heading.loanrepaymentschedule' | translate}}</h3>
                <div id="branchName" align="center">
                    <h3>{{loandetails.transactions[0].officeName}}</h3>
                    <br>
                </div>


                <div id="table2" class="pull-right">
                    <table id="table2" class="table width100">
                        <tbody>
                        <tr>
                            <th>{{'label.heading.sanctiondate' | translate}}:</th>
                            <td>{{loanApprovedDate}}</td>
                        </tr>

                        <tr>
                            <th>{{'label.heading.sanctionamount' | translate}}:</th>
                            <td>{{loandetails.approvedPrincipal}}</td>
                        </tr>

                        <tr>
                            <th>{{'label.heading.disbursementdate' | translate}}:</th>
                            <td>{{dueDate}}</td>
                        </tr>

                        <tr>
                            <th>{{'label.heading.disbursementammount' | translate}}:</th>
                            <td>{{totalAmount}}</td>
                        </tr>

                        <tr>
                            <th>{{'label.heading.interesttype' | translate}}:</th>
                            <td>{{loandetails.interestType.value}}</td>
                        </tr>

                        <tr>
                            <th>{{'label.heading.interestperannum' | translate}}:</th>
                            <td>{{loandetails.interestRatePerPeriod}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>


                <div id="table1">
                    <table id="table1" class="table width40" >
                        <tbody>
                        <tr>
                            <th>{{'label.heading.reportdate' | translate}}:</th>
                            <td>{{currentDate}}</td>
                        </tr>

                        <tr>
                            <th>{{'label.heading.customername' | translate}}:</th>
                            <td>{{loandetails.clientName}}</td>
                        </tr>

                        <tr>
                            <th>{{'label.heading.customerid' | translate}}:</th>
                            <td>{{loandetails.clientAccountNo}}</td>
                        </tr>

                        <tr>
                            <th>{{'label.heading.loanno' | translate}}:</th>
                            <td>{{loandetails.accountNo}}</td>
                        </tr>

                        <tr>
                            <th>{{'label.heading.centername' | translate}}:</th>
                            <td>{{loandetails.group.centerName}}</td>
                        </tr>

                        <tr>
                            <th>{{'label.heading.coname' | translate}}:</th>
                            <td>{{loandetails.loanOfficerName}}</td>
                        </tr>

                        <tr>
                            <th>{{'label.heading.productname' | translate}}:</th>
                            <td>{{loandetails.loanProductName}}</td>
                        </tr>
                        </tbody>
                    </table>
                    <br>
                </div>

                <div id="table3">
                    <table class="table width100">
                        <tbody>
                        <tr>
                            <th id="heading">{{'label.heading.serialno' | translate}}</th>
                            <th id="heading">{{'label.heading.disbursaldate' | translate}}</th>
                            <th id="heading">{{'label.heading.disbursedamount' | translate}}</th>
                        </tr>
                        <tr ng-repeat="disbursed in disbursedData">
                            <td>{{$index+1}}</td>
                            <td>{{disbursed.dueDate | DateFormat}}</td>
                            <td>{{disbursed.principalDisbursed}}</td>
                        </tr>
                        </tbody>
                    </table>
                    <br>
                </div>

                <div id="table4">
                    <table class="table width100" ng-show="previewRepayment">
                        <tbody>
                        <tr>
                            <th id="heading">{{'label.heading.serialno' | translate}}</th>
                            <th id="heading" width="=150">{{'label.heading.date' | translate}}</th>
                            <th id="heading">{{'label.heading.principaldue' | translate}}</th>
                            <th id="heading">{{'label.heading.principalbalance' | translate}}</th>
                            <th id="heading">{{'label.heading.interestdue' | translate}}</th>
                            <th id="heading">{{'label.heading.due' | translate}}</th>
                        </tr>
                        <tr ng-repeat="period in repaymentData">
                            <td>{{period.period}}</td>
                            <td width="150">{{period.dueDate | DateFormat}}</td>
                            <td>{{period.principalDue| number}}</td>
                            <td>{{period.principalLoanBalanceOutstanding| number}}</td>
                            <td>{{period.interestDue| number}}</td>
                            <td>{{period.totalDueForPeriod| number}}</td>
                        </tr>

                        <br>
                        <tr>
                            <td id="heading" colspan="2">{{'label.heading.total' | translate}}</td>
                            <td id="heading">{{repaymentscheduleinfo.totalPrincipalExpected| number}}</td>
                            <td id="heading"></td>
                            <td id="heading">{{repaymentscheduleinfo.totalInterestCharged| number}}</td>
                            <td id="heading">{{repaymentscheduleinfo.totalRepaymentExpected| number}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <button ng-click="printDiv('print');">Print Div</button>

                <span><a ng-hide="report" ng-click="previewRepayment=!previewRepayment"><i class="icon-circle-arrow-left">{{'label.anchor.backtoloaninfo'
                    | translate}}</i></a><br><br></span>

            <div class="col-md-11 center" ng-show="previewRepayment">
                <button ng-click="backToLoanDetails()" class="btn btn-default ng-binding">{{'label.button.back' | translate}} </button>
            </div>

        	<div class="form-group" ng-show="viewLoanReport">
                 <label class="control-label col-sm-2">{{'label.input.fromdate' | translate}}<span
                         class="required">*</span></label>

                 <div class="col-sm-3">
                 	<input id="startDate" class="date-disable form-control" readonly type="text" autocomplete="off"
                            datepicker-pop="{{df}}" ng-model="date.fromDate" is-open="opened" min="minDate"
                            max="restrictDate"/>
                 </div>
                 <label class="control-label col-sm-2">{{'label.input.todate' | translate}}<span
                         class="required">*</span></label>

                 <div class="col-sm-3">
                 	<input id="endDate" class="date-disable form-control" readonly type="text" autocomplete="off"
                            datepicker-pop="{{df}}" ng-model="date.toDate" is-open="opened" min="minDate"
                            max="restrictDate"/>
                 </div>
             </div>
             <div class="col-md-11 center" ng-show="viewLoanReport">
                 <button ng-click="viewLoanDetails()" class="btn btn-default ng-binding">{{'label.button.back' | translate}} </button>
                 <button ng-click="viewprintdetails()" class="btn btn-primary ng-binding">{{'label.button.viewprint' | translate}} </button>
             </div>


        </div>
        <div ng-hide="hidePentahoReport" ng-show="report" class="col-md-12 alert-block span tab-content">
            <div id="printcontent">
                <iframe id="rptLoadingFrame" ng-show="viewReport" ng-src="{{viewReportDetails}}" frameborder="0" width="100%" height="800px"></iframe>
            </div>
            <div class="col-md-13 center" ng-show="viewTransactionReport">
                <button ng-click="viewLoanDetails()" class="btn btn-default ng-binding">{{'label.button.back' | translate}} </button>
            </div>
        </div>
        <div ng-hide="report">
            <div class="span gray-head" style="margin-left:0%;">
                <span style="margin-left: 10px;font-size:20px">
                    <strong> <i ng-hide="loandetails.inArrears" class="icon-stop {{getStatusCode(loandetails) | StatusLookup}}"></i>
                        <i ng-show="loandetails.inArrears" class="icon-stop {{getStatusCode(loandetails) | StatusLookup}}overdue"></i>&nbsp;{{loandetails.loanProductName}}(#{{loandetails.accountNo}})</strong>
                </span>
        
                <span class="pull-right" ng-if="loandetails.status.active">
                    <button class="btn btn-warning" ng-if="!loandetails.isLocked" has-permission="LOCK_LOAN" ng-click="lockOrUnLockLoan()">
                        <i class="icon-unlock"></i>
                    </button>
                    <button class="btn btn-warning" ng-if="loandetails.isLocked" has-permission="UNLOCK_LOAN" ng-click="lockOrUnLockLoan()">
                        <i class="icon-lock"></i>
                    </button>
                </span>
                <span ng-show="bankLoanStatus && showBankApprovalStatus" style="font-size:18px" class="pull-right"><strong>[{{bankLoanStatus}}]&nbsp;</strong></span>       
            </div>
            <div class="col-sm-12 col-md-12 primarydiv">
                <div class="pull-right">
                      <span ng-repeat="button in buttons.singlebuttons" ng-if="button.isEnableButton == undefined || button.isEnableButton === true" ng-hide="isHiddenButton(button.isHidden)">
                          <a ng-show="button.name"  ng-click="clickEvent(button.name.replace('button.',''), loandetails.id)"
                             class="btn btn-primary" has-permission='{{button.taskPermissionName}}'><i
                                  class="{{button.icon}} icon-white"></i>&nbsp;{{'label.' + button.name |
                              translate}}</a>
                      </span>
                      <span ng-repeat="button in buttons.singlebuttons" ng-show="isGlimRecovery(button.taskPermissionName)">
                          <a class="btn btn-primary" href="#/glimrecoverypayment/{{loandetails.id}}" has-permission="REPAYMENT_LOAN">
                              <i class="icon-briefcase icon-white"></i>{{'label.button.glimrecoverypayment' | translate}}
                          </a>
                      </span>
                      <span ng-show="buttons.options" class="btn-group dropdown" on-toggle="toggled(open)">
                          <a class="btn btn-primary dropdown-toggle">
                              {{ 'label.button.more' | translate}}
                              <span class="caret"></span>
                          </a>
                          <ul style='margin-left:-95px;' class="dropdown dropdown-menu">
                              <li class="{{button.icon}}" ng-repeat="button in buttons.options" ng-hide="isHiddenButton(button.isHidden)">
                                <a ng-click="clickEvent(button.name.replace('button.',''), loandetails.id)"
                                     has-permission='{{button.taskPermissionName}}'>{{'label.'+
                                      button.name | translate}}</a>
                              </li>
                              <li class="{{button.icon}}" ng-show="isGlimActiveLoan(loandetails.status.active) && isGlimChargesAvailbale">
                                  <a href="#/glimloanaccountcharge/{{loandetails.id}}/waivecharge" has-permission="WAIVEINTERESTPORTION_LOAN">
                                      {{'label.button.waiveglimcharge' | translate}}
                                  </a>
                              </li>
                              <li class="{{button.icon}}" ng-show="isGlim && loandetails.status.active==true">
                                  <a href="#/glimloanaccountprepay/{{loandetails.id}}" has-permission="REPAYMENT_LOAN">
                                      {{'label.button.glimprepayloan' | translate}}
                                  </a>
                              </li>
                              <li class="{{button.icon}}" ng-show="isGlimActiveLoan(loandetails.status.active)">
                                  <a href="#/glimrecoverypayment/{{loandetails.id}}" has-permission="REPAYMENT_LOAN">
                                      {{'label.button.glimrecoverypayment' | translate}}
                                  </a>
                              </li>
                              <li class="{{button.icon}}">
                                  <a href="#/reports/{{loandetails.id}}/loanaccountreports">
                                      {{'label.button.loanaccountreport' | translate}}
                                  </a>
                              </li>
                              <li class="{{button.icon}}" ng-show="showEditActiveLoan && loandetails.status.active==true">
                                <a href="#/loan/{{loandetails.id}}/editactiveloan" has-permission="READ_ACTIVE_LOAN">{{'label.button.edit.loan' | translate}}</a> 
                              </li>
                          </ul>
                      </span>
                </div>
            </div>

            <hr/>
            <br/>

            <div class="row span" style="margin-left:-1px;margin-top: -20px">
                <div class="col-sm-6 col-md-6">
                    <table class="table table-striped table-bordered">
                        <tr>
                            <th class="table-bold-loan">{{'label.heading.disbursementdate' | translate}}</th>
                            <td><span class="padded-td">{{loandetails.timeline.actualDisbursementDate | DateFormat}}<span
                                    data-ng-hide="loandetails.timeline.actualDisbursementDate">{{'label.heading.notavailable' | translate}}</span></span>
                            </td>
                        </tr>
                        <tr>
                            <th class="table-bold-loan">{{'label.heading.currency' | translate}}</th>
                            <td><span class="padded-td">{{loandetails.currency.name}}</span></td>
                        </tr>
                        <tr>
                            <th class="table-bold-loan">{{'label.heading.loanofficer' | translate}}</th>
                            <td><span class="padded-td"><span data-ng-hide="loandetails.loanOfficerName">{{'label.unassigned' | translate}}</span>{{loandetails.loanOfficerName}}&nbsp;
                                    <span ng-show="loandetails.loanOfficerName">
                                      <a ng-click="clickEvent('unassignloanofficer', loandetails.id)"><i
                                              class="icon-remove"></i></a>
                                    </span>
                                    </span>
                            </td>
                        </tr>
                        <tr>
                            <th class="table-bold-loan">{{'label.heading.loanexternalid' | translate}}</th>
                            <td><span class="padded-td">{{loandetails.externalId}}</span></td>
                        </tr>
                    </table>
                </div>
                <div class="col-sm-6 col-md-6">
                    <table class="table table-striped table-bordered">
                        <tr>
                            <th class="table-bold-loan">{{'label.heading.loanpurpose' | translate}}</th>
                            <td><span class="padded-td">{{loandetails.loanPurposeName}}
                                <span data-ng-hide="loandetails.loanPurposeName">{{'label.heading.notprovided' | translate}}</span></span>
                            </td>
                        </tr>
                        <tr>
                            <th class="table-bold-loan">{{'label.heading.proposedamount' | translate}}</th>
                            <td><span class="padded-td">{{loandetails.proposedPrincipal | number}}</span></td>
                        </tr>
                        <tr ng-show="showApprovedAmountBasedOnStatus()">
                            <th class="table-bold-loan">{{'label.heading.approvedamount' | translate}}</th>
                            <td><span class="padded-td">{{loandetails.approvedPrincipal | number}}</span></td>
                        </tr>
                        <tr ng-show="showDisbursedAmountBasedOnStatus()">
                            <th class="table-bold-loan">{{'label.heading.disburseamount' | translate}}</th>
                            <td><span class="padded-td">{{loandetails.principal | number}}</span></td>
                        </tr>
                        <tr ng-show="showDisbursedAmountBasedOnStatus() && loandetails.summary && loandetails.summary.principalNetDisbursed < loandetails.principal && !hideNetDisbursedAmount">
                            <th class="table-bold-loan">{{'label.heading.netdisburseamount' | translate}}</th>
                            <td><span class="padded-td">{{loandetails.summary.principalNetDisbursed | number}}</span></td>
                        </tr>
                        <tr ng-show="loandetails.summary.totalOverdue>0">
                            <th class="table-bold-loan">{{'label.heading.arrearsby' | translate}}</th>
                            <td><span class="padded-td">{{loandetails.summary.totalOverdue | number}}<span
                                    data-ng-hide="loandetails.summary.totalOverdue>=0">{{'label.heading.notprovided' | translate}}</span></span>
                            </td>
                        </tr>
                        <tr ng-show="isOverPaidLoan">
                            <th class="table-bold-loan">{{'label.heading.overpaidby' | translate}}</th>
                            <td><span class="padded-td">{{loandetails.totalOverpaid| number}}<span
                                    data-ng-hide="loandetails.totalOverpaid>0">{{'label.heading.notprovided' | translate}}</span></span>
                            </td>
                        </tr>
                    </table>

                </div>
            </div>
            <div class="row paddedleft">
                <hr class="marginbottom"/>
                <tabset>
                    <tab active="tabs[0].active" heading="{{'label.heading.accountdetail' | translate}}">
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <th class="empty"></th>
                                <th class="empty"></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{'label.heading.repaymentstrategy' |
                                    translate}}
                                </td>
                                <td><span class="padded-td">{{loandetails.transactionProcessingStrategyName}}</span></td>
                            </tr>
                            <tr ng-hide="loandetails.meeting">
                                <td>{{'label.heading.repayments' | translate}}</td>
                                <td><span class="padded-td">{{loandetails.numberOfRepayments}} every {{loandetails.repaymentEvery}}&nbsp;{{loandetails.repaymentFrequencyType.value}}</span><span ng-show="loandetails.repaymentFrequencyType.id == 2 && loandetails.repaymentFrequencyNthDayType.id != 0 && loandetails.repaymentFrequencyDayOfWeekType.id != 0">&nbsp;on&nbsp;{{loandetails.repaymentFrequencyNthDayType.value}}&nbsp;{{loandetails.repaymentFrequencyDayOfWeekType.value}}</span>
                                </td>
                            </tr>
                            <tr ng-show="loandetails.meeting">
                                <td>{{'label.heading.repayments' | translate}}</td>
                                <td><span class="padded-td">{{loandetails.numberOfRepayments}} &nbsp; {{loandetails.meeting.humanReadable}}</span>
                                </td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.amortization' | translate}}</td>
                                <td><span class="padded-td">{{loandetails.amortizationType.value}}</span></td>
                            </tr>
                            <tr ng-show="!loandetails.isLoanProductLinkedToFloatingRate">
                                <td>{{'label.heading.interestrate' | translate}}</td>
                                <td><span class="padded-td">{{loandetails.annualInterestRate}} per annum ({{loandetails.interestRatePerPeriod}}%&nbsp; {{loandetails.interestRateFrequencyType.value}}) - {{loandetails.interestType.value}}({{'label.heading.apr' | translate}})</span>
                                </td>
                            </tr>
                            <tr ng-show="loandetails.flatInterestRate != null">
                                <td>{{'label.heading.flatinterestrate' | translate}}</td>
                                <td><span class="padded-td">{{loandetails.flatInterestRate}}%&nbsp; {{loandetails.interestRateFrequencyType.value}}</span>
                                </td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.graceonprincipalpayment' |
                                    translate}}
                                </td>
                                <td><span class="padded-td">{{loandetails.graceOnPrincipalPayment}}</span></td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.graceoninterestpayment' |
                                    translate}}
                                </td>
                                <td><span class="padded-td">{{loandetails.graceOnInterestPayment}}</span></td>
                            </tr >
                            <tr ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.recurringMoratoriumOnPrincipalPeriods">
                                <td>{{'label.heading.recurringmoratoriumonprincipalperiods' |
                                    translate}}
                                </td>
                                <td><span class="padded-td">{{loandetails.recurringMoratoriumOnPrincipalPeriods}}</span></td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.graceOnArrearsAgeing' |
                                    translate}}
                                </td>
                                <td><span class="padded-td">{{loandetails.graceOnArrearsAgeing}}</span></td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.fundsource' | translate}}</td>
                                <td><span class="padded-td">{{loandetails.fundName}}</span></td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.interestfreeperiod' |
                                    translate}}
                                </td>
                                <td><span class="padded-td">{{loandetails.graceOnInterestCharged}}</span></td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.interestcalculationperiod' |
                                    translate}}
                                </td>
                                <td><span class="padded-td">{{loandetails.interestCalculationPeriodType.value}}</span></td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.allowpartialperiodinterestcalcualtion' |
                                    translate}}
                                </td>
                                <td><span class="padded-td">{{loandetails.allowPartialPeriodInterestCalcualtion}}</span></td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.brokenperiodmethodtype' | translate}}</td>
                                <td><span class="padded-td">{{loandetails.brokenPeriodMethodType.value}}</span></td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.interesttype' | translate}}</td>
                                <td><span class="padded-td">{{loandetails.interestType.value}}</span></td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.submittedondate' | translate}}
                                </td>
                                <td><span class="padded-td">{{loandetails.timeline.submittedOnDate | DateFormat }}</span></td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.approvedondate' | translate}}
                                </td>
                                <td><span class="padded-td">{{loandetails.timeline.approvedOnDate | DateFormat}}</span></td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.disbursedondate' | translate}}
                                </td>
                                <td><span class="padded-td">{{loandetails.timeline.actualDisbursementDate | DateFormat}}</span></td>
                            </tr>
                            <tr>
                                <td>{{'label.heading.matureson' | translate}}</td>
                                <td><span class="padded-td">{{loandetails.timeline.expectedMaturityDate | DateFormat}}</span></td>
                            </tr>
                            <tr data-ng-show="loandetails.canDefineInstallmentAmount">
                                <td>{{'label.input.fixedemiamount' | translate}}</td>
                                <td><span class="padded-td">{{loandetails.fixedEmiAmount| number}}</span></td>
                            </tr>
                            <tr data-ng-show="loandetails.isTopup">
                                <td>{{'label.input.isTopup' | translate}}</td>
                                <td><span class="padded-td">{{loandetails.isTopup}}</span></td>
                            </tr>
                            <tr>
                                <td>{{ 'label.input.recalculateinterest' | translate }}</td>
                                <td><span class="padded-td">{{ loandetails.isInterestRecalculationEnabled | YesOrNo }}</span></td>
                            </tr>
                            <tr>
                                <td>{{ 'label.input.daysinyears' | translate }}</td>
                                <td><span class="padded-td">{{ loandetails.daysInYearType.value}}</span></td>
                            </tr>
                            <tr>
                                <td>{{ 'label.input.daysinmonth' | translate }}</td>
                                <td><span class="padded-td">{{ loandetails.daysInMonthType.value }}</span></td>
                            </tr>
                            <tr>
                                <td>{{'label.input.weeksinyears' | translate}}</td>
                                <td><span class="padded-td">{{loandetails.weeksInYearType.value}}</span></td>
                            </tr>
                            <tr ng-show="loandetails.expectedDisbursalPaymentType.name">
                                <td>{{'label.heading.preferredpaymentchannelfordisbursements' |
                                    translate}}
                                </td>
                                <td><span class="padded-td"  ng-show="loandetails.expectedDisbursalPaymentType">{{loandetails.expectedDisbursalPaymentType.name}}</span></td>
                            </tr>
                            <tr ng-show="loandetails.expectedRepaymentPaymentType.name">
                                <td>{{'label.heading.preferredpaymentchannelforrepayments' |
                                    translate}}
                                </td>
                                <td><span class="padded-td"  ng-show="loandetails.expectedRepaymentPaymentType">{{loandetails.expectedRepaymentPaymentType.name}}</span></td>
                            </tr>
                            <tr data-ng-show="loandetails.isInterestRecalculationEnabled">
                                <td>{{ 'label.input.issubsidyapplicable' | translate }}</td>
                                <td><span class="padded-td">{{ loandetails.interestRecalculationData.isSubsidyApplicable }}</span></td>
                            </tr>
                            <tr data-ng-show="loandetails.isInterestRecalculationEnabled">
                                <td>{{ 'label.input.interest.recalculation.compounding.method' | translate }}</td>
                                <td><span class="padded-td">{{ loandetails.interestRecalculationData.interestRecalculationCompoundingType.value}}</span></td>
                            </tr>
                            <tr data-ng-show="loandetails.isInterestRecalculationEnabled">
                                <td>{{ 'label.input.interest.recalculation.reschdule.strategy' | translate }}</td>
                                <td><span class="padded-td">{{ loandetails.interestRecalculationData.rescheduleStrategyType.value}}</span></td>
                            </tr>
                            <tr data-ng-show="loandetails.isInterestRecalculationEnabled">
                                <td>{{ 'label.input.frequency.for.recalculte.outstanding.principal' | translate }}</td>
                                <td><span class="padded-td">{{ loandetails.interestRecalculationData.calendarData.humanReadable}}</span></td>
                            </tr>
                            <tr data-ng-show="loandetails.isInterestRecalculationEnabled && loandetails.interestRecalculationData.interestRecalculationCompoundingType.id !=0">
                                <td>{{ 'label.input.frequency.for.compounding' | translate }}</td>
                                <td><span class="padded-td">{{ loandetails.interestRecalculationData.compoundingCalendarData.humanReadable}}</span></td>
                            </tr>
                            <tr data-ng-show="loandetails.isVariableInstallmentsAllowed">
                                <td>{{ 'label.input.variable.installments.allowed' | translate }}</td>
                                <td><span class="padded-td">{{loandetails.isVariableInstallmentsAllowed}}</span></td>
                            </tr>

                            <tr data-ng-show="loandetails.isVariableInstallmentsAllowed">
                                <td>{{'label.input.variable.installments.gap' | translate}}</td>
                                <td colspan="3">(Min:{{loandetails.minimumGap}}&nbsp;{{'label.input.days' | translate }} &nbsp;, Max:{{loandetails.maximumGap}}&nbsp;{{'label.input.days' | translate }})
                                </td>

                            <tr data-ng-show="loandetails.isInterestRecalculationEnabled && loandetails.interestRecalculationData.interestRecalculationCompoundingType.id !=0">
                                <td>{{ 'label.input.compounding.posted.as.interest' | translate }}</td>
                                <td><span class="padded-td">{{ loandetails.interestRecalculationData.isCompoundingToBePostedAsTransaction | YesOrNo }}</span></td>
                            </tr>
                            <tr ng-show="isWriteOff">
                                <td>{{ 'label.input.writeoffreason' | translate }}</td>
                                <td><span class="padded-td">{{ loandetails.summary.writeoffReason}}</span></td>
                            </tr>
                            </tbody>
                        </table>
                    </tab>
                    <tab heading="{{'label.heading.summary' | translate}}"  active="tabs[1].active" ng-show="loandetails.summary">
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <th class="empty"></th>
                                <th>{{'label.heading.original' | translate}}</th>
                                <th>{{'label.heading.paid' | translate}}</th>
                                <th>{{'label.heading.waived' | translate}}</th>
                                <th>{{'label.heading.writtenoff' | translate}}</th>
                                <th>{{'label.heading.outstanding' | translate}}</th>
                                <th>{{'label.heading.overdue' | translate}}</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <th>{{'label.heading.principal' | translate}}</th>
                                <td>{{loandetails.summary.principalDisbursed | number}}</td>
                                <td>{{loandetails.summary.principalPaid | number}}</td>
                                <td>&nbsp;</td>
                                <td>{{loandetails.summary.principalWrittenOff | number}}</td>
                                <td>{{loandetails.summary.principalOutstanding | number}}</td>
                                <td>{{loandetails.summary.principalOverdue | number}}</td>
                            </tr>
                            <tr>
                                <th>{{'label.heading.interest' | translate}}</th>
                                <td>{{loandetails.summary.interestCharged | number}}</td>
                                <td>{{loandetails.summary.interestPaid | number}}</td>
                                <td>{{loandetails.summary.interestWaived | number}}</td>
                                <td>{{loandetails.summary.interestWrittenOff | number}}</td>
                                <td>{{loandetails.summary.interestOutstanding | number}}</td>
                                <td>{{loandetails.summary.interestOverdue | number}}</td>
                            </tr>
                            <tr>
                                <th>{{'label.heading.fees' | translate}}</th>
                                <td>{{loandetails.summary.feeChargesCharged | number}}</td>
                                <td>{{loandetails.summary.feeChargesPaid | number}}</td>
                                <td>{{loandetails.summary.feeChargesWaived | number}}</td>
                                <td>{{loandetails.summary.feeChargesWrittenOff | number}}</td>
                                <td>{{loandetails.summary.feeChargesOutstanding | number}}</td>
                                <td>{{loandetails.summary.feeChargesOverdue | number}}</td>
                            </tr>

                            <tr>
                                <th>{{'label.heading.penalties' | translate}}</th>
                                <td>{{loandetails.summary.penaltyChargesCharged | number}}</td>
                                <td>{{loandetails.summary.penaltyChargesPaid | number}}</td>
                                <td>{{loandetails.summary.penaltyChargesWaived | number}}</td>
                                <td>{{loandetails.summary.penaltyChargesWrittenOff | number}}</td>
                                <td>{{loandetails.summary.penaltyChargesOutstanding | number}}</td>
                                <td>{{loandetails.summary.penaltyChargesOverdue | number}}</td>
                            </tr>
                             <tr ng-show="isOverPaidLoan">
                                <th>{{'label.heading.overpaid' | translate}}</th>
                                <td>&nbsp;</td>
                                <td>{{loandetails.totalOverpaid| number}}</td>
                                <td>&nbsp;</td>
                                <td>&nbsp;</td>
                                <td>&nbsp;</td>
                                <td>&nbsp;</td>
                            </tr>
                            </tbody>
                            <tfoot>
                            <tr>
                                <th>{{'label.heading.total' | translate}}</th>
                                <th>{{loandetails.summary.totalExpectedRepayment | number}}</th>
                                <th>{{loandetails.summary.totalRepayment | number}}</th>
                                <th>{{loandetails.summary.totalWaived | number}}</th>
                                <th>{{loandetails.summary.totalWrittenOff | number}}</th>
                                <th>{{loandetails.summary.totalOutstanding | number}}</th>
                                <th>{{loandetails.summary.totalOverdue | number}}</th>
                            </tr>
                            </tfoot>
                        </table>
                    </tab>

                    <tab ng-if="showOriginalSchedule" active="tabs[2].active" heading="{{'label.heading.originalschedule' | translate}}"  select="getSpecificData('repaymentSchedule')">

                        <table  class="table table-striped .width100">
                            <colgroup span="4"></colgroup>
                            <thead>
                            <tr>
                                <th colspan="1" scope="colgroup"></th>
                                <th colspan="2" scope="colgroup">{{'label.heading.loanamountandbalance' | translate}}</th>
                                <th colspan="3" scope="colgroup">{{'label.heading.totalcostofloan' | translate}}</th>
                                <th colspan="1" scope="colgroup">{{'label.heading.installmenttotals' | translate}}</th>
                            </tr>
                            <tr>
                                <th scope="col">{{'label.heading.date' | translate}}</th>

                                <th scope="col">{{'label.heading.principaldue' | translate}}</th>
                                <th scope="col">{{'label.heading.balanceofloan' | translate}}</th>

                                <th scope="col">{{'label.heading.interest' | translate}}</th>
                                <th scope="col">{{'label.heading.fees' | translate}}</th>
                                <th scope="col">{{'label.heading.penalties' | translate}}</th>

                                <th scope="col">{{'label.heading.outstanding' | translate}}</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="period in loandetails.originalSchedule.periods" ng-hide="period.recalculatedInterestComponent">
                                <td>{{period.dueDate | DateFormat}}</td>

                                <td>{{period.principalDue | number}}</td>
                                <td>{{period.principalLoanBalanceOutstanding | number}}</td>
                                <td>{{period.interestOriginalDue | number}}</td>
                                <td>{{period.feeChargesDue | number}}</td>
                                <td>{{period.penaltyChargesDue | number}}</td>
                                <td>{{period.totalOutstandingForPeriod | number}}</td>
                            </tr>
                            </tbody>
                            <tfoot class="ui-widget-header">
                            <tr>
                                <th >{{'label.heading.total' | translate}}</th>
                                <th>{{loandetails.originalSchedule.totalPrincipalExpected | number}}</th>
                                <th>&nbsp;</th>
                                <th>{{loandetails.originalSchedule.totalInterestCharged | number}}</th>
                                <th>{{loandetails.originalSchedule.totalFeeChargesCharged | number}}</th>
                                <th>{{loandetails.originalSchedule.totalPenaltyChargesCharged | number}}</th>
                                <th>{{loandetails.originalSchedule.totalRepaymentExpected | number}}</th>
                            </tr>
                            </tfoot>
                        </table>

                    </tab>

                    <tab active="tabs[3].active" heading="{{'label.heading.repaymentschedule' | translate}}" select="getSpecificData('repaymentSchedule')">
                        <button class="btn btn-primary pull-right" ng-show="checkStatus() && response.uiDisplayConfigurations.viewLoanAccountDetails.isHiddenFeild.viewReportButton"
                                ng-click="viewRepaymentDetails()">{{'label.button.viewReport' | translate}}</button>

                        <table class="table table-striped .width100">
                            <colgroup span="4"></colgroup>
                            <thead>
                            <tr>
                                <th colspan="5" scope="colgroup"></th>
                                <th colspan="2" scope="colgroup">{{'label.heading.loanamountandbalance' | translate}}</th>
                                <th colspan="3" scope="colgroup">{{'label.heading.totalcostofloan' | translate}}</th>
                                <th colspan="6" scope="colgroup">{{'label.heading.installmenttotals' | translate}}</th>
                            </tr>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">{{'label.heading.days' | translate}}</th>
                                <th scope="col">{{'label.heading.date' | translate}}</th>
                                <th scope="col">{{'label.heading.paiddate' | translate}}</th>
                                <th scope="col">&nbsp;</th>

                                <th scope="col">{{'label.heading.principaldue' | translate}}</th>
                                <th scope="col">{{'label.heading.balanceofloan' | translate}}</th>

                                <th scope="col">{{'label.heading.interest' | translate}}</th>
                                <th scope="col">{{'label.heading.fees' | translate}}</th>
                                <th scope="col">{{'label.heading.penalties' | translate}}</th>

                                <th scope="col">{{'label.heading.due' | translate}}</th>
                                <th scope="col">{{'label.heading.paid' | translate}}</th>
                                <th scope="col">{{'label.heading.inadvance' | translate}}</th>
                                <th scope="col">{{'label.heading.late' | translate}}</th>
                                <th scope="col" data-ng-show="isWaived">{{'label.heading.waived' | translate}}</th>
                                <th scope="col">{{'label.heading.outstanding' | translate}}</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="period in loandetails.repaymentSchedule.periods">
                                <td scope="row">{{period.period}}</td>
                                <td>{{period.daysInPeriod}}</td>
                                <td>{{period.dueDate | DateFormat}}</td>
                                <td>{{period.obligationsMetOnDate | DateFormat}}</td>
                                <td>
                                    <div ng-show="period.obligationsMetOnDate"><i class="icon-check icon-white"></i></div>
                                </td>

                                <td>{{period.principalDue | number}}</td>
                                <td>{{period.principalLoanBalanceOutstanding | number}}</td>
                                <td>{{period.interestOriginalDue | number}}</td>
                                <td>{{period.feeChargesDue | number}}</td>
                                <td>{{period.penaltyChargesDue | number}}</td>

                                <td>{{period.totalDueForPeriod-period.advancePaymentAmount | number}}</td>
                                <td>{{period.totalPaidForPeriod | number}}</td>
                                <td data-ng-hide="loandetails.isInterestRecalculationEnabled">{{period.totalPaidInAdvanceForPeriod | number}}</td>
                                <td data-ng-show="loandetails.isInterestRecalculationEnabled">{{period.advancePaymentAmount | number}}</td>
                                <td>{{period.totalPaidLateForPeriod | number}}</td>
                                <td data-ng-show="isWaived">{{period.totalWaivedForPeriod | number}}</td>
                                <td>{{period.totalOutstandingForPeriod | number}}</td>
                            </tr>
                            </tbody>
                            <tfoot class="ui-widget-header">
                            <tr>
                                <th>&nbsp;</th>
                                <th>{{loandetails.repaymentSchedule.loanTermInDays}}</th>
                                <th colspan="3">{{'label.heading.total' | translate}}</th>

                                <th>{{loandetails.repaymentSchedule.totalPrincipalExpected | number}}</th>
                                <th>&nbsp;</th>
                                <th>{{loandetails.repaymentSchedule.totalInterestCharged | number}}</th>
                                <th>{{loandetails.repaymentSchedule.totalFeeChargesCharged | number}}</th>
                                <th>{{loandetails.repaymentSchedule.totalPenaltyChargesCharged | number}}</th>

                                <th>{{loandetails.repaymentSchedule.totalRepaymentExpected-loandetails.repaymentSchedule.totalAdvancePayment  | number}}</th>
                                <th>{{loandetails.repaymentSchedule.totalRepayment | number}}</th>
                                <th  data-ng-hide="loandetails.isInterestRecalculationEnabled">{{loandetails.repaymentSchedule.totalPaidInAdvance | number}}</th>
                                <th  data-ng-show="loandetails.isInterestRecalculationEnabled">{{loandetails.repaymentSchedule.totalAdvancePayment | number}}</th>
                                <th>{{loandetails.repaymentSchedule.totalPaidLate | number}}</th>
                                <th data-ng-show="isWaived">{{loandetails.repaymentSchedule.totalWaived | number}}</th>
                                <th>{{loandetails.repaymentSchedule.totalOutstanding | number}}</th>
                            </tr>
                            </tfoot>
                        </table>

                    </tab>

                    <tab ng-if="showFutureSchedule" active="tabs[4].active" heading="{{'label.heading.futureschedule' | translate}}" select="getSpecificData('futureSchedule')">

                        <table class="table table-striped .width100" ng-show="futurePeriods">
                            <colgroup span="4"></colgroup>
                            <thead>
                            <tr>
                                <th colspan="1" scope="colgroup"></th>
                                <th colspan="2" scope="colgroup">{{'label.heading.loanamountandbalance' | translate}}</th>
                                <th colspan="3" scope="colgroup">{{'label.heading.totalcostofloan' | translate}}</th>
                                <th colspan="1" scope="colgroup">{{'label.heading.installmenttotals' | translate}}</th>
                            </tr>
                            <tr>
                                <th scope="col">{{'label.heading.date' | translate}}</th>

                                <th scope="col">{{'label.heading.principaldue' | translate}}</th>
                                <th scope="col">{{'label.heading.balanceofloan' | translate}}</th>

                                <th scope="col">{{'label.heading.interest' | translate}}</th>
                                <th scope="col">{{'label.heading.fees' | translate}}</th>
                                <th scope="col">{{'label.heading.penalties' | translate}}</th>

                                <th scope="col">{{'label.heading.outstanding' | translate}}</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="period in futurePeriods">
                                <td>{{period.dueDate | DateFormat}}</td>

                                <td>{{period.principalDue | number}}</td>
                                <td>{{period.principalLoanBalanceOutstanding | number}}</td>
                                <td>{{period.interestOriginalDue | number}}</td>
                                <td>{{period.feeChargesDue | number}}</td>
                                <td>{{period.penaltyChargesDue | number}}</td>

                                <td>{{period.totalOutstandingForPeriod | number}}</td>
                            </tr>
                            </tbody>
                        </table>

                    </tab>

                    <tab  active="tabs[5].active" heading="{{'label.heading.transactions' | translate}}" select="getSpecificData('transactions')">
                        <div  ng-show="loandetails.transactions">
                        <button class="btn btn-primary pull-right" ng-show="checkStatus()" ng-click="export()">{{'label.button.export' | translate}}</button>
                        <button class="btn btn-primary pull-right" ng-show="checkStatus()" ng-click="viewJournalEntries()" style="margin-right: 8px;">{{'label.button.viewjournalentries' | translate}}</button>
                        <div class="pull-right">
                            <input type="checkbox" data-ng-model="hideTransactions.type.accrual">&nbsp;&nbsp;
                            <label class="control-label">{{ 'label.input.hide.accrual.transactions' | translate }}</label>&nbsp;&nbsp;
                        </div>
                        <br>
                        <table class="table">
                            <colgroup span="4"></colgroup>
                            <thead>
                                <tr class="graybg">
                                    <th class="pointer" ng-click="changeTransactionSort('id')">{{'label.heading.id' | translate}}</th>
                                    <th class="pointer" ng-click="changeTransactionSort('officeName')">{{'label.heading.office' | translate}}</th>
                                    <th class="pointer" ng-click="changeTransactionSort('date')">{{'label.heading.transactiondate' | translate}}</th>
                                    <th class="pointer" ng-click="changeTransactionSort('type.value')">{{'label.heading.transactiontype' | translate}}</th>
                                    <th class="pointer" ng-click="changeTransactionSort('amount')">{{'label.heading.amount' | translate}}</th>
                                    <th ng-hide="hideTransactionDetails" class="pointer" colspan="4" scope="colgroup">{{'label.heading.breakdown' | translate}}</th>
                                    <th class="pointer" scope="colgroup">{{'label.heading.loan.balance' | translate}}</th>
                                    <th></th>
                                    <th></th>
                                </tr>
                                <tr>
                                    <th scope="col">&nbsp;</th>
                                    <th scope="col">&nbsp;</th>
                                    <th scope="col">&nbsp;</th>
                                    <th scope="col">&nbsp;</th>
                                    <th scope="col">&nbsp;</th>
                                    <th ng-hide="hideTransactionDetails" class="pointer" scope="col" ng-click="changeTransactionSort('principalPortion')">{{'label.heading.principal' | translate}}</th>
                                    <th ng-hide="hideTransactionDetails" class="pointer" scope="col" ng-click="changeTransactionSort('interestPortion')">{{'label.heading.interest' | translate}}</th>
                                    <th ng-hide="hideTransactionDetails" class="pointer" scope="col" ng-click="changeTransactionSort('feeChargesPortion')">{{'label.heading.fees' | translate}}</th>
                                    <th ng-hide="hideTransactionDetails" class="pointer" scope="col" ng-click="changeTransactionSort('penaltyChargesPortion')">{{'label.heading.penalities' | translate}}</th>
                                    <th ng-show="isOverPaidLoan" class="pointer" scope="col" ng-click="changeTransactionSort('overpaymentPortion')">{{'label.heading.overpaid' | translate}}</th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="pointer-main" ng-class="{strikeoff : transaction.manuallyReversed==true}"
                                    ng-repeat="transaction in loandetails.transactions | filter:hideAccruals:transaction | orderBy:transactionSort.column:transactionSort.descending">
                                    <td class="pointer" data-ng-click="routeTo(loandetails.id,transaction.id,transaction.type.id)">
                                        {{transaction.id}}
                                    </td>
                                    <td class="pointer" data-ng-click="routeTo(loandetails.id,transaction.id,transaction.type.id)">
                                        <span ng-show="isReferenceNumberAsNameEnable && transaction.officeReferenceNumber">
                                                {{transaction.officeName}}&nbsp;-&nbsp;{{ transaction.officeReferenceNumber}}
                                        </span>
                                        <span ng-show="!(isReferenceNumberAsNameEnable && transaction.officeReferenceNumber)">
                                                {{transaction.officeName}}
                                            </span>
                                    </td>
                                    <td class="pointer" data-ng-click="routeTo(loandetails.id,transaction.id,transaction.type.id)">
                                        {{transaction.date | DateFormat}}
                                    </td>
                                    <td class="pointer" data-ng-click="routeTo(loandetails.id,transaction.id,transaction.type.id)">
                                        {{transaction.type.value}}
                                    </td>
                                    <td class="pointer" data-ng-click="routeTo(loandetails.id,transaction.id,transaction.type.id)">
                                        {{transaction.amount | number}}
                                    </td>
                                    <td ng-hide="hideTransactionDetails" class="pointer" data-ng-click="routeTo(loandetails.id,transaction.id,transaction.type.id)">
                                        {{transaction.principalPortion | number}}
                                    </td>
                                    <td ng-hide="hideTransactionDetails" class="pointer" data-ng-click="routeTo(loandetails.id,transaction.id,transaction.type.id)">
                                        {{transaction.interestPortion | number}}
                                    </td>
                                    <td ng-hide="hideTransactionDetails" class="pointer" data-ng-click="routeTo(loandetails.id,transaction.id,transaction.type.id)">
                                        {{transaction.feeChargesPortion | number}}
                                    </td>
                                    <td ng-hide="hideTransactionDetails" class="pointer" data-ng-click="routeTo(loandetails.id,transaction.id,transaction.type.id)">
                                        {{transaction.penaltyChargesPortion | number}}
                                    </td>
                                    <td ng-show="isOverPaidLoan" class="pointer" data-ng-click="routeTo(loandetails.id,transaction.id,transaction.type.id)">
                                        {{transaction.overpaymentPortion | number}}
                                    </td>
                                    <td class="pointer" data-ng-click="routeTo(loandetails.id,transaction.id,transaction.type.id)">
                                        {{transaction.outstandingLoanBalance | number}}
                                    </td>

                                    <td> <a tooltip="{{'label.heading.viewreceipts' | translate }}" ng-if="transaction.manuallyReversed!=true" ng-click="viewloantransactionreceipts(transaction.id)">
                                        <i class="icon-file-text icon-large"></i>
                                    </a>
                                    </td>
									 <td ng-if="!isBatchAccountingEnabled" ng-click="viewloantransactionjournalentries(transaction.id)" class="pointer" ><a tooltip="{{'label.anchor.viewjournalentries' | translate}}">
                                        <i class="icon-circle-arrow-right icon-large coll"></i>
                                    </a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div>
                            <button ng-show="printbtn" ng-click="printReport()" class="btn btn-primary"><i class="icon-print icon-white">{{'label.button.print' |
                                translate}}
                            </i></button>
                            <div id="printreceiptcontent">
                                <iframe id="rptLoadingreceiptFrame" ng-show="viewReport" ng-src="{{viewReportDetails}}" frameborder="0" width="100%" height="800px"></iframe>
                            </div>
                        </div>
                       </div>
                    </tab>
                    <tab ng-show="transferDetails"  has-permission='READ_BANK_TRANSACTION' heading="{{'label.heading.banktransfer' | translate}}">
                        <table class="table width100">
                            <tr class="graybg">
                                <th >{{'label.heading.transferid' | translate}}</th>
                                <th >{{'label.heading.createdon' | translate}}</th>
                                <th >{{'label.heading.transfertype' | translate}}</th>
                                <th >{{'label.heading.amount' | translate}}</th>
                                <th>{{'label.heading.status' | translate}}</th>
                                <th >{{'label.input.actions' | translate}}</th>
                                <th >{{'label.input.view.closed.transactions' | translate}}<input type="checkbox" ng-model="viewClosedTransactions" ng-change="selectClosedTransactions(viewClosedTransactions)" style="margin-left: 10px">
                                </th>
                            </tr>

                            <tr ng-repeat="transferData in transferDetails">
                                <td class="btn btn-link" data-ng-click="viewTransferDetails(transferData)">{{transferData.transactionId}}</td>
                                <td class="pointer" data-ng-click="viewTransferDetails(transferData)">{{transferData.createdDate | DateFormat}} </td>
                                <td class="pointer" data-ng-click="viewTransferDetails(transferData)">{{transferData.transferType.value}}</td>
                                <td class="pointer" data-ng-click="viewTransferDetails(transferData)">{{transferData.amount}}</td>
                                <td class="pointer">{{transferData.status.value}}</td>
                                <td>
                                    <div class="btn-group">
                                        <button class="btn btn-info" type="button" ng-click="retryTransfer(transferData)" ng-if="(transferData.status.id == failedTransaction) && showRetryBankTransaction"
                                            has-permission="RETRY_BANK_TRANSACTION">{{'label.button.retry' | translate}}</button>
                                        <button class="btn btn-danger" type="button" ng-click="reject(transferData)" ng-if="showRejectButton(transferData)"
                                            has-permission="REJECT_BANK_TRANSACTION">{{'label.button.reject' | translate}}</button>
                                        <button class="btn btn-danger" type="button" ng-click="forceReject(transferData)" ng-if="transferData.status.id == initiatedTransaction || transferData.status.id == pendingTransaction"
                                            has-permission="FORCE_REJECT_BANK_TRANSACTION">{{'label.button.force.reject' | translate}}</button>
                                        <button class="btn btn-danger" type="button" ng-click="closeBankTransfer(transferData)" ng-if="transferData.status.id == successTransaction"
                                            has-permission="CLOSE_BANK_TRANSACTION">{{'label.button.close' | translate}}</button>
                                    </div>
                                </td>
                                <td class="pointer" data-ng-click="viewTransferDetails(transferData)"></td>
                            </tr>
                        </table>
                    </tab>
                    <tab has-permission='READ_BANK_TRANSACTION' heading="{{'label.heading.loanbankaccountassociation' | translate}}" select="fetchBankDetailAssociation()">
                        <div class="pull-right">
                              <a has-permission='CREATE_ASSIGNBANKACCOUNTDETAIL' ng-hide="loanBankAccountDetailAssociation" href="#/client/{{loandetails.clientId}}/bankaccountdetails/loan/{{loandetails.id}}" ng-show="createPossible" class="btn btn-primary">{{'label.button.add.bankaccount' | translate}} </a>
                        </div>
                        <table class="table width100">
                            <tr class="graybg">
                                <th>{{'label.heading.holdername' | translate}}</th>
                                <th>{{'label.heading.accountnumber' | translate}}</th>
                                <th>{{'label.heading.ifsc' | translate}}</th>
                                <th >{{'label.input.actions' | translate}}</th>
                            </tr>
                            <tr ng-repeat="bankAccountDetail in loanBankAccountDetailAssociation" >
                                <td >{{bankAccountDetail.name}}</td>
                                <td >{{bankAccountDetail.accountNumber}}</td>
                                <td >{{bankAccountDetail.ifscCode}}</td>
                                <td >
                                  <button  has-permission='DELETE_ASSIGNBANKACCOUNTDETAIL' class="btn btn-info" type="button" ng-click="removeLoanBankAccountAssociation(bankAccountDetail.id)">{{'label.button.removebankaccount' | translate}}
                                  </button>
                              </td>
                            </tr>
                        </table>
                    </tab>

                    <tab ng-if="loandetails.collateral" active="tabs[6].active" heading="{{'label.heading.loancollaterals' | translate}}" select="getSpecificData('collateral')">
                        <table class="table" ng-show="loandetails.collateral">
                            <thead>
                            <th>{{'label.heading.type' | translate}}</th>
                            <th>{{'label.heading.value' | translate}}</th>
                            <th>{{'label.heading.description' | translate}}</th>
                            </thead>
                            <tbody>
                            <tr ng-repeat="collateral in loandetails.collateral" class="pointer-main">
                                <td class="pointer" data-ng-click="viewLoanCollateral(collateral.id)">{{collateral.type.name}}</td>
                                <td class="pointer" data-ng-click="viewLoanCollateral(collateral.id)">{{collateral.value | number}}</td>
                                <td class="pointer" data-ng-click="viewLoanCollateral(collateral.id)">{{collateral.description}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </tab>

                    <tab ng-show="loandetails.isTopup" heading="{{'label.heading.loantopupdetails' | translate}}" ng-click="getLoanTopDetails()">
                                  <br/>
                                <table class="table  table-striped well">
                                    <thead>
                                      <tr  class="graybg">
                                          <th>{{'label.heading.loanIdToClose' | translate}}</th>
                                          <th>{{'label.heading.topupAmount' | translate}}</th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <tr ng-class="($index%2!=0)?'graybg':''" ng-repeat="loanTopupDetail in loanTopupDetails">
                                          <td>
                                            <span class="padded-td">
                                              <a href="#/viewloanaccount/{{loanTopupDetail.closureLoanId}}">{{loanTopupDetail.closureLoanAccountNo}}</a>
                                            </span>
                                          </td>
                                          <td>{{loanTopupDetail.topupAmount| number}}</td>
                                      </tr>
                                  </tbody>
                                </table>

                    </tab>

                    <tab active="isGlimTabActive" heading="{{'label.heading.groupClientsDetails' | translate}}" ng-show="glimClientsDetails.length>0">

                            <table class="table table-striped" ng-repeat="client in glimClientsDetails" class="pointer-main" ng-show="client.isClientSelected">
                                <thead>
                                <tr>
                                <tr><td>{{client.clientName}} : {{client.clientId}}</td></tr>
                                    <th class="empty"></th>
                                    <th>{{'label.heading.original' | translate}}</th>
                                    <th>{{'label.heading.paid' | translate}}</th>
                                    <th>{{'label.heading.waived' | translate}}</th>
                                    <th>{{'label.heading.writtenoff' | translate}}</th>
                                    <th ng-show="!isGlimPaymentAsGroup">{{'label.heading.outstanding' | translate}}</th>
                                    <th><button ng-click="routeToRepaymentSchedule(client.id, client.disbursedAmount, client.clientId, client.clientName)" class="btn btn-primary ng-binding pull-right">{{'label.heading.viewrepaymentschedule' | translate}} </button></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th>{{'label.heading.principal' | translate}}</th>
                                    <td>{{client.disbursedAmount | number}}</td>
                                    <td>{{client.paidPrincipalAmount | number}}</td>
                                    <td>&nbsp;</td>
                                    <td>{{client.principalWrittenOffAmount | number}}</td>
                                    <td ng-show="!isGlimPaymentAsGroup">{{client.totalPrincipalOutstanding | number}}</td>
                                </tr>
                                <tr>
                                    <th>{{'label.heading.interest' | translate}}</th>
                                    <td>{{client.interestAmount | number}}</td>
                                    <td>{{client.paidInterestAmount | number}}</td>
                                    <td>{{client.waivedInterestAmount | number}}</td>
                                    <td>{{client.interestWrittenOffAmount | number}}</td>
                                    <td ng-show="!isGlimPaymentAsGroup">{{client.totalInterestOutstanding}}</td>
                                </tr>
                                <tr>
                                    <th>{{'label.heading.fees' | translate}}</th>
                                    <td>{{client.chargeAmount | number}}</td>
                                    <td>{{client.paidChargeAmount | number}}</td>
                                    <td>{{client.waivedChargeAmount | number}}</td>
                                    <td>{{client.chargeWrittenOffAmount | number}}</td>
                                    <td ng-show="!isGlimPaymentAsGroup">{{client.totalFeeChargeOutstanding}}</td>
                                </tr>

                                <tr>
                                    <th>{{'label.heading.penalties' | translate}}</th>
                                    <td>{{client.penaltyAmount | number}}</td>
                                    <td>{{client.paidpenaltyAmount | number}}</td>
                                    <td>{{client.waivedpenaltyAmount | number}}</td>
                                    <td>{{client.penaltyWrittenOffAmount | number}}</td>
                                    <td ng-show="!isGlimPaymentAsGroup">{{client.totalpenaltyChargeOutstanding}}</td>
                                </tr>
                                </tbody>
                                <tfoot>
                                <tr>
                                    <th>{{'label.heading.total' | translate}}</th>
                                    <th>{{getTotalAmount(client.disbursedAmount, client.interestAmount, client.chargeAmount, client.penaltyAmount)}}</th>
                                    <th>{{getTotalAmount(client.paidPrincipalAmount, client.paidInterestAmount, client.paidChargeAmount, client.paidpenaltyAmount)}}</th>
                                    <th>{{getTotalAmount(0, client.waivedInterestAmount, client.waivedChargeAmount, client.waivedpenaltyAmount)}}</th>
                                    <th>{{getTotalAmount(client.principalWrittenOffAmount, client.interestWrittenOffAmount, client.chargeWrittenOffAmount, client.penaltyWrittenOffAmount)}}</th>
                                    <th ng-show="!isGlimPaymentAsGroup">{{getTotalAmount(client.totalPrincipalOutstanding, client.totalInterestOutstanding, client.totalFeeChargeOutstanding, client.totalpenaltyChargeOutstanding) | number}}</th>
                                </tr>
                                </tfoot>
                            </table>
                    </tab>

                    <tab ng-if="loandetails.multiDisburseLoan" active="tabs[7].active" heading="{{'label.heading.tranchedetails' | translate}}" select="getSpecificData('multiDisburseDetails')">
                        <div ng-show="loandetails.multiDisburseLoan">
                        <table class="width100">

                            <tr>
                                <td>
                                    {{'label.input.outstandingloanbalance' | translate}} : &nbsp;{{loandetails.maxOutstandingLoanBalance| number}}&nbsp;
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <b>{{'label.heading.tranchedetails' | translate}}</b>
                                </td>
                                <td align="right">
                                <a type="button" ng-show="showAddDeleteTrancheButtons('adddisbursedetails')" class="btn btn-primary" align="right"
                                   href="#/loandisbursedetail/{{loandetails.id}}/adddisbursedetails">
                                    <i class="icon-plus"></i>{{ 'label.button.add' | translate }}
                                </a>
                                    <a type="button" ng-show="showAddDeleteTrancheButtons('deletedisbursedetails')" class="btn btn-danger" align="right"
                                       href="#/loandisbursedetail/{{loandetails.id}}/deletedisbursedetails">
                                        <i class="icon-trash"></i>{{ 'label.button.delete' | translate }}
                                    </a>
                                </td>
                            </tr>
                        </table>
                        <table class="width100">
                            <tr class="graybg" ng-show="loandetails.disbursementDetails.length>0">
                                <th align="left">{{'label.input.expecteddisbursementon' | translate}}</th>
                                <th align="left">{{'label.input.disbursedon' | translate}}</th>
                                <th align="left">{{'label.input.principal' | translate}}</th>
                                <th align="left" data-ng-show="loandetails.flatInterestRate != null">{{'label.input.discountondisbursalamount' | translate}}</th>
                                <th align="left">&nbsp;</th>
                            </tr>
                            <tr ng-repeat="disbursementDetail in loandetails.disbursementDetails">
                                <td>{{disbursementDetail.expectedDisbursementDate | DateFormat}}</td>
                                <td>{{disbursementDetail.actualDisbursementDate | DateFormat}}</td>
                                <td>{{disbursementDetail.principal | number}}</td>
                                <td data-ng-show="loandetails.flatInterestRate != null">{{disbursementDetail.discountOnDisbursalAmount | number}}</td>
                                <td>
                                    <div ng-show="disbursementDetail.actualDisbursementDate != null"><i class="icon-check icon-white"></i>
                                    </div>
                                    <a title="{{'label.edit' | translate}}"
                                       data-ng-show="showEdit(disbursementDetail)"
                                       href="#/loandisbursedetail/{{loandetails.id}}/editdisbursedate/{{disbursementDetail.id}}"><i
                                            class="icon-pencil icon-white"></i></a>
                                </td>
                            </tr>
                        </table>

                        <table class="width100">
                            <tr>
                                <td>
                                    {{'label.input.fixedemiamountvariations' | translate}} : &nbsp;&nbsp;
                                </td>
                            </tr>
                        </table>
                        <table class="width100 table">
                            <tr class="graybg" ng-show="loandetails.emiAmountVariations.length>0">
                                <th align="left">{{'label.input.emiamoutvariationfrom' | translate}}</th>
                                <th align="left">{{'label.input.fixedemiamount' | translate}}</th>
                            </tr>
                            <tr ng-repeat="emiVariations in loandetails.emiAmountVariations">
                                <td>{{emiVariations.termVariationApplicableFrom | DateFormat}}</td>
                                <td>{{emiVariations.decimalValue}}</td>
                            </tr>
                        </table>
                      </div>
                    </tab>

                    <tab ng-show="loandetails.overdueCharges.length>0" heading="{{'label.heading.overduepenalitycharge' | translate}}">
                        <table class="table width100">
                            <tr class="graybg">
                                <th>{{'label.heading.name' | translate}}</th>
                                <th>{{'label.heading.type' | translate}}</th>
                                <th>{{'label.heading.amount' | translate}}</th>
                                <th>{{'label.heading.collectedon' | translate}}</th>
                            </tr>
                            <tr ng-repeat="charge in loandetails.overdueCharges">
                                <td>{{charge.chargeData.name}},{{charge.chargeData.currency.displaySymbol}}</td>
                                <td>{{charge.chargeData.chargeCalculationType.value}}</td>
                                <td>{{charge.chargeData.amount | number}}</td>
                                <td>{{charge.chargeData.chargeTimeType.value}}</td>
                            </tr>
                        </table>
                    </tab>

                    <tab active="tabs[9].active" heading="{{'label.heading.floatinginterestrates' | translate}}" ng-show="loandetails.isLoanProductLinkedToFloatingRate" select="getSpecificData('interestRatesPeriods')">
                        <table class="table width100">
                            <tr class="graybg">
                                <th>{{'label.heading.fromdate' | translate}}</th>
                                <th>{{'label.heading.interestrate' | translate}}</th>
                            </tr>
                            <tr ng-repeat="period in loandetails.interestRatesPeriods">
                                <td>{{period.fromDate}}</td>
                                <td>{{period.effectiveInterestRate}}</td>
                            </tr>
                        </table>
                    </tab>


                    <tab active="tabs[10].active" heading="{{'label.heading.charges' | translate}}" select="getSpecificData('charges')">
                        <div ng-show="chargeTableShow">
                        <table class="table width100">
                            <tr class="graybg">
                                <th ng-hide="isGlimEnabled()"><input type="checkbox" ng-change="selectAllCharges()" data-ng-model="charges.selectallcharges"</th>
                                <th>{{'label.heading.name' | translate}}</th>
                                <th>{{'label.heading.feeorpenalty' | translate}}</th>
                                <th>{{'label.heading.paymentdueat' | translate}}</th>
                                <th>{{'label.heading.dueasof' | translate}}</th>
                                <th>{{'label.heading.calculationtype' | translate}}</th>
                                <th>{{'label.heading.duetax' | translate}}</th>
                                <th>{{'label.heading.paid' | translate}}</th>
                                <th>{{'label.heading.waived' | translate}}</th>
                                <th>{{'label.heading.outstanding' | translate}}</th>
                                <th ng-hide="isGlimEnabled()">{{'label.heading.actions' | translate}}</th>
                                <th>{{'label.heading.info' | translate}}</th>
                            </tr>
                            <tr ng-repeat="charge in charges" class="pointer-main">
                                <th  ng-hide="isGlimEnabled()"><input type="checkbox" ng-change="addForSelection(charge)" data-ng-model="charge.selected" data-ng-disabled="charge.actionFlag"/></th>
                                <td class="pointer" data-ng-click="viewLoanChargeDetails(charge.id)">{{charge.name}}</td>
                                <td ng-show="charge.penalty" class="pointer" data-ng-click="viewLoanChargeDetails(charge.id)">{{"penalty"}}</td>
                                <td ng-hide="charge.penalty" class="pointer" data-ng-click="viewLoanChargeDetails(charge.id)">{{"fee"}}</td>
                                <td class="pointer" data-ng-click="viewLoanChargeDetails(charge.id)">{{charge.chargeTimeType.value}}</td>
                                <td class="pointer" data-ng-click="viewLoanChargeDetails(charge.id)">{{charge.dueDate | DateFormat}}</td>
                                <td class="pointer" data-ng-click="viewLoanChargeDetails(charge.id)">{{charge.amountOrPercentage + "  " +charge.chargeCalculationType.value}}</td>
                                <td class="pointer" data-ng-click="viewLoanChargeDetails(charge.id)">{{charge.currency.displaySymbol}}{{charge.amount}}{{" ( "}}{{(charge.taxAmount | number : 2) || "0"}}
                                {{" )"}}</td>
                                <td class="pointer" data-ng-click="viewLoanChargeDetails(charge.id)">{{charge.currency.displaySymbol}}{{charge.amountPaid| number}}</td>
                                <td class="pointer" data-ng-click="viewLoanChargeDetails(charge.id)">{{charge.currency.displaySymbol}}{{charge.amountWaived| number}}</td>
                                <td class="pointer" data-ng-click="viewLoanChargeDetails(charge.id)">{{charge.currency.displaySymbol}}{{charge.amountOutstanding| number}}</td>
                                <td ng-hide="isGlimEnabled()">
                                    <a title="{{'label.edit' | translate}}" data-ng-show="status=='Submitted and pending approval' && charge.chargeCalculationType.value != slabBasedCharge"
                                       href="#/loanaccountcharge/{{loandetails.id}}/editcharge/{{charge.id}}" has-permission='UPDATE_LOANCHARGE'><i
                                            class="icon-pencil icon-white"></i></a>
                                    <a title="{{'label.delete' | translate}}" class="btn-warning"
                                       data-ng-show="status=='Submitted and pending approval' && charge.isMandatory == false" data-ng-click="delCharge(charge.id)"
                                       title="delete" has-permission='DELETE_LOANCHARGE'><i class="icon-remove icon-white"></i></a>
                                    <a class="btn-primary" data-ng-hide="charge.actionFlag"
                                       href="#/loanaccountcharge/{{loandetails.id}}/waivecharge/{{charge.id}}"><i
                                            class="icon-flag icon-white"></i></a>
                                    <a class="btn-success" data-ng-show="charge.chargePayable && status=='Active'"
                                       href="#/loanaccountcharge/{{loandetails.id}}/paycharge/{{charge.id}}">{{"label.button.pay" |
                                        translate}}</a>
                                </td>
                                <td ng-show="charge.taxAmount" class="pointer" ng-click="showTaxDetails(charge.id)"><i class="icon-info ng-scope icon-primary"></i></td>
                            </tr>
                        </table>
                      </div>
                      <div class="btn-group col-md-offset-4" data-ng-show="selectedCharges.length > 0">
                            <button id="waiver" data-ng-click="waivecharges()" class="btn btn-primary">{{'label.heading.waivedselectedcharge' |
                                translate}}
                            </button>
                        </div>
                    </tab>

                    <script type="text/ng-template" id="delcharge.html">
                        <div class="modal-header silver">
                            <h3 class="bolder">{{'label.heading.confirm' | translate}}</h3>
                        </div>
                        <div class="modal-body">
                            <api-validate></api-validate>
                            <br>
                            <button class="btn btn-warning" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
                            <button class="btn btn-primary" ng-click="delete()">{{'label.button.confirm' | translate}}</button>
                        </div>
                    </script>

                    <script type="text/ng-template" id="waivecharge.html">
                        <div class="modal-header silver">
                            <h3 class="bolder">{{'label.heading.bulkwaiveconfirm' | translate}}</h3>
                        </div>
                        <div class="modal-body">
                             <div>
                                           
                                <table class="table width100">
                                        <tr class="graybg">
                                                <th>{{'label.heading.name' | translate}}</th>
                                                <th>{{'label.heading.paymentdueat' | translate}}</th>
                                                <th>{{'label.heading.dueasof' | translate}}</th>
                                                <th>{{'label.heading.outstanding' | translate}}</th>
                                            <tr>
                                            <tr ng-repeat="charge in selectedCharges" class="pointer-main">
                                                    <td class="pointer" >{{charge.name}}</td>
                                                    <td class="pointer">{{charge.chargeTimeType.value}}</td>
                                                    <td class="pointer" >{{charge.dueDate | DateFormat}}</td>
                                                    <td class="pointer" >{{charge.currency.displaySymbol}}{{charge.amountOutstanding| number}}</td>
                                            </tr>
                                 </table>
                            </div>
                            <div class="btn-group col-md-offset-4">
                                <button class="btn btn-warning" ng-click="cancel()">{{'label.button.cancel' | translate}}
                                </button>
                                <button id="save1" type="submit" ng-click="submit()" class="btn btn-primary">{{'label.button.confirm' |
                                    translate}}
                                </button>
                            </div>
                                    <BR><BR>
                                </fieldset>
                            </form>
                        </div>
                
                    </script>

                    <script type="text/ng-template" id="showschedule.html" class="width100">
                        <div class="width100">

                            <div class="modal-header silver">
                                <h3 class="bolder">{{'label.heading.loanrepaymentschedule' | translate}}</h3>
                            </div>
                            <br/>
                            <br/>
                            <div class="row span" style="margin-left:-1px;margin-top: -20px;margin-right:-1px">

                                <div class="col-sm-6 col-md-6">
                                    <table class="table table-striped table-bordered">
                                        <tbody>
                                        <tr>
                                            <th>{{'label.heading.customername' | translate}}:</th>
                                            <td><span class="padded-td">{{loandetails.clientName}}</span></td>
                                        </tr>

                                        <tr>
                                            <th>{{'label.heading.customerid' | translate}}:</th>
                                            <td><span class="padded-td">{{loandetails.clientAccountNo}}</span></td>
                                        </tr>

                                        <tr>
                                            <th>{{'label.heading.loanno' | translate}}:</th>
                                            <td><span class="padded-td">{{loandetails.accountNo}}</span></td>
                                        </tr>
                                        <tr>
                                            <th>{{'label.heading.productname' | translate}}:</th>
                                            <td><span class="padded-td">{{loandetails.loanProductName}}</span></td>
                                        </tr>
                                        </tbody>
                                    </table>

                                </div>
                                <div class="col-sm-6 col-md-6">

                                    <table class="table table-striped table-bordered">
                                        <tbody>
                                        <tr>
                                            <th>{{'label.heading.sanctiondate' | translate}}:</th>
                                            <td><span class="padded-td">{{loandetails.timeline.approvedOnDate | DateFormat}}</span></td>
                                        </tr>
                                        <tr>
                                            <th>{{'label.heading.sanctionamount' | translate}}:</th>
                                            <td><span class="padded-td">{{loandetails.approvedPrincipal}}</span></td>
                                        </tr>

                                        <tr>
                                            <th>{{'label.heading.disbursementdate' | translate}}:</th>
                                            <td><span class="padded-td">{{loandetails.timeline.actualDisbursementDate | DateFormat}}</span></td>
                                        </tr>

                                        <tr>
                                            <th>{{'label.heading.disbursementammount' | translate}}:</th>
                                            <td><span class="padded-td">{{loandetails.principal}}</span></td>
                                        </tr>
                                        </tbody>
                                    </table>

                                </div>



                            </div>
                            <div class="well">
                                <table class="table table-striped .width100" style="margin-bottom: -20px">
                                    <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>{{'label.heading.date' | translate}}</th>
                                        <th>{{'label.heading.days' | translate}}</th>
                                        <th>{{'label.heading.disbursement' | translate}}</th>
                                        <th>{{'label.heading.principaldue' | translate}}</th>
                                        <th>{{'label.heading.principalbalance' | translate}}</th>
                                        <th>{{'label.heading.interestdue' | translate}}</th>
                                        <th>{{'label.heading.fees' | translate}}</th>
                                        <th>{{'label.heading.penalty' | translate}}</th>
                                        <th>{{'label.heading.due' | translate}}</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="period in repaymentscheduleinfo.periods">
                                        <td>{{period.period}}</td>
                                        <td>{{period.dueDate | DateFormat}}</td>
                                        <td>{{period.daysInPeriod}}</td>
                                        <td>{{period.principalDisbursed | number}}</td>
                                        <td>{{period.principalDue| number}}</td>
                                        <td>{{period.principalLoanBalanceOutstanding| number}}</td>
                                        <td>{{period.interestDue| number}}</td>
                                        <td>{{period.feeChargesDue| number}}</td>
                                        <td>{{period.penaltyChargesDue| number}}</td>
                                        <td>{{period.totalDueForPeriod| number}}</td>
                                    </tr>
                                    </tbody>
                                    <tfoot class="ui-widget-header">
                                    <tr>
                                        <th colspan="2">{{'label.heading.total' | translate}}</th>
                                        <th>{{repaymentscheduleinfo.loanTermInDays}}</th>
                                        <th>{{repaymentscheduleinfo.totalPrincipalDisbursed| number}}</th>
                                        <th>{{repaymentscheduleinfo.totalPrincipalExpected| number}}</th>
                                        <th></th>
                                        <th>{{repaymentscheduleinfo.totalInterestCharged| number}}</th>
                                        <th>{{repaymentscheduleinfo.totalFeeChargesCharged| number}}</th>
                                        <th>{{repaymentscheduleinfo.totalPenaltyChargesCharged| number}}</th>
                                        <th>{{repaymentscheduleinfo.totalRepaymentExpected| number}}</th>
                                    </tr>
                                    </tfoot>

                                </table>
                            </div>

                            <div class="col-md-offset-9 paddedleft120">
                                <button class="btn btn-warning" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
                            </div>
                            <br/>
                        </div>

                    </script>

                    <script type="text/ng-template" id="showTaxDetails.html" class="width50">
                        <div class="width100">

                            <div class="modal-header silver">
                                <h3 class="bolder">{{'label.heading.chargetaxdetails' | translate}}</h3>
                            </div>
                            <br/>
                            <br/>
                            <div class="row span" style="margin-left:-1px;margin-top: -20px;margin-right:-1px">

                                <div class="col-sm-6 col-md-6">
                                    <table class="table table-striped table-bordered">
                                        <tbody>
                                          <tr>
                                            <td>{{'label.heading.chargeamount' | translate}}</td>
                                            <td>{{charge.currency.displaySymbol}}&nbsp;{{charge.amountSansTax}}</td>
                                          </tr>
                                          <tr ng-repeat="taxDetail in taxDetails">
                                            <td>{{taxDetail.taxComponentName}}</td>
                                            <td>{{charge.currency.displaySymbol}}&nbsp;{{taxDetail.amount}}</td>
                                          </tr>
                                          <tr>
                                              <td>{{'label.heading.totalchargeamount' | translate}}</td>
                                              <td>{{charge.currency.displaySymbol}}&nbsp;{{charge.amount}}</td>
                                          </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                          </div>
                    </script>

                    <tab heading="{{'label.heading.loandocuments' | translate}}" select="getLoanDocuments()">
                        <div class="pull-right" data-ng-show="choice">
                            <a href="#/addloandocument/{{loandetails.id}}" class="btn btn-primary"><i class="icon-plus icon-white"></i>{{'label.button.upload'
                                | translate}}</a>
                        </div>
                        <br>
                        <div ng-repeat="(key, value) in loandocuments">
                          <h3>{{key | translate}}</h3>
                          <table class="table" ng-show="value.length > 0">
                              <thead>
                              <th>{{'label.heading.name' | translate}}</th>
                              <th>{{'label.heading.description' | translate}}</th>
                              <th>{{'label.heading.filename' | translate}}</th>
                              <th>{{'label.heading.actions' | translate}}</th>
                              </thead>
                              <tbody>
                              <tr ng-repeat="document in value">
                                  <td>{{document.name}}</td>
                                  <td>{{document.description}}</td>
                                  <td>{{document.fileName}}</td>
                                  <td >
                                      <a ng-show="document.id" target="_blank" 
                                      ng-click = "download(document)" has-permission='DOWNLOAD_DOCUMENT'><i class="icon-cloud-download"></i></a>&nbsp;
                                      <a ng-show="document.id" ng-click="deleteDocument(document,$index, key)"><i class="icon-remove"></i></a>
                                      <a ng-show="document.id && document.reportIdentifier" ng-click="reGenerateDocument(document)"><i class="icon-repeat"></i></a>
                                      <a ng-hide="document.id" ng-click="generateDocument(document)"><i class="icon-link"></i></a>
                                  </td>
                              </tr>
                              </tbody>
                          </table>
                        </div>
                    </tab>
                    <tab heading="{{'label.anchor.mandate' | translate}}" select="getMandatesOnSelect()">
                        <div class="pull-right">
                            <a href="#/mandate/{{loandetails.id}}/CREATE" ng-show="createPossible" class="btn btn-primary">{{'label.button.mandate.create'
                                | translate}}</a>
                            <a href="#/mandate/{{loandetails.id}}/UPDATE" ng-show="updateCancelPossible" class="btn btn-primary">{{'label.button.mandate.update'
                                | translate}}</a>
                            <a href="#/mandate/{{loandetails.id}}/CANCEL" ng-show="updateCancelPossible" class="btn btn-primary">{{'label.button.mandate.cancel'
                                | translate}}</a>
                        </div>
                        <br>
                        <table class="table" ng-show="mandates.length > 0">
                            <thead>
                            <th>{{'label.heading.mandate.mandateStatus' | translate}}</th>
                            <th>{{'label.heading.mandate.umrn' | translate}}</th>
                            <th>{{'label.heading.mandate.bankAccountHolderName' | translate}}</th>
                            <th>{{'label.heading.mandate.bankName' | translate}}</th>
                            <th>{{'label.heading.mandate.branchName' | translate}}</th>
                            <th>{{'label.heading.mandate.returnReason' | translate}}</th>
                            <th>{{'label.heading.mandate.scannedDocumentName' | translate}}</th>
                            <th></th>
                            <th></th>
                            </thead>
                            <tbody>
                            <tr ng-repeat="mandate in mandates">
                                <td>{{mandate.mandateStatus.code}}</td>
                                <td>{{mandate.umrn}}</td>
                                <td>{{mandate.bankAccountHolderName}}</td>
                                <td>{{mandate.bankName}}</td>
                                <td>{{mandate.branchName}}</td>
                                <td>{{mandate.returnReason}}</td>
                                <td><a ng-click = "download(mandate)">{{mandate.scannedDocumentName}}</a></td>
                                <td>
                                    <a href="#/mandate/{{loandetails.id}}/EDIT/{{mandate.id}}" ng-show="mandate.editdeletePossible" class="btn btn-primary">{{'label.button.mandate.edit'
                                        | translate}}</a>
                                </td>
                                <td>
                                    <a ng-click="deleteMandate(loandetails.id,mandate.id)" ng-show="mandate.editdeletePossible"><i class="icon-remove"></i></a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </tab>
                    <tab heading="{{ 'label.heading.notes' | translate }}" has-permission='READ_LOANNOTE' select="fetchNotes()">
                        <br/>

                        <form>
                            <div class="form-group">
                                <div class="col-sm-12 col-md-12">
                                    <textarea rows="1" class="form-control marginbottom0px" id="textarea"
                                              placeholder="{{'label.input.enternote' | translate}}" ng-model="formData.note"></textarea>

                                    <div class="notewrapper col-sm-12 col-md-12">
                                        <span class="pull-right noteaddbuttonwrapper">
                                            <button class="btn btn-primary" type="submit" ng-click="saveNote()"
                                                    has-permission='CREATE_LOANNOTE'>{{'label.button.add' | translate}}
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="col-md-12">
                            <br/>
                            <div ng-repeat="loanNote in loanNotes | orderBy:predicate:reverse">
                                <blockquote>
                                    <p>{{loanNote.note}}</p>
                                    {{loanNote.id}}
                                    <small>{{'label.createdby' | translate}} :&nbsp;{{loanNote.createdByUsername}}</small>
                                    <small>{{'label.createdon' | translate}} :&nbsp;{{loanNote.createdOn | DateFormat}}</small>
                                </blockquote>
                            </div>
                        </div>
                    </tab>
                    <tab heading="{{datatable.registeredTableDisplayName == null ? datatable.registeredTableName : datatable.registeredTableDisplayName}}" ng-repeat="datatable in datatables" has-permission='READ_{{datatable.registeredTableName}}'
                         select="dataTableChange(datatable)">
                        <div>
                            <div data-ng-show="choice" class="btn-group pull-right">
                                <a ng-show="datatabledetails.isData" class="btn btn-danger pull-right"
                                   has-permission='DELETE_{{datatable.registeredTableName}}'
                                   ng-click="deleteAll(datatable.registeredTableName, loandetails.id)"><i
                                        class="icon-trash icon-white"></i>{{'label.button.deleteall' | translate}}</a>
                                <a data-ng-show="showDataTableAddButton"
                                   href="#/makedatatableentry/{{datatable.registeredTableName}}/{{loandetails.id}}?fromEntity=loan"
                                   has-permission='CREATE_{{datatable.registeredTableName}}' class="btn btn-primary"><i
                                        class="icon-plus icon-white"></i>{{'label.button.add' | translate}}</a>
                                <a data-ng-show="showDataTableEditButton"
                                   ng-href="#/viewsingledatatableentry/{{datatable.registeredTableName}}/{{loandetails.id}}?mode=edit&&fromEntity=loan"
                                   class="btn btn-primary" has-permission='UPDATE_{{datatable.registeredTableName}}'><i
                                        class="icon-edit icon-white"></i>{{'label.button.edit' | translate}}</a>
                            </div>
                            <br>
                            <br>
                            <div ng-show="datatabledetails.isData" ng-include="'views/system/view_datatable_data.html'">

                            </div>
                        </div>
                    </tab>
                    <tab ng-show="showCreditBureau" heading="{{ 'label.heading.bureau' | translate }}" has-permission='READ_CREDIT_BUREAU_REPORT' select="getCreditBureauReportSummary()">
                        <div class="span gray-head">
                            <span class="boldlabel">
                                  <strong>{{'label.anchor.creditbureauteport' | translate}}</strong>
                            </span>
                            <div class="pull-right" ng-show="fileContentData.reportFileType">
                                <button type="button" class="btn btn-primary" ng-click="creditBureauReportView();" has-permission='READ_CREDIT_BUREAU_REPORT'>{{'label.button.view.report.file' | translate}}</button>
                            </div>
                        </div>
                        <div ng-if="creditBureauEnquiries && creditBureauEnquiries.length > 0">
                         <div class ="col-md-12">
                             <div class ="col-md-6">
                                 <table class="table table-striped">
                                    <tr>
                                        <td>{{'label.heading.clientname' | translate}}</td>
                                        <td>{{creditBureauEnquiry.client.displayName}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.creditbureau' | translate}}</td>
                                        <td>{{creditBureauEnquiry.creditBureauProduct.name}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.initiatedon' | translate}}</td>
                                        <td>{{creditBureauEnquiry.createdDate| DateFormat}}</td>
                                    </tr>
                                 </table> 
                             </div>
                             <div class ="col-md-6">
                                 <table class="table table-striped">
                                    <tr>
                                        <td>{{'label.heading.status' | translate}}</td>
                                        <td>{{creditBureauEnquiry.status.value}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.referenceNumber' | translate}}</td>
                                        <td>{{creditBureauEnquiry.referenceNumber}}</td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.enquiry.id' | translate}}</td>
                                        <td>{{creditBureauEnquiry.id}}</td>
                                    </tr>
                                 </table> 
                             </div> 
                         </div>         
                    </div>             
                    <div ng-if="isReportPresent">
                            <div class="col-md-12">
                              <table class="table table-bordered table-striped"  
                                ng-if="errorMessage">
                                  <tr>
                                      <td colspan="2">
                                          <span class="boldlabel"><strong>{{'label.input.credit.bureau.response.message' | translate}}</strong></span>
                                      </td>
                                  </tr>
                                  <tr>
                                      <td class="error">
                                          <table ng-if="errorMessage">
                                              <tbody>
                                              <tr>
                                                  <td>{{'label.error' | translate}}<br></td>
                                              </tr>
                                              <tr ng-repeat="error in errorMessage">
                                                  <td>{{error.description}}</td>
                                              </tr>
                                              </tbody>
                                          </table>
                                      </td>
                                  </tr>
                              </table>
                            </div>
                            <div class="col-md-12">
                                <table class="table table-bordered table-striped" ng-if="(activeLoan.summaries.length > 0)">
                                    <tr>
                                        <td colspan="8">
                                            <span class="boldlabel"><strong>{{'label.heading.cb.report.active.loans.summary' | translate}}</strong></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span><strong>{{'label.heading.serialno' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{'label.heading.name.of.mfi' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{'label.heading.customer.since' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{'label.heading.no.of.active.loans' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{'label.heading.total.outstanding.amount' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{'label.heading.total.emi.amount' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{'label.heading.disbursaldate' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{'label.heading.overdue.amount' | translate}}</strong></span>
                                        </td>
                                    </tr>
                                    <tr ng-repeat="summary in activeLoan.summaries | orderBy:'-totalOutstandingAmount' track by $index" ng-init="summaryIndex = $index">
                                        <td>
                                            <span>{{(summaryIndex+1)}}</span>
                                        </td>
                                        <td>
                                            <span>{{summary.lenderName}}</span>
                                        </td>
                                        <td>
                                            <span>{{summary.customerSince |DateFormat}}</span>
                                        </td>
                                        <td>
                                            <span>{{summary.noOfActiveLoans}}</span>
                                        </td>
                                        <td>
                                            <span>{{summary.totalOutstandingAmount |number}}</span>
                                        </td>
                                        <td>
                                            <span>{{summary.totalEMIAmount |number : 2}}</span>
                                        </td>
                                        <td>
                                            <span>{{summary.disbursalDate |DateFormat}}</span>
                                        </td>
                                        <td>
                                            <span>{{summary.totalOverDueAmount |number}}</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span><strong>{{'label.heading.total' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            &nbsp;
                                        </td>
                                        <td>
                                            &nbsp;
                                        </td>
                                        <td>
                                            <span><strong>{{activeLoan.totalSummary.noOfActiveLoans}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{activeLoan.totalSummary.totalOutstandingAmount | number:0}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{activeLoan.totalSummary.totalEMIAmount | number:0}}</strong></span>
                                        </td>
                                        <td>
                                            &nbsp;
                                        </td>
                                        <td>
                                            <span><strong>{{activeLoan.totalSummary.totalOverDueAmount | number}}</strong></span>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-md-12">
                                <table class="table table-bordered table-striped" ng-if="closedLoan.summaries.length > 0">
                                    <tr>
                                        <td colspan="8">
                                            <span class="boldlabel"><strong>Closed Loans Summary</strong></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span><strong>{{'label.heading.serialno' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{'label.heading.name.of.mfi' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{'label.heading.customer.since' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{'label.heading.no.of,closed.loans' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{'label.heading.total.disbursal.amount' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{'label.heading.last.closure.date' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{'label.heading.write.off.amount' | translate}}</strong></span>
                                        </td>
                                    </tr>
                                    <tr ng-repeat="summary in closedLoan.summaries | orderBy:'lastClosureDate' :true track by $index" ng-init="summaryIndex = $index">
                                        <td>
                                            <span>{{(summaryIndex+1)}}</span>
                                        </td>
                                        <td>
                                            <span>{{summary.lenderName}}</span>
                                        </td>
                                        <td>
                                            <span>{{summary.customerSince |DateFormat}}</span>
                                        </td>
                                        <td>
                                            <span>{{summary.noOfClosedLoans}}</span>
                                        </td>
                                        <td>
                                            <span>{{summary.totalDisbursalAmount |number}}</span>
                                        </td>
                                        <td>
                                            <span>{{summary.lastClosureDate |DateFormat}}</span>
                                        </td>
                                        <td>
                                            <span>{{summary.totalWriteOffAmount |number}}</span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span><strong>{{'label.heading.total' | translate}}</strong></span>
                                        </td>
                                        <td>
                                            &nbsp;
                                        </td>
                                        <td>
                                            &nbsp;
                                        </td>
                                        <td>
                                            <span><strong>{{closedLoan.totalSummary.noOfClosedLoans}}</strong></span>
                                        </td>
                                        <td>
                                            <span><strong>{{closedLoan.totalSummary.totalDisbursalAmount | number}}</strong></span>
                                        </td>
                                        <td>
                                            &nbsp;
                                        </td>
                                        <td>
                                            <span><strong>{{closedLoan.totalSummary.totalWriteOffAmount | number}}</strong></span>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </tab>

                    <tab heading="{{'lable.tab.heading.pdc' | translate}}" select="isDisplayPDC=true">
                        <div data-ng-if="isDisplayPDC == true" ng-include="'views/pdc/displaypdclist.html'"></div>
                        <script data-ng-if="isDisplayPDC == true" type="text/ng-template" id="createpdc.html">
                            <div ng-include="'views/pdc/createpdc.html'"></div>
                        </script>
                    </tab>

                    <tab ng-if="loandetails.isDpConfigured" heading="{{'label.tab.heading.dpdetails' | translate}}" select="getLoanAccountDpDetailData()">
                        <div ng-show="loandetails.isDpConfigured">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="empty"></th>
                                        <th class="empty"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>{{'label.heading.drawing.power.frequency.type' | translate}}</td>
                                        <td>
                                                {{loanAccountDpDetailData.frequencyType.value}}
                                                <label ng-if="loanAccountDpDetailData.frequencyType.id == 1 && loanAccountDpDetailData.frequencyDayOfWeekType">
                                                    on {{loanAccountDpDetailData.frequencyDayOfWeekType.value}}
                                                </label>
                                                <label ng-if="loanAccountDpDetailData.frequencyType.id == 2 && loanAccountDpDetailData.frequencyOnDay && loanAccountDpDetailData.frequencyNthDay.id == -2">
                                                    on day {{loanAccountDpDetailData.frequencyOnDay}}
                                                </label>
                                                <label ng-if="loanAccountDpDetailData.frequencyType.id == 2 && loanAccountDpDetailData.frequencyNthDay && loanAccountDpDetailData.frequencyNthDay.id != -2">
                                                    on {{loanAccountDpDetailData.frequencyNthDay.value}} {{loanAccountDpDetailData.frequencyDayOfWeekType.value}}
                                                </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.drawing.power.frequency.interval' | translate}}</td>
                                        <td> <span class="padded-td">{{loanAccountDpDetailData.frequencyInterval}}</span></td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.dplimitamount' | translate}}</td>
                                        <td> <span class="padded-td">{{loanAccountDpDetailData.maxDrawingPower}}</span></td>
                                    </tr>
                                    <tr>
                                            <td>{{'label.heading.amount' | translate}}</td>
                                            <td> <span class="padded-td">{{loanAccountDpDetailData.amount}}</span></td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.calculationtype' | translate}}</td>
                                        <td> <span class="padded-td">{{loanAccountDpDetailData.calculationType.value}}</span></td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.duration' | translate}}</td>
                                        <td> <span class="padded-td">{{loanAccountDpDetailData.duration}}</span></td>
                                    </tr>
                                    <tr>
                                        <td>{{'label.heading.startdate' | translate}}</td>
                                        <td> <span class="padded-td">{{loanAccountDpDetailData.startDate}}</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </tab>

                </tabset>
            </div>
        </div>
    </div>
    <script type="text/ng-template" id="viewDocument.html">
             <div style="position: fixed; top:20%; right:10%; width:600px; height: 500px;">
                <view-document-directive  ng-entity-type="{{data.reportEntityType}}"
                ng-entity-id="{{data.enquiryId}}"></view-document-directive>
            </div>
    </script>
</div>
