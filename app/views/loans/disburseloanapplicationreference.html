<div ng-controller="DisburseLoanApplicationReference">
    <div>
        <ul class="breadcrumb">
            <li ng-show="groupName"><a href="#/viewgroup/{{formData.groupId}}"><strong>'{{groupName}}'</strong></a></li>
            <li ng-show="clientName"><a href="#/viewclient/{{formData.clientId}}"><strong>'{{clientName}}'</strong></a>
            </li>
            <li class="active">{{'label.anchor.disburse.loanapplication' | translate}}</li>
        </ul>
    </div>
    <api-validate></api-validate>
    <script type="text/ng-template" id="fingerprint.html">
        <div class="modal-header silver">
            <h3 class="bolder">{{'label.heading.fingerprint' | translate}}</h3>
        </div>
        <div class="modal-body">
            <form name="popupform" novalidate="">
                <fieldset>
                    <div class="form-group row">
                        <div class="btn-group-vertical">
                            <BR><BR>
                            <button class="btn btn-danger pull-right" ng-click="clearFingerPrint()">{{'label.button.clear' | translate}} </button>
                            <button class="btn btn-info pull-right" ng-click="captureFingerprint()">{{'label.button.capture' | translate}} </button>
                        </div>
                        <div class="col-sm-3">
                            <img id="biometric"  name = "biometric" height="200" width="128" style="border: 1px #e4e4e4 solid; border-radius:4px; box-shadow: 0 0 6px #ccc" >
                        </div>
                    </div>
                    <div class="btn-group col-md-offset-4">
                        <button class="btn btn-warning" ng-click="cancel()">{{'label.button.cancel' | translate}}
                        </button>
                        <button id="save1" type="submit" ng-click="submit()" class="btn btn-primary">{{'label.button.confirm' |
                            translate}}
                        </button>
                    </div>
                    <BR><BR>
                </fieldset>
            </form>
        </div>

    </script>

    <div class="col-md-12 col-sm-12">
        <div class="row primarydiv">
            <div class="pull-right">
                <span ng-if="formData.status.id === 300">
                  <a class="btn btn-primary" data-ng-click="undoApprovalLoanAppRef();"
                     has-permission='UNDOAPPROVE_LOANAPPLICATIONREFERENCE'><i
                          class="icon-circle-arrow-left icon-white"></i>{{'label.button.undoapproval' | translate}}</a>
                </span>
                <span ng-if="formData.status.id !== 400 || formData.status.id !== 500">
                  <a class="btn btn-primary" data-ng-click="rejectApprovalLoanAppRef();"
                     has-permission='REJECT_LOANAPPLICATIONREFERENCE'><i
                          class="icon-remove-circle icon-white"></i>{{'label.button.reject' | translate}}</a>
                </span>
            </div>
        </div>
        <div class="row client">
            <div>
                <div class="form-horizontal" ng-show="report">
                    <div id="print">
                        <h3 align="center" class="width100">{{'label.heading.companyname' | translate}}</h3>
                        <h3 align="center" class="width100">{{'label.heading.loanrepaymentschedule' | translate}}</h3>
                        <div id="branchName" align="center" class="width100">
                            <h3>{{loanaccountinfo.group.officeName}}</h3>
                            <br>
                        </div>

                        <div id="table2" class="pull-right">
                            <table id="table2" class="table width100">
                                <tbody>
                                <tr>
                                    <th>{{'label.heading.sanctiondate' | translate}}:</th>
                                    <td>{{formData.approvedData.approvedOnDate | DateFormat}}</td>
                                </tr>

                                <tr>
                                    <th>{{'label.heading.sanctionamount' | translate}}:</th>
                                    <td>{{formData.approvedData.loanAmountApproved}}</td>
                                </tr>

                                <tr>
                                    <th>{{'label.heading.disbursementdate' | translate}}:</th>
                                    <td>{{formRequestData.disburse.actualDisbursementDate | DateFormat}}</td>
                                </tr>

                                <tr>
                                    <th>{{'label.heading.disbursementammount' | translate}}:</th>
                                    <td>{{formRequestData.disburse.transactionAmount}}</td>
                                </tr>

                                <tr>
                                    <th>{{'label.heading.interesttype' | translate}}:</th>
                                    <td>{{loanaccountinfo.interestType.value}}</td>
                                </tr>

                                <tr>
                                    <th>{{'label.heading.interestperannum' | translate}}:</th>
                                    <td>{{loanaccountinfo.interestRatePerPeriod}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>


                        <div id="table1">
                            <table id="table1" class="table width40">
                                <tbody>
                                <tr>
                                    <th>{{'label.heading.reportdate' | translate}}:</th>
                                    <td>{{restrictDate | DateFormat}}</td>
                                </tr>

                                <tr>
                                    <th>{{'label.heading.customername' | translate}}:</th>
                                    <td>{{clientName}}</td>
                                </tr>

                                <tr>
                                    <th>{{'label.heading.customerid' | translate}}:</th>
                                    <td>{{loanaccountinfo.clientAccountNo}}</td>
                                </tr>

                                <tr>
                                    <th>{{'label.heading.loan.application.number' | translate}}:</th>
                                    <td>{{formData.loanApplicationReferenceNo}}</td>
                                </tr>

                                <tr>
                                    <th>{{'label.heading.centername' | translate}}:</th>
                                    <td>{{loanaccountinfo.group.centerName}}</td>
                                </tr>

                                <tr>
                                    <th>{{'label.heading.coname' | translate}}:</th>
                                    <td>{{clientData.staffName}}</td>
                                </tr>

                                <tr>
                                    <th>{{'label.heading.productname' | translate}}:</th>
                                    <td>{{loanaccountinfo.loanProductName}}</td>
                                </tr>
                                </tbody>
                            </table>
                            <br>
                        </div>

                        <div id="table3">
                            <table class="table width100">
                                <tbody>
                                <tr>
                                    <th id="heading">{{'label.heading.serialno' | translate}}</th>
                                    <th id="heading">{{'label.heading.disbursaldate' | translate}}</th>
                                    <th id="heading">{{'label.heading.disbursedamount' | translate}}</th>
                                </tr>
                                <tr ng-repeat="disbursed in disbursedData">
                                    <td>{{$index+1}}</td>
                                    <td>{{disbursed.dueDate | DateFormat}}</td>
                                    <td>{{disbursed.principalDisbursed}}</td>
                                </tr>
                                </tbody>
                            </table>
                            <br>
                        </div>

                        <div id="table4">
                            <table class="table width100">
                                <tbody>
                                <tr>
                                    <th id="heading">{{'label.heading.serialno' | translate}}</th>
                                    <th id="heading" width="=150">{{'label.heading.date' | translate}}</th>
                                    <th id="heading">{{'label.heading.principaldue' | translate}}</th>
                                    <th id="heading">{{'label.heading.principalbalance' | translate}}</th>
                                    <th id="heading">{{'label.heading.interestdue' | translate}}</th>
                                    <th id="heading">{{'label.heading.due' | translate}}</th>
                                </tr>
                                <tr ng-repeat="period in repaymentData">
                                    <td>{{period.period}}</td>
                                    <td width="150">{{period.dueDate | DateFormat}}</td>
                                    <td>{{period.principalDue| number}}</td>
                                    <td>{{period.principalLoanBalanceOutstanding| number}}</td>
                                    <td>{{period.interestDue| number}}</td>
                                    <td>{{period.totalDueForPeriod| number}}</td>
                                </tr>

                                <br>
                                <tr>
                                    <td colspan="2">{{'label.heading.total' | translate}}</td>
                                    <td>{{repaymentscheduleinfo.totalPrincipalExpected| number}}</td>
                                    <td></td>
                                    <td>{{repaymentscheduleinfo.totalInterestCharged| number}}</td>
                                    <td>{{repaymentscheduleinfo.totalRepaymentExpected| number}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <button ng-click="printDiv('print');">Print Div</button>

                <span><a ng-hide="report"><i class="icon-circle-arrow-left">{{'label.anchor.backtoloaninfo'
                    | translate}}</i></a><br><br></span>

                    <div class="col-md-11 center">
                        <button ng-click="backToLoanDetails()" class="btn btn-default ng-binding">{{'label.button.back'
                            | translate}}
                        </button>
                    </div>

                    <div class="form-group" ng-show="viewLoanReport">
                        <label class="control-label col-sm-2">{{'label.input.fromdate' | translate}}<span
                                class="required">*</span></label>

                        <div class="col-sm-3">
                            <input id="startDate" class="date-disable form-control" readonly type="text" autocomplete="off"
                                   datepicker-pop="{{df}}" ng-model="date.fromDate" is-open="opened" min="minDate"
                                   max="restrictDate"/>
                        </div>
                        <label class="control-label col-sm-2">{{'label.input.todate' | translate}}<span
                                class="required">*</span></label>

                        <div class="col-sm-3">
                            <input id="endDate" class="date-disable form-control" readonly type="text" autocomplete="off"
                                   datepicker-pop="{{df}}" ng-model="date.toDate" is-open="opened" min="minDate"
                                   max="restrictDate"/>
                        </div>
                    </div>
                    <div class="col-md-11 center" ng-show="viewLoanReport">
                        <button ng-click="viewLoanDetails()" class="btn btn-default ng-binding">{{'label.button.back' |
                            translate}}
                        </button>
                        <button ng-click="viewprintdetails()" class="btn btn-primary ng-binding">
                            {{'label.button.viewprint' | translate}}
                        </button>
                    </div>
                </div>

                <div ng-hide="report">
                    <form class="well form-inline" name="disburseloanapplicationreferenceform" novalidate=""
                          rc-submit="submit()">
                        <div class="span gray-head">
                    <span class="boldlabel">
                          <strong>{{ 'label.heading.requested.loanapplication.details' | translate }}</strong>
                    </span>
                        </div>
                        <div class="col-md-12 well">
                            <div class="col-md-6">
                                <table class="table table-bordered table-striped">
                                    <tr>
                                        <td><label>{{ 'label.input.product' | translate }}<span
                                                class="required">*</span>:&nbsp;
                                        </label>
                                            <i class="icon-question-sign"
                                               tooltip="{{'label.tooltip.product' | translate}}"></i>
                                        </td>
                                        <td>{{formData.loanProductName}}</td>
                                    </tr>
                                    <tr>
                                        <td><label>{{ 'label.input.loanpurpose' | translate }}:&nbsp;</label>
                                            <i class="icon-question-sign"
                                               tooltip="{{'label.tooltip.loanpurpose' | translate}}"></i></td>
                                        <td>{{formData.loanPurpose.name}}</td>
                                    </tr>
                                    <tr>
                                        <td><label>{{ 'label.input.loanterm' | translate }}&nbsp;<span
                                                class="required"></span>:</label></td>
                                        <td>{{formData.termFrequency}} : {{formData.termPeriodFrequency.value}}</td>
                                    </tr>
                                    <tr ng-if="false && loanaccountinfo.canDefineInstallmentAmount">
                                        <td><label>{{ 'label.input.fixedemiamount' | translate }}:</label>&nbsp;</td>
                                        <td>
                                            {{formData.fixedEmiAmount}}&nbsp;{{loanaccountinfo.currency.displaySymbol}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><label>{{ 'label.input.submittedon' | translate }}:</label>&nbsp;</td>
                                        <td>{{formData.submittedOnDate | DateFormat}}</td>
                                    </tr>
                                    <tr ng-show="formData.loanAccountNum">
                                        <td><label>{{ 'label.input.loanaccountnumber' | translate }}:</label>&nbsp;</td>
                                        <td>{{formData.loanAccountNum}}</td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-md-6">
                                <table class="table table-bordered table-striped">
                                    <tr>
                                        <td><label>{{ 'label.input.loanofficer' | translate }}:&nbsp;</label>
                                            <i class="icon-question-sign"
                                               tooltip="{{'label.tooltip.loanofficer' | translate}}"></i></td>
                                        <td>{{formData.loanOfficerName}}</td>
                                    </tr>
                                    <tr>
                                        <td><label>{{ 'label.input.requested.principal.amount' | translate }}&nbsp;<span
                                                class="required">*</span>:</label></td>
                                        <td>
                                            {{formData.loanAmountRequested|number}}&nbsp;{{loanaccountinfo.currency.displaySymbol}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><label>{{ 'label.input.repaidevery' | translate }}&nbsp;<span
                                                class="required"></span></label></td>
                                        <td>{{formData.repayEvery}} : {{formData.repaymentPeriodFrequency.value}}</td>
                                    </tr>
                                    <tr>
                                        <td><label>{{ 'label.input.no.of.tranche' | translate }}</label></td>
                                        <td>{{formData.noOfTranche}}</td>
                                    </tr>
                                </table>
                            </div>
                            <div ng-if="feeCharges.length > 0" ng-hide="formData.status.id > 200">
                                <table class="width100">
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.charges' | translate}}</strong></td>
                                    </tr>
                                    <tr class="bottomborder graybg">
                                        <td>{{'label.heading.name' | translate}}</td>
                                        <td>{{'label.heading.type' | translate}}</td>
                                        <td>{{'label.heading.amount' | translate}}</td>
                                        <td>{{'label.heading.collectedon' | translate}}</td>
                                    </tr>
                                    <tr ng-repeat="charge in feeCharges">
                                        <td>{{charge.name}}</td>
                                        <td>{{charge.chargeCalculationType.value}}</td>
                                        <td>{{charge.amount|number}}</td>
                                        <td>{{charge.chargeTimeType.value}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><br/></td>
                                    </tr>
                                </table>
                            </div>
                            <div ng-if="penalCharges.length > 0" ng-hide="formData.status.id > 200">
                                <table class="width100">
                                    <tr class="bottomborder">
                                        <td colspan="4"><strong>{{'label.heading.overduepenalitycharge' | translate}}</strong></td>
                                    </tr>
                                    <tr class="bottomborder graybg">
                                        <td>{{'label.heading.name' | translate}}</td>
                                        <td>{{'label.heading.type' | translate}}</td>
                                        <td>{{'label.heading.amount' | translate}}</td>
                                        <td>{{'label.heading.collectedon' | translate}}</td>
                                    </tr>
                                    <tr ng-repeat="charge in penalCharges">
                                        <td>{{charge.name}}</td>
                                        <td>{{charge.chargeCalculationType.value}}</td>
                                        <td>{{charge.amount|number}}</td>
                                        <td>{{charge.chargeTimeType.value}}</td>
                                    </tr>
                                    <tr>
                                        <td colspan="4"><br/></td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div ng-show="formData.status.id > 200">

                            <div class="span gray-head" ng-show="formData.status.id > 200">
                        <span class="boldlabel">
                            <strong>{{ 'label.heading.approved.loanapplication.details' | translate }}</strong>
                        </span>
                            </div>
                            <div class="col-md-12 well" ng-show="formData.status.id > 200">
                                <div class="col-md-6">
                                    <table class="table table-bordered table-striped">
                                        <tr>
                                            <td><label>{{ 'label.input.product' | translate }}<span
                                                    class="required">*</span>:&nbsp;
                                            </label>
                                                <i class="icon-question-sign"
                                                   tooltip="{{'label.tooltip.product' | translate}}"></i>
                                            </td>
                                            <td>{{formData.loanProductName}}</td>
                                        </tr>
                                        <tr>
                                            <td><label>{{ 'label.input.loanpurpose' | translate }}:&nbsp;</label>
                                                <i class="icon-question-sign"
                                                   tooltip="{{'label.tooltip.loanpurpose' | translate}}"></i></td>
                                            <td>{{formData.loanPurpose.name}}</td>
                                        </tr>
                                        <tr>
                                            <td><label>{{ 'label.input.loanterm' | translate }}&nbsp;<span
                                                    class="required"></span>:</label></td>
                                            <td>{{formData.approvedData.termFrequency}} :
                                                {{formData.approvedData.termPeriodFrequency.value}}
                                            </td>
                                        </tr>
                                        <tr ng-if="false && loanaccountinfo.canDefineInstallmentAmount">
                                            <td><label>{{ 'label.input.fixedemiamount' | translate }}:</label>&nbsp;
                                            </td>
                                            <td>{{formData.approvedData.fixedEmiAmount}}&nbsp;{{loanaccountinfo.currency.displaySymbol}}</td>
                                        </tr>
                                        <tr>
                                            <td><label>{{ 'label.input.submittedon' | translate }}:</label>&nbsp;</td>
                                            <td>{{formData.submittedOnDate | DateFormat}}</td>
                                        </tr>
                                        <tr>
                                            <td><label>{{ 'label.input.approvedondate' | translate }}:</label>&nbsp;
                                            </td>
                                            <td>{{formData.approvedData.approvedOnDate }}</td>
                                        </tr>
                                        <tr ng-show="showUpfrontAmount">
                                            <td><label>{{ 'label.input.amountforupfrontcollection' | translate }}:</label>&nbsp;
                                            </td>
                                            <td>{{formData.approvedData.amountForUpfrontCollection}}</td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="col-md-6">
                                    <table class="table table-bordered table-striped">
                                        <tr>
                                            <td><label>{{ 'label.input.loanofficer' | translate }}:&nbsp;</label>
                                                <i class="icon-question-sign"
                                                   tooltip="{{'label.tooltip.loanofficer' | translate}}"></i></td>
                                            <td>{{formData.loanOfficerName}}</td>
                                        </tr>
                                        <tr>
                                            <td><label>{{ 'label.heading.approvedamount' | translate }}&nbsp;<span
                                                    class="required">*</span>:</label></td>
                                            <td>
                                                {{formData.approvedData.loanAmountApproved|number}}&nbsp;{{loanaccountinfo.currency.displaySymbol}}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><label>{{ 'label.input.repaidevery' | translate }}&nbsp;<span
                                                    class="required"></span></label></td>
                                            <td>{{formData.approvedData.repayEvery}} :
                                                {{formData.approvedData.repaymentPeriodFrequency.value}}
                                            </td>
                                        </tr>
                                        <tr ng-show="formData.expectedDisbursalPaymentType.name">
                                            <td>{{'label.heading.preferredpaymentchannelfordisbursements' | translate}}</td>
                                            <td><span  class="padded-td">{{formData.expectedDisbursalPaymentType.name}}</span></td>
                                        </tr>
                                        <tr ng-show="formData.expectedRepaymentPaymentType.name">
                                            <td>{{'label.heading.preferredpaymentchannelforrepayments' | translate}}</td>
                                            <td><span class="padded-td">{{formData.expectedRepaymentPaymentType.name}}</span></td>
                                        </tr>
                                        <tr>
                                            <td><label>{{ 'label.input.no.of.tranche' | translate }}</label></td>
                                            <td>{{formData.noOfTranche}}</td>
                                        </tr>
                                        <tr>
                                            <td><label>{{ 'label.input.expecteddisbursementon' | translate }}:</label>&nbsp;
                                            </td>
                                            <td>{{formData.approvedData.expectedDisbursementDate }}</td>
                                        </tr>
                                    </table>
                                </div>
                                <div width="width100" ng-if="formData.approvedData.loanApplicationSanctionTrancheDatas.length > 0">
                                    <table class="width100">
                                        <tr class="bottomborder">
                                            <td colspan="4"><strong>{{'label.heading.tranche' | translate}}</strong>
                                            </td>
                                        </tr>
                                        <tr class="bottomborder graybg">
                                            <td>{{'label.input.tranche.amount' | translate}}</td>
                                            <td ng-if="false && loanaccountinfo.canDefineInstallmentAmount">
                                                {{'label.input.fixedemiamount' | translate}}
                                            </td>
                                            <td>{{'label.input.expecteddisbursementon' | translate}}</td>
                                            <td ng-if="formData.approvedData.loanApplicationSanctionTrancheDatas[0].discountOnDisbursalAmount">{{'label.input.discountondisbursalamount'| translate}}</td>
                                        </tr>
                                        <tr ng-repeat="trancheData in formData.approvedData.loanApplicationSanctionTrancheDatas">
                                            <td>{{trancheData.trancheAmount | number}}</td>
                                            <td ng-if="false && loanaccountinfo.canDefineInstallmentAmount">
                                                {{trancheData.fixedEmiAmount
                                                | number}}
                                            </td>
                                            <td>{{trancheData.expectedTrancheDisbursementDate|DateFormat}}</td>
                                            <td ng-if="trancheData.discountOnDisbursalAmount">{{trancheData.discountOnDisbursalAmount | number}} </td>
                                        </tr>
                                        <tr>
                                            <td colspan="4"><br/></td>
                                        </tr>
                                    </table>
                                </div>
                                <div ng-if="feeCharges.length > 0" width="width100">
                                    <table class="width100">
                                        <tr class="bottomborder">
                                            <td colspan="4">
                                                <strong>{{'label.heading.charges' | translate}}</strong>
                                            </td>
                                        </tr>
                                        <tr class="bottomborder graybg">
                                            <td>{{'label.heading.name' | translate}}</td>
                                            <td>{{'label.heading.type' | translate}}</td>
                                            <td>{{'label.heading.amount' | translate}}</td>
                                            <td>{{'label.heading.collectedon' | translate}}</td>
                                        </tr>
                                        <tr ng-repeat="charge in feeCharges">
                                            <td>{{charge.name}}</td>
                                            <td>{{charge.chargeCalculationType.value}}</td>
                                            <td>{{charge.amount|number}}</td>
                                            <td>{{charge.chargeTimeType.value}}</td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">
                                                <br/>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div ng-if="penalCharges.length > 0" width="width100">
                                    <table class="width100">
                                        <tr class="bottomborder">
                                            <td colspan="4">
                                                <strong>{{'label.heading.overduepenalitycharge' | translate}}</strong>
                                            </td>
                                        </tr>
                                        <tr class="bottomborder graybg">
                                            <td>{{'label.heading.name' | translate}}</td>
                                            <td>{{'label.heading.type' | translate}}</td>
                                            <td>{{'label.heading.amount' | translate}}</td>
                                            <td>{{'label.heading.collectedon' | translate}}</td>
                                        </tr>
                                        <tr ng-repeat="charge in penalCharges">
                                            <td>{{charge.name}}</td>
                                            <td>{{charge.chargeCalculationType.value}}</td>
                                            <td>{{charge.amount|number}}</td>
                                            <td>{{charge.chargeTimeType.value}}</td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">
                                                <br/>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <div class="col-md-12 well">
                                <div class="col-md-12">
                                    <label ng-show="loanaccountinfo.calendarOptions"><i
                                            class="icon-calendar icon-white"></i>&nbsp;<strong>{{
                                        'label.heading.meetingdetails' | translate }}</strong></label>
                                    <table ng-show="loanaccountinfo.calendarOptions" class="width100">
                                        <tr ng-repeat="calendar in loanaccountinfo.calendarOptions">
                                            <td class="width14"><label>{{ 'label.heading.startdate' | translate
                                                }}:</label></td>
                                            <td class="width36">{{calendar.startDate | DateFormat}}</td>
                                            <td class="width14"
                                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.syncDisbursementDateWithMeeting">
                                                <label>{{ 'label.heading.repeatson' | translate }}:</label></td>
                                            <td class="width36"
                                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.syncDisbursementDateWithMeeting">
                                                {{calendar.humanReadable}}
                                            </td>
                                        </tr>

                                        <tr ng-repeat="calendar in loanaccountinfo.calendarOptions">
                                            <td align="center"><input type="checkbox"
                                                                      ng-model="formRequestData.submitApplication.syncRepaymentsWithMeeting"
                                                                      ng-change="syncRepaymentsWithMeetingchange()" ng-disabled="response.uiDisplayConfigurations.loanAccount.isReadOnlyField.syncRepaymentsWithMeeting">
                                            </td>
                                            <td><label>{{ 'label.input.syncrepaymentswithmeeting' | translate }}</label>
                                            </td>
                                            <td align="center"
                                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.syncDisbursementDateWithMeeting">
                                                <input type="checkbox"
                                                       ng-model="formRequestData.submitApplication.syncDisbursementWithMeeting"
                                                       ng-change="syncDisbursementWithMeetingchange()"></td>
                                            <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.syncDisbursementDateWithMeeting">
                                                <label>{{ 'label.input.syncdisbursementdatewithmeeting' | translate
                                                    }}</label>
                                            </td>
                                        </tr>
                                    </table>
                                    <hr>
                                    <table class="width100">
                                        <tr>
                                            <td class="width25">
                                                <label>{{ 'label.input.disbursedon' | translate }}<span
                                                        class="required">*</span>:&nbsp;</label>
                                            </td>
                                            <td class="width25 paddedbottom10">
                                                <input id="actualDisbursementDate" name="actualDisbursementDate"
                                                       type="text" autocomplete="off"
                                                       datepicker-pop="{{df}}"
                                                       placeholder="{{'label.tooltip.disbursementon' | translate}}"
                                                       ng-model="formRequestData.disburse.actualDisbursementDate"
                                                       is-open="opened" min="minDate" max="maxDate"
                                                       class="form-control" ng-readonly="isDatePickerReadOnly"
                                                       required/>
                                            </td>

                                            <td class="width25"
                                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.repaymentsStartingFromDate == true">
                                                <label>{{ 'label.input.firstrepaymenton' | translate }}<span
                                                        class="required"
                                                        ng-show="response.uiDisplayConfigurations.loanAccount.isMandatory.repaymentsStartingFromDate">*</span>:&nbsp;
                                                </label>
                                                <i class="icon-question-sign"
                                                   tooltip="{{'label.tooltip.firstrepaymenton' | translate}}"></i>
                                            </td>
                                            <td class="width25 paddedbottom10"
                                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.repaymentsStartingFromDate == true">
                                                <input id="repaymentsStartingFromDate" name="repaymentsStartingFromDate"
                                                       type="text" autocomplete="off" datepicker-pop="{{df}}"
                                                       ng-model="date.repaymentsStartingFromDate" is-open="opened3"
                                                       min="minDate" max="maxDate" class="form-control"
                                                       ng-required="response.uiDisplayConfigurations.loanAccount.isMandatory.repaymentsStartingFromDate" ng-readonly="isDatePickerReadOnly"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="width25"></td>
                                            <td class="width25 paddedbottom10">
                                                <form-validate valattributeform="disburseloanapplicationreferenceform"
                                                               valattribute="actualDisbursementDate"/>
                                            </td>
                                            <td class="width25"></td>
                                            <td class="width25 paddedbottom10">
                                        <span class="error"
                                              ng-show="disburseloanapplicationreferenceform.repaymentsStartingFromDate.$error.required">{{'label.error.required' | translate}}</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="width25"><label>{{ 'label.input.transactionamount' | translate
                                                }}&nbsp;<span
                                                        class="required">*</span>:</label></td>
                                            <td class="width25 paddedbottom10">
                                                <input type="text" autocomplete="off" class="form-control" name="transactionAmount"
                                                       ng-model="formRequestData.disburse.transactionAmount"
                                                       ng-disabled="formData.approvedData.loanEMIPackData"
                                                       number-format required/>&nbsp;{{loanaccountinfo.currency.displaySymbol}}
                                            </td>

                                            <td class="width25"
                                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestChargedFromDate == true">
                                                <label class="control-label">{{ 'label.input.interestchargedfrom' |
                                                    translate
                                                    }}:</label>
                                                <i class="icon-question-sign"
                                                   tooltip="{{'label.tooltip.interestchargedfrom' | translate}}"></i>
                                            </td>
                                            <td class="width25 paddedbottom10"
                                                ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestChargedFromDate == true">
                                                <input id="interestChargedFromDate" type="text" autocomplete="off"
                                                       datepicker-pop="{{df}}"
                                                       ng-model="date.interestChargedFromDate"
                                                       is-open="opened2" min="minDate" max="maxDate"
                                                       class="form-control"
                                                       ng-disabled="response.uiDisplayConfigurations.loanAccount.isReadOnlyField.interestChargedFromDate" ng-readonly="isDatePickerReadOnly"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="width25"></td>
                                            <td class="width25 paddedbottom10">
                                                <form-validate valattributeform="disburseloanapplicationreferenceform"
                                                               valattribute="transactionAmount"/>
                                            </td>
                                            <td class="width25"></td>
                                            <td class="width25 paddedbottom10"></td>
                                        </tr>
                                        <tr ng-if="formRequestData.disburse.discountOnDisbursalAmount">
                                            <td class="width25">
                                                 <label class="control-label">{{ 'label.input.discountondisbursalamount' | translate}}:</label>    
                                            </td>
                                            <td class="width25 paddedbottom10">
                                                <input id="discountOnDisbursalAmount" type="text" autocomplete="off" name="discountOnDisbursalAmount" ng-model="formRequestData.disburse.discountOnDisbursalAmount" class="form-control" readonly number-format >
                                            </td> 
                                        </tr>
                                        <tr>

                                            <td class="width19" ng-if="loanaccountinfo.canDefineInstallmentAmount">
                                                <label>{{
                                                    'label.input.fixedemiamount' | translate
                                                    }}:</label>&nbsp;</td>
                                            <td class="width36 paddedbottom10"
                                                ng-if="loanaccountinfo.canDefineInstallmentAmount">
                                                <input id="fixedEmiAmount" name="fixedEmiAmount" type="text" autocomplete="off"
                                                       ng-model="formRequestData.disburse.fixedEmiAmount"
                                                       ng-disabled="formData.approvedData.loanEMIPackData"
                                                       class="form-control" number-format/>&nbsp;{{loanaccountinfo.currency.displaySymbol}}
                                            </td>

                                            <td class="width25">
                                                <label>{{ 'label.input.disbursalmode' | translate}}<span
                                                        class="required">*</span></label>
                                            </td>
                                            <td class="width25 paddedbottom10">
                                                    <select id="disbursementMode" name="disbursementMode" ng-model="disbursementMode"
                                                        ng-options="paymentModeOption.id as paymentModeOption.value for paymentModeOption in paymentModeOptions"
                                                        value="{{paymentModeOption.id}}" ng-change="changeDisbursalMode()" class="form-control"
                                                        >
                                                        <option value="">{{'label.selectone' | translate}}</option>
                                                   </select>
                                            </td>
                                            <td class="width25">
                                                <label>{{ 'label.input.paymenttype' | translate}}<span
                                                        class="required">*</span></label>
                                            </td>
                                            <td class="width25 paddedbottom10">
                                                <select id="paymentTypeId"
                                                        ng-model="formRequestData.disburse.paymentTypeId"
                                                        class="form-control"
                                                        ng-options="paymentType.id as paymentType.name for paymentType in disbursementTypeOption"
                                                        value="{{paymentType.id}}"></select>
                                            </td>
                                            <tr data-ng-show="(showUpfrontAmount || !loanaccountinfo.loanEMIPacks) && loanaccountinfo.allowUpfrontCollection">
                                                <td class="width25">
                                                    <label>{{ 'label.input.amountforupfrontcollection' | translate }}</label>
                                                </td>
                                                <td class="width25 paddedbottom10">
                                                    <input id="amountForUpfrontCollection" type="text" autocomplete="off" ng-model="formRequestData.submitApplication.amountForUpfrontCollection"
                                                           class="form-control" number-format/>
                                                </td>
                                            </tr>

                                        </tr>
                                    </table>

                                    <table class="width100">
                                        <tr>
                                            <td class="width25"><label>{{ 'label.anchor.showpaymentdetails' |
                                                translate}}<span
                                                        class="required"></span></label></td>
                                            <td class="width25 paddedbottom10">
                                                <a class="btn btn-primary"
                                                   ng-click="showPaymentDetails=!showPaymentDetails">
                                                    <i ng-show="showPaymentDetails" class="icon-minus icon-white"></i>
                                                    <i ng-show="!showPaymentDetails" class="icon-plus icon-white"></i>
                                                </a>
                                            </td>
                                            <td class="width25"></td>
                                            <td class="width25 paddedbottom10"></td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">
                                                <div collapse="!showPaymentDetails">
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3" for="accountNumber">{{
                                                            'label.input.accnum' | translate}}</label>

                                                        <div class="col-sm-3">
                                                            <input id="accountNumber" type="text" autocomplete="off" class="form-control"
                                                                   ng-model="formRequestData.disburse.accountNumber">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3" for="checkNumber">{{
                                                            'label.input.checknumber' |
                                                            translate}}</label>

                                                        <div class="col-sm-3">
                                                            <input id="checkNumber" class="form-control" type="text" autocomplete="off"
                                                                   ng-model="formRequestData.disburse.checkNumber">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3" for="routingCode">{{
                                                            'label.input.routingcode' |
                                                            translate}}</label>

                                                        <div class="col-sm-3">
                                                            <input id="routingCode" class="form-control" type="text" autocomplete="off"
                                                                   ng-model="formRequestData.disburse.routingCode">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3" for="receiptNumber">{{
                                                            'label.input.receiptnumber' |
                                                            translate}}</label>

                                                        <div class="col-sm-3">
                                                            <input id="receiptNumber" class="form-control" type="text" autocomplete="off"
                                                                   ng-model="formRequestData.disburse.receiptNumber">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3" for="bankNumber">{{
                                                            'label.input.banknumber' | translate}}</label>

                                                        <div class="col-sm-3">
                                                            <input id="bankNumber" class="form-control" type="text" autocomplete="off"
                                                                   ng-model="formRequestData.disburse.bankNumber">
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                    <table class="width100">
                                        <tr>
                                            <td class="width25"><label>{{ 'label.anchor.showbankaccountdetails' | translate}}</label></td>
                                            <td class="width25 paddedbottom10">
                                                <a class="btn btn-primary" ng-click="showBankAccountDetails=!showBankAccountDetails">
                                                    <i ng-show="showBankAccountDetails" class="icon-minus icon-white"></i>
                                                    <i ng-show="!showBankAccountDetails" class="icon-plus icon-white"></i>
                                                </a>
                                            </td>
                                            <td class="width25"></td>
                                            <td class="width25 paddedbottom10"></td>
                                        </tr>
                                        <tr>
                                            <td colspan="4">
                                                <div collapse="!showBankAccountDetails">
                                                <div class="form-group">
                                                    <div ng-if="bankAccountDetails.length > 0">
                                                        <table class="table">
                                                            <thead>
                                                                <tr>
                                                                    <th></th>
                                                                    <th></th>
                                                                    <th>{{'label.heading.holdername' | translate}}</th>
                                                                    <th>{{'label.heading.accountnumber' | translate}}</th>
                                                                    <th>{{'label.heading.ifsc' | translate}}</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr class="pointer-main"  ng-repeat="bankAccountDetail in bankAccountDetails">
                                                                    <td class="col-md-1"></td>
                                                                    <td class="col-md-1">
                                                                        <input type="radio" ng-model="formData.bankAccountDetailId" value="{{bankAccountDetail.id}}" ng-click="radioCheckUncheck()"/>
                                                                    </td>
                                                                    <td class="col-md-1">{{bankAccountDetail.name}}</td>
                                                                    <td class="col-md-1">{{bankAccountDetail.accountNumber}}</td>
                                                                    <td class="col-md-1">{{bankAccountDetail.ifscCode}}</td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                    <div class="form-group width100"  ng-if= "canDisburseToGroupsBanks()">
                                        <h4>{{ 'label.heading.group.bank.account.details' | translate}}</h4>
                                        <hr/>

                                        <div class="form-group width100">
                                            <label class="control-label col-sm-2">{{ 'label.input.holdername' | translate }}<span
                                                            class="required">*</span></label>
                                            <div class="col-sm-2">
                                                <select id="bankId"  name = "bankId" ng-model="bankAccountTemplate.bankAccountAssociation" class="form-control" ng-options="accountDetails.bankAccountDetails.name +'-'+accountDetails.loanPurpose  for accountDetails in groupBankAccountDetailsData"
                                                                value="{{accountDetails.groupBankAccountDetailAssociationId}}">
                                                    <option value="">{{'label.menu.selectbank' | translate}}</option>
                                                </select>
                                            </div>
                                            <div class="col-sm-1"></div>
                                            
                                                <label class="control-label col-sm-1">{{ 'label.input.amount' | translate }}<span
                                                            class="required">*</span></label>
                                                <div class="col-sm-2">
                                                    <input ng-model="bankAccountTemplate.disbursalAmount" name="columnname" type="text" autocomplete="off" class="form-control" ng-pattern="/^[0-9]*$/"/>
                                                </div>
                                            <div class="col-sm-1"></div>
                                                <div class="col-sm-3">
                                                    <a ng-click="addDisbursalAmount()"><i class="icon-plus icon-white"></i></a>
                                                    <span ng-show="isInvalid">
                                                        <small class="error">{{ errorMessage | translate }}</small>
                                                    </span>
                                                </div>
                                            
                                            </div>
                                            <div class="col-sm-8" ng-if="multipleBankDisbursalData.length > 0" class="form-group width70">
                                                <br/>
                                                <table ng-show="multipleBankDisbursalData.length > 0" class="table">
                                                    <tr class="graybg">
                                                        <th class="col-sm-1 align="center">{{'label.heading.serialno' | translate}}</th>
                                                        <th class="col-sm-3" align="center">{{'label.input.holdername' | translate}}</th>
                                                        <th class="col-sm-2" align="center">{{'label.input.amount' | translate}}</th>
                                                        <th class="col-sm-1" align="center">{{'label.heading.actions' | translate}}</th>
                                                    </tr>
                                                    <tr ng-repeat="record in multipleBankDisbursalData">
                                                        <td class="col-sm-1"><label> {{$index+1}} </label></td>
                                                        <td class="col-sm-3">{{record.name}}-{{record.loanPurpose}} </td>
                                                        <td class="col-sm-2">{{record.amount | number}} </td>
                                                        <td class="col-sm-1">
                                                            <button data-ng-if="multipleBankDisbursalData.length > 0" type="button" class="btn-link ng-binding"><i class="icon-remove icon-white" ng-click="deleteRecord($index)"></i>
                                                            </button>
                                                        </td>         
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                </div>
                            </div>

                            <div>
                        
                                <button type="button" class="btn btn-primary pull-right"
                                        ng-show="repaymentscheduleinfo.periods.length > 0 && response.uiDisplayConfigurations.viewLoanAccountDetails.isHiddenFeild.viewReportButton"
                                        ng-click="viewRepaymentDetails()">{{'label.button.viewReport' | translate}}
                                </button>
                            </div>

                            <div ng-show="repaymentscheduleinfo.periods" ng-include="'views/loans/loanrepaymentpreview.html'" />

                            <div class="col-md-offset-5">
                                <button id="cancel" type="reset" class="btn btn-default" ng-click="cancel()">
                                    {{'label.button.cancel' | translate}}
                                </button>
                                <button id="save" type="submit" ng-click="issubmitted = true"
                                        has-permission='DISBURSE_LOANAPPLICATIONREFERENCE'
                                        class="btn btn-primary" ng-if="formData.status.id === 300 && !canDisburseToGroupsBanks()"
                                        ng-show="loanaccountinfo">{{'label.button.disburse' |translate}}
                                </button>
                                <button id="forceDisburse" ng-click="forceDisburse()"
                                        has-permission='FORCE_DISBURSE_LOANAPPLICATIONREFERENCE'
                                        class="btn btn-primary" ng-if="canForceDisburse && !canDisburseToGroupsBanks()"
                                        ng-show="loanaccountinfo">{{'label.button.forcedisburse' |translate}}
                                </button>
                                <button id="disburseToGroupAccouts" ng-click="disburseToGroupsBankAccounts()"
                                        has-permission='DISBURSE_TOGROUPBANKACCOUTS_LOANAPPLICATIONREFERENCE'
                                        class="btn btn-primary" ng-if="canDisburseToGroupsBanks()"
                                        ng-show="loanaccountinfo">{{'label.button.disburse' |translate}}
                                </button>
                                <a class="btn btn-primary" href="javascript:void(0);" data-ng-click="previewRepayments(true)">
                                {{'label.button.schedulepreview' | translate}}</a>
                            </div>

                        </div>

                        <table class="width100">
                            <tr>
                                <td colspan="4">&nbsp;</td>
                            </tr>
                        </table>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>