<div ng-controller="NewLoanAccAppController">
<div>
    <ul class="breadcrumb">
        <li ng-if="center.name"><a ng-href="#/viewcenter/{{center.id}}">{{center.name}}</a></li>
        <li ng-if="group.centerName"><a href="#/viewcenter/{{group.centerId}}"><strong>{{group.centerName}}</strong></a></li>
        <li ng-if="group.name"><a href="#/viewgroup/{{group.id}}"><strong>{{group.name}}</strong></a></li>
        <li ng-show="clientName"><a href="#/viewclient/{{clientId}}"><strong>'{{clientName}}'</strong></a></li>
        <li class="active">{{'label.anchor.loanapplication' | translate}}</li>
    </ul>
</div>
<api-validate></api-validate>
<form name="newloanaccountform" novalidate="" rc-submit="submit()" class="well form-inline">
<table class="width100">
    <tr>
        <td class="width14">
            <label>{{ 'label.input.product' | translate }}<span class="required">*</span>:&nbsp;</label>
            <i class="icon-question-sign" tooltip="{{'label.tooltip.product' | translate}}"></i>
        </td>
        <td class="width36 paddedbottom10">
            <select id="productId" ng-model="formData.productId" class="form-control width75"
                    ng-options="product.id as product.name for product in products" value="{{product.id}}"
                    ng-change="loanProductChange(formData.productId)" required="required">
                <option style="display:none" value="">{{'label.selectloanproduct' | translate}}</option>
            </select>
        </td>
        <td class="width14">
            <label ng-show="formData.productId">{{ 'label.input.loanofficer' | translate }}:&nbsp;</label>
            <i ng-show="formData.productId" class="icon-question-sign" tooltip="{{'label.tooltip.loanofficer' | translate}}"></i>
        </td>
        <td class="width36 paddedbottom10">
            <select ng-show="formData.productId" id="loanOfficerId" ng-model="formData.loanOfficerId"
                    ng-options="loanOfficer.id as loanOfficer.displayName for loanOfficer in loanaccountinfo.loanOfficerOptions | orderBy:'displayName':reverse"
                    class="form-control width170px" value="{{loanOfficer.id}}" ng-disabled="response.uiDisplayConfigurations.loanAccount.isReadOnlyField.displayName == true">
                <option value="">{{'label.selectloanofficer' | translate}}</option>
            </select>
        </td>
    </tr>
    <tr ng-show="formData.productId && showLoanPurpose">
        <td ng-show = "loanPurposeGroups" ><label>{{ 'label.input.loanpurposegroup' | translate }}<span class="required" ng-show="isLoanPurposeMandatory">*</span>:&nbsp;</label></td>
        <td class="paddedbottom10" ng-if = "loanPurposeGroups" >
            <select chosen="loanPurposeGroups" id="loanPurposeGroup" name="loanPurposeGroup" ng-model="loanPurposeGroupId"
                    ng-options="loanPurposeGroup.id as loanPurposeGroup.name for loanPurposeGroup in loanPurposeGroups | filter:{isActive:true} | orderBy:'name':reverse"
                    class="form-control width170px" value="{{loanPurposeGroup.id}}" ng-change="onLoanPurposeGroupChange(loanPurposeGroupId)" required late-validate>
                <option value="">{{'label.selectpurpose' | translate}}</option>
            </select>
            <form-validate valattributeform="newloanaccountform" valattribute="loanPurposeGroup"/>
        </td>


        <td><label>{{ 'label.input.loanpurpose' | translate }}<span class="required" ng-show="isLoanPurposeMandatory">*</span>:&nbsp;</label>
        <i class="icon-question-sign" tooltip="{{'label.tooltip.loanpurpose' | translate}}"></i></td>
        <td class="paddedbottom10">
            <select chosen="loanPurposeOptions" id="loanPurposeId" name="loanpurpose" ng-model="formData.loanPurposeId"
                    ng-options="loanPurpose.id as loanPurpose.name for loanPurpose in loanPurposeOptions  | filter:{isActive:true} | orderBy:'name':reverse"
                    class="form-control width170px" value="{{loanPurpose.id}}" ng-required="isLoanPurposeMandatory" ng-change="handleLoanPurpose(formData.loanPurposeId)">
                <option value="">{{'label.selectpurpose' | translate}}</option>
            </select>
            <form-validate valattributeform="newloanaccountform" valattribute="loanpurpose"/>
        </td>
    </tr>
    <tr ng-if="showLoanPurposeCustomField">
        <td><label>{{ 'label.input.custom.purpose' | translate }}<span class="required">*</span>:&nbsp;</label>
            <i class="icon-question-sign" tooltip="{{'label.tooltip.loanpurpose.others.purpose' | translate}}"></i>
        </td>
        <td class="paddedbottom10">
            <input name="customLoanPurposeName" ng-model="formData.customLoanPurposeName" type="text" autocomplete="off"
                class="form-control width100" placeholder="{{'label.input.enterpurpose' | translate}}" required />
            <form-validate valattributeform="newloanaccountform" valattribute="customLoanPurposeName" />
        </td>
    </tr>
    <tr ng-show="formData.productId">
        <td><label>{{ 'label.input.submittedon' | translate }}<span ng-hide="isSubmittedOnReadOnlyType" class="required">*</span>:&nbsp;</label>
        <i class="icon-question-sign" tooltip="{{'label.tooltip.submittedon' | translate}}"></i></td>
        <td class="paddedbottom10">
            <input type="text" autocomplete="off" id="submittedOnDate" name="submittedon" datepicker-pop="{{df}}"
                   ng-model="date.first" is-open="opened" min="'2000-01-01'" max="restrictDate" class="form-control" ng-disabled="submittedOnReadOnlyType" ng-readonly="isDatePickerReadOnly"/>
        </td>
        <td>
            <label title="{{ 'label.input.expecteddisbursementon' | translate }}">{{ 'label.input.disbursementon' | translate }}<span class="required">*</span>:&nbsp;</label>
            <i class="icon-question-sign" tooltip="{{'label.tooltip.disbursementon' | translate}}"></i>
        </td>
        <td class="paddedbottom10">
            <input id="expectedDisbursementDate" sort type="text" autocomplete="off" name="expecteddisbursementon" required
                   datepicker-pop="{{df}}" ng-model="date.second" is-open="opened1" min="minDate"
                   max="globalMaxDate" class="form-control" ng-readonly="isDatePickerReadOnly"/>
            <form-validate valattributeform="newloanaccountform" valattribute="expecteddisbursementon"/>
        </td>
    </tr>
    <tr ng-show="formData.productId && showExternalId">
        <td><label>{{ 'label.input.loanexternalid' | translate }}&nbsp;<span ng-show="response.uiDisplayConfigurations.loanAccount.isMandatory.externalId" class="required">*</span></label></td>
        <td class="paddedbottom10" ng-if ="response.uiDisplayConfigurations.loanAccount.isMandatory.externalId">
            <input type="text" autocomplete="off" id="externalId" name="external" ng-model="formData.externalId" class="form-control"
                   required late-Validate/>
            <form-validate valattributeform="newloanaccountform" valattribute="external"/>
        </td>
        <td class="paddedbottom10" ng-if ="!response.uiDisplayConfigurations.loanAccount.isMandatory.externalId">
            <input type="text" autocomplete="off" id="externalId" name="externalId" ng-model="formData.externalId" class="form-control" ng-readonly="extenalIdReadOnlyType"
                    />
        </td>
    </tr>
    <tr ng-show="formData.productId && showLoanPurpose">
        
        <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.fundId == true"><label>{{ 'label.input.fund' | translate }}:&nbsp;</label></td>
        <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.fundId == true">
            <select id="fundId" ng-model="formData.fundId" class="form-control width170px"
                    ng-options="fund.id as fund.name for fund in loanaccountinfo.fundOptions"  value="{{fund.id}}" ng-disabled="response.uiDisplayConfigurations.loanAccount.isReadOnlyField.fundOption">
                <option value="">{{'label.selectfund' | translate}}</option>
            </select>
        </td>
    </tr>
</table>
<div ng-hide="previewRepayment">
    <div ng-show="loanaccountinfo">
        <div ng-hide="loanaccountinfo.calendarOptions == undefined">
        <hr ng-show="loanaccountinfo"/>
        </div>
        <label ng-show="loanaccountinfo.calendarOptions"><i class="icon-calendar icon-white"></i>&nbsp;<strong>{{
            'label.heading.meetingdetails' | translate }}</strong></label>
        <table ng-show="loanaccountinfo.calendarOptions" class="width100">
            <tr ng-repeat="calendar in loanaccountinfo.calendarOptions">
                <td class="width14"><label>{{ 'label.heading.startdate' | translate }}:</label></td>
                <td class="width36">{{calendar.nextTenRecurringDates[0] | DateFormat}}</td>
                <td class="width14" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.syncDisbursementDateWithMeeting">
                    <label>{{ 'label.heading.repeatson' | translate }}:</label></td>
                <td class="width36" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.syncDisbursementDateWithMeeting">
                    {{calendar.humanReadable}}</td>
            </tr>
            <tr ng-repeat="calendar in loanaccountinfo.calendarOptions">
                <td align="center"><input type="checkbox" ng-disabled="(response.uiDisplayConfigurations.loanAccount.isReadOnlyField.syncRepaymentsWithMeeting)" ng-model="temp.syncRepaymentsWithMeeting"
                                          ng-change="syncRepaymentsWithMeetingchange()"/></td>
                <td><label>{{ 'label.input.syncrepaymentswithmeeting' | translate }}</label></td>
                <td align="center" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.syncDisbursementDateWithMeeting">
                    <input type="checkbox" ng-model="formData.syncDisbursementWithMeeting"
                                          ng-change="syncDisbursementWithMeetingchange()"/></td>
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.syncDisbursementDateWithMeeting">
                    <label>{{ 'label.input.syncdisbursementdatewithmeeting' | translate }}</label></td>
            </tr>
        </table>
        <hr ng-show="showLoanTerms"/>
        <div  ng-show="loanaccountinfo && showPreferredPaymentChannel && showLoanTerms"  class="width100">
            <div>
                <label ng-show="loanaccountinfo"><strong>{{ 'label.heading.preferredpaymentchannel' | translate }}</strong></label>
            </div>
            <table ng-show="loanaccountinfo" ng-show="previewRepayment" class="width100">
                <tr>
                    <td class="width19">
                        <label>{{ 'label.button.disbursalmode' | translate }}:
                            <span class="required" ng-show="response.uiDisplayConfigurations.loanAccount.isMandatory.disbursementMode">*</span>
                        </label>
                    </td>
                    <td class="width31 paddedbottom10">
                        <select id="disbursementMode" name="disbursementMode" ng-model="disbursementMode"
                            ng-required="response.uiDisplayConfigurations.loanAccount.isMandatory.disbursementMode"
                            ng-options="paymentModeOption.id as paymentModeOption.value for paymentModeOption in paymentModeOptions"
                            value="{{paymentModeOption.id}}"  class="form-control width170px"
                            >
                            <option value="">{{'label.selectone' | translate}}</option>
                       </select>
                       <form-validate valattributeform="newloanaccountform" valattribute="disbursementMode"/>
                    </td>
                    <td>
                        <label>{{ 'label.button.repaymentsmode' | translate }}:</label>
                    </td>
                    <td class="width31">
                        <select id="repaymentMode" ng-model="repaymentMode"
                                ng-options="paymentModeOption.id as paymentModeOption.value for paymentModeOption in paymentModeOptions"
                            value="{{paymentModeOption.id}}" class="form-control width170px"
                                value="{{paymentOption.id}}">
                            <option value="">{{'label.menu.selectone' | translate}}</option>
                        </select>
                    </td>
                </tr>
            </table>
            <table ng-show="loanaccountinfo" ng-show="previewRepayment" class="width100">
                <tr>
                    <td class="width19">
                        <label>{{ 'label.button.disbursal' | translate }}:
                            <span class="required" ng-show="response.uiDisplayConfigurations.loanAccount.isMandatory.expectedDisbursalPaymentType">*</span>
                        </label>
                    </td>
                    <td class="width31 paddedbottom10">
                        <select id="expectedDisbursalPaymentType" name="expectedDisbursalPaymentType" 
                                ng-model="formData.expectedDisbursalPaymentType"
                                ng-required="response.uiDisplayConfigurations.loanAccount.isMandatory.expectedDisbursalPaymentType"
                                ng-options="paymentOption.id as paymentOption.name for paymentOption in disbursementTypeOption " class="form-control width170px"
                                value="{{paymentOption.id}}">
                            <option value="">{{'label.menu.selectone' | translate}}</option>
                        </select>
                        <form-validate valattributeform="newloanaccountform" valattribute="expectedDisbursalPaymentType"/>
                    </td>
                    <td>
                        <label>{{ 'label.button.repayments' | translate }}:</label>
                    </td>
                    <td class="width31">
                        <select id="expectedRepaymentPaymentType" ng-model="formData.expectedRepaymentPaymentType"
                                ng-options="paymentOption.id as paymentOption.name for paymentOption in repaymentTypeOption " class="form-control width170px"
                                value="{{paymentOption.id}}">
                            <option value="">{{'label.menu.selectone' | translate}}</option>
                        </select>
                    </td>
                </tr>
            </table>
            
        </div>
        <div ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.linkAccountId == true">
            <hr ng-show="loanaccountinfo && showLoanTerms"/>
        </div>
        <div ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.linkAccountId == true">
        <label ng-if="loanaccountinfo && showLoanTerms"><strong>{{ 'label.heading.savingsLinkage' | translate }}</strong></label>
        </div>
        <table ng-if="loanaccountinfo && showLoanTerms" class="width100">
            <tr>
                <td class="width19" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.linkAccountId == true">
                    <label>{{ 'label.input.linksavings' | translate }}:</label>
                </td>
                <td class="width31 paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.linkAccountId == true">
                    <select  id="linkAccountId" ng-model="formData.linkAccountId"
                            ng-options="savingaccount.id as (savingaccount.productName +'('+ savingaccount.accountNo +')') for savingaccount in loanaccountinfo.accountLinkingOptions | orderBy:'accountNo'"
                            class="form-control width170px"
                            value="{{savingaccount.id}}">
                        <option value="">{{'label.menu.selectone' | translate}}</option>
                    </select>
                </td>
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.createStandingInstruction == true">
                    <label>{{ 'label.input.createStandingInstruction' | translate }}:</label>
                </td>
                <td class="width31" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.createStandingInstruction == true">
                        <input id="createStandingInstruction" class="input-mini-small" type="checkbox"
                                ng-model="formData.createStandingInstructionAtDisbursement"></label>
                </td>
            </tr>
        </table>

        <hr ng-show="loanaccountinfo"/>
        <div class="row" ng-show="isGLIM">
            <label class="col-sm-1"><strong>{{ 'label.heading.clients' | translate }}&nbsp;:</strong></label>
            <div class="col-sm-10">
                <table class="table well">
                    <thead>
                    <tr class="active">
                        <th></th>
                        <th >{{'label.heading.clientid' | translate}}</th>
                        <th >{{'label.heading.clientname' | translate}}</th>
                        <th >{{'label.heading.externalid' | translate}}</th>
                        <th>{{'label.heading.loanpurpose' | translate}}</th>
                        <th>{{'label.heading.amount' | translate}}</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="client in formData.clientMembers" ng-init="outerIndex = $index">
                        <td>
                            <input type="checkbox" ng-model="client.isClientSelected" ng-change="glimAutoCalPrincipalAmount()">
                        </td>
                        <td >{{client.id}}</td>
                        <td >{{client.displayName}}</td>
                        <td >{{client.externalId}}</td>
                        <td><select ng-model="client.loanPurposeId"
                                    ng-options="loanPurpose.id as loanPurpose.name for loanPurpose in loanPurposeOptions | orderBy:'name':reverse"
                                    class="loanPurposeId form-control width170px"
                                    value="{{loanPurpose.id}}">
                            <option value="">{{'label.selectpurpose' | translate}}</option>
                        </select>
                        </td>
                        <td>
                            <input  type="text" autocomplete="off"
                                    class="form-control principal"
                                    name="principal"
                                    ng-model="client.transactionAmount"
                                    number-format ng-keyup="glimAutoCalPrincipalAmount()" />&nbsp;{{productDetails.currency.displaySymbol}}
                        </td>
                    </tr>
                    <tbody>
                </table>

            </div>
        </div>
        <hr ng-show="isGLIM"/>  
        <div  class="col-sm-12"><table ng-show="loanaccountinfo.loanEMIPacks && isLoanEmiPackEnabled"> 
        <table ng-show="loanaccountinfo.loanEMIPacks && isLoanEmiPackEnabled">     
            <tr  class="col-sm-12">
                <td> 
                    <label><strong>{{ 'label.heading.chooseloanemipack' | translate }}</strong></label>
                </td>
                <td >
                    <input ng-autofocus="true" ng-model="filterText" type="text" autocomplete="off" ng-keyup="onFilter()" class="form-control width100 col-sm-offset-1" placeholder="{{'label.input.filterbytext' | translate}}"/>
                </td>
            </tr>
        </table> 
        </div> 
        <br/>
        <div class="col-sm-offset-2"  ng-show="loanaccountinfo.loanEMIPacks && isLoanEmiPackEnabled">
           <table class="well table col-sm-12">
                            <thead>
                            <tr  class="graybg">
                                <th></th>
                                <th>{{ 'label.heading.sanctionAmount' | translate }}</th>
                                <th>{{ 'label.heading.repaymentEvery' | translate }}</th>
                                <th>{{ 'label.heading.numberOfRepayments' | translate }}</th>
                                <th>{{ 'label.heading.fixedEmi' | translate }}</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr data-ng-repeat="loanEMIPack in loanaccountinfo.loanEMIPacks | filter:filterText">
                                <td class="col-md-1">
                                    <input type="radio" ng-model="formData.loanEMIPackId" name="emipack" ng-change="updateSlabBasedChargeForEmiPack(loanEMIPack)" class="form-control" value="{{loanEMIPack.id}}"/>
                                </td>
                                <td class="col-md-1">
                                    <span>{{loanEMIPack.sanctionAmount}}</span>
                                </td>
                                <td class="col-md-1">
                                    <span>{{loanEMIPack.combinedRepayEvery}}</span>
                                </td>
                                <td class="col-md-1">
                                    <span>{{loanEMIPack.numberOfRepayments}}</span>
                                </td>
                                <td class="col-md-1">
                                    <span>{{loanEMIPack.fixedEmi}}</span>
                                </td>
                            </tr>
                            </tbody>
           </table>            
        </div> 
        
        <label ng-if="loanaccountinfo && showLoanTerms" ><strong>{{ 'label.heading.terms' | translate }}</strong></label>

        <table ng-if="loanaccountinfo" ng-hide="previewRepayment" class="width100">
            <tr ng-if="showLoanTerms">
                <td class="width19"><label>{{ 'label.input.principal' | translate }}&nbsp;<span
                        class="required">*</span>:</label></td>
                <td class="width31 paddedbottom10">
                    <input type="text" autocomplete="off" class="form-control" id="principal" name="principal" ng-model="formData.principal"
                           number-format required late-Validate ng-change="updateSlabBasedAmountOnChangePrincipalOrRepayment()" ng-readonly="isGLIM"/>&nbsp;{{loanaccountinfo.currency.displaySymbol}}
                    <form-validate valattributeform="newloanaccountform" valattribute="principal"/>
                </td>
                <td class="width14"><label ng-hide="formData.repaymentFrequencyType == 2 && selectedOnDayOfMonthOptions.length > 1">{{ 'label.input.loanterm' | translate }}&nbsp;<span class="required">*</span>:</label>
                </td>
                <td class="width36 paddedbottom10">
                    <input ng-hide="formData.repaymentFrequencyType == 2 && selectedOnDayOfMonthOptions.length > 1" id="loanTermFrequency" class="form-control" name="loanterm" type="text" autocomplete="off"
                           ng-model="loanTerm" ng-bind="loanTermCalculation()" value="{{formData.loanTermFrequency}}" required late-Validate/>
                    <select ng-hide="formData.repaymentFrequencyType == 2 && selectedOnDayOfMonthOptions.length > 1" ng-disabled="response.uiDisplayConfigurations.loanAccount.isReadOnlyField.loanTermFrequencyType == true" id="loanTermFrequencyType" class="form-control" ng-model="formData.loanTermFrequencyType"
                            ng-options="termFrequencyType.id as termFrequencyType.value for termFrequencyType in loanaccountinfo.termFrequencyTypeOptions"
                            value="{{termFrequencyType.id}}"/>
                    <form-validate valattributeform="newloanaccountform" valattribute="loanterm"/>
                </td>
            </tr>
            <tr ng-if="showLoanTerms">
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.numberOfRepayments == true"><label>{{ 'label.input.numofrepayments' | translate }}&nbsp;<span class="required">*</span></label>
                </td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.numberOfRepayments == true">
                    <input id="numberOfRepayments" class="form-control" name="numofrepayments" type="text" autocomplete="off"
                           ng-model="formData.numberOfRepayments" ng-change="updateSlabBasedAmountOnChangePrincipalOrRepayment()" required late-Validate/>&nbsp;
                    <form-validate valattributeform="newloanaccountform" valattribute="numofrepayments"/>
                </td>
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.repaymentEvery == true"><label>{{ 'label.input.repaidevery' | translate }}&nbsp;<span class="required">*</span></label></td>
                <td class="paddedbottom10 width500px" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.repaymentEvery == true">
                
                    <input id="repaymentEvery" class="form-control" type="text" autocomplete="off" name="repaidevery"
                           ng-model="formData.repaymentEvery" ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.repaymentEvery" required late-Validate/>
                    <select id="repaymentFrequencyType" class="form-control" ng-model="formData.repaymentFrequencyType"
                            ng-options="repaymentFrequencyType.id as repaymentFrequencyType.value for repaymentFrequencyType in loanaccountinfo.termFrequencyTypeOptions"
                            ng-disabled="((!loanaccountinfo.product.allowAttributeOverrides.repaymentEvery) ||(response.uiDisplayConfigurations.loanAccount.isReadOnlyField.repaymentFrequencyType))"
                            value="{{repaymentFrequencyType.id}}"/>&nbsp;<span ng-show="formData.repaymentFrequencyType == 2 && showRepaymentFrequencyNthDayType">on</span>
                    <select id="repaymentFrequencyNthDayType" class="form-control" ng-model="formData.repaymentFrequencyNthDayType"
                            ng-options="repaymentFrequencyNthDayType.id as repaymentFrequencyNthDayType.value for repaymentFrequencyNthDayType in loanaccountinfo.repaymentFrequencyNthDayTypeOptions"
                            ng-show="formData.repaymentFrequencyType == 2 && showRepaymentFrequencyNthDayType"
                            ng-disabled="(response.uiDisplayConfigurations.loanAccount.isReadOnlyField.repaymentFrequencyType)"
                            value="{{repaymentFrequencyNthDayType.id}}"/>&nbsp;
                    <select id="repaymentFrequencyDayOfWeekType" class="form-control" ng-model="formData.repaymentFrequencyDayOfWeekType"
                            ng-options="repaymentFrequencyDayOfWeekType.id as repaymentFrequencyDayOfWeekType.value for repaymentFrequencyDayOfWeekType in loanaccountinfo.repaymentFrequencyDaysOfWeekTypeOptions"
                            ng-show="formData.repaymentFrequencyType == 2 &&  formData.repaymentFrequencyNthDayType != -2 && showRepaymentFrequencyDayOfWeekType"
                            ng-disabled="(response.uiDisplayCofigurations.loanAccount.isReadOnlyField.repaymentFrequencyType)"
                            value="{{repaymentFrequencyDayOfWeekType.id}}"/>&nbsp;
                    <form-validate valattributeform="newloanaccountform" valattribute="repaidevery"/>
                </td>
                
            </tr>
            <tr ng-if="showLoanTerms" data-ng-show="formData.repaymentFrequencyType == 2 && formData.repaymentFrequencyNthDayType == -2">
                <td colspan="2" >
                    &nbsp;
                </td>
                <td>
                    <label>{{ 'label.input.selectmonthday' | translate }}</label>
                </td>
                <td align="left" class="paddedbottom10">
                    <table>
                        <tr>
                            <td align="left">
                                <select id="avilabledays" ng-model="available" name="avilabledays" class="form-control multiselectmin" multiple>
                                    <option ng-repeat="onday in repeatsOnDayOfMonthOptions" value="{{onday}}">
                                        {{onday}}
                                    </option>
                                </select>
                                &nbsp;
                            </td>
                            <td align="left">
                                <button type="button" class="btn btn-primary" data-ng-click="addMonthDay()"><i
                                        class="icon-double-angle-right"></i></button>
                                <br/>
                                <button type="button" class="btn btn-primary" data-ng-click="removeMonthDay()"><i
                                        class="icon-double-angle-left"></i></button>
                                &nbsp;
                            </td>
                            <td align="left">
                                <select id="selecteddays" ng-model="selected" name="selecteddays" class="form-control multiselectmin" multiple>
                                    <option ng-repeat="onday in selectedOnDayOfMonthOptions" value="{{onday}}">
                                        {{onday}}
                                    </option>
                                </select>
                            </td>
                        </tr>
                    </table>

                </td>

            </tr>
            <tr ng-if="showLoanTerms || !hideFirstRepaymentDate || !hideInterestChargedFromDate">
                <td ng-hide="hideFirstRepaymentDate">
                    <label>{{ 'label.input.firstrepaymenton' | translate }}
                        <span class="required" ng-show="response.uiDisplayConfigurations.loanAccount.isMandatory.repaymentsStartingFromDate">*</span></label>
                    <i class="icon-question-sign" tooltip="{{'label.tooltip.firstrepaymenton' | translate}}"></i>
                </td>
                <td class="paddedbottom10" ng-hide="hideFirstRepaymentDate">
                    <input id="repaymentsStartingFromDate" type="text" autocomplete="off" datepicker-pop="{{df}}"
                           ng-model="date.fourth" is-open="opened3" min="minDate" max="globalMaxDate" class="form-control" name="repaymentsStartingFromDate"
                            ng-required="response.uiDisplayConfigurations.loanAccount.isMandatory.repaymentsStartingFromDate" ng-disabled="firstRepaymentDateReadOnlyType" ng-readonly="isDatePickerReadOnly"/>
                    <form-validate valattributeform="newloanaccountform" valattribute="repaymentsStartingFromDate"/>
                </td>
                <td ng-hide="hideInterestChargedFromDate"><label class="control-label">{{ 'label.input.interestchargedfrom' | translate }}:</label>
                <i class="icon-question-sign" tooltip="{{'label.tooltip.interestchargedfrom' | translate}}"></i></td>
                <td class="paddedbottom10" ng-hide="hideInterestChargedFromDate">
                    <input id="interestChargedFromDate" type="text" autocomplete="off" datepicker-pop="{{df}}" ng-model="date.third"
                           is-open="opened2" min="minDate" max="globalMaxDate" class="form-control" ng-disabled="response.uiDisplayConfigurations.loanAccount.isReadOnlyField.interestChargedFromDate" ng-readonly="isDatePickerReadOnly"/>
                </td>
            </tr>

            <tr ng-if="!loanaccountinfo.isLoanProductLinkedToFloatingRate && showLoanTerms">
                <td><label>{{ 'label.input.nominalinterestrate' | translate }}&nbsp;<span
                        class="required">*</span></label></td>
                <td class="paddedbottom10">
                    <input id="interestRatePerPeriod" class="form-control" type="text" autocomplete="off" name="nominalinterestrate" required
                           ng-model="formData.interestRatePerPeriod" ng-disabled="response.uiDisplayConfigurations.loanAccount.isReadOnlyField.interestRatePerPeriod" ng-if = "!interestRatesListAvailable"/> 

                    <select id="interestRatePerPeriod" ng-model="formData.interestRatePerPeriod"
                            name="nominalinterestrate" ng-disabled="response.uiDisplayConfigurations.loanAccount.isReadOnlyField.interestRatePerPeriod"
                            ng-options="rates for rates in interestRatesListPerPeriod" class="form-control width170px" ng-if = "interestRatesListAvailable"
                            value="{{rates}}"/>
                           &nbsp;&nbsp;{{loanaccountinfo.interestRateFrequencyType.value}}
                    <form-validate valattributeform="newloanaccountform" valattribute="nominalinterestrate"/>
                </td>
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestType == true"><label>{{ 'label.input.interestmethod' | translate }}</label></td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestType == true">
                    <select id="interestType" ng-model="formData.interestType"
                            ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.interestType"
                            ng-options="interestType.id as interestType.value for interestType in loanaccountinfo.interestTypeOptions" class="form-control width170px"
                            value="{{interestType.id}}"/>
                </td>
            </tr>

            <tr ng-if="loanaccountinfo.isLoanProductLinkedToFloatingRate && showLoanTerms">
                <td><label>{{ 'label.heading.floatinginterestratedifferential' | translate }}&nbsp;<span
                        class="required">*</span></label></td>
                <td class="paddedbottom10">
                    <input id="interestratedifferential" class="form-control" type="text" autocomplete="off" name="interestratedifferential" ng-model="formData.interestRateDifferential"/>
                </td>
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestType == true"><label>{{ 'label.input.interestmethod' | translate }}</label></td>
                <td class="width36 paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestType == true">
                    <select id="interestType" ng-model="formData.interestType"
                            ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.interestType"
                            ng-options="interestType.id as interestType.value for interestType in loanaccountinfo.interestTypeOptions" class="form-control width170px"
                            value="{{interestType.id}}"/>
                    <label>{{ 'label.input.isfloatingrate' | translate}}</label>
                    <input id="isfloatingrate" class="input-mini-small" type="checkbox"
                           ng-model="formData.isFloatingInterestRate"/>
                </td>
            </tr>

            <tr ng-if="showLoanTerms">
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.amortizationType == true"><label>{{ 'label.input.amortization' | translate }}&nbsp;<span class="required">*</span>:</label>
                </td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.amortizationType == true">
                    <select id="amortizationType" ng-model="formData.amortizationType" class="form-control width170px"
                            ng-options="amortizationType.id as amortizationType.value for amortizationType in loanaccountinfo.amortizationTypeOptions"
                            value="{{amortizationType.id}}" ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.amortizationType"/>
                </td>
            </tr>
            <tr ng-if="showLoanTerms">
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestCalculationPeriodType == true"><label>{{ 'label.input.interestcalculationperiod' | translate }}&nbsp;<span
                        class="required">*</span></label></td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestCalculationPeriodType == true">
                    <select id="interestCalculationPeriodType" ng-model="formData.interestCalculationPeriodType"
                            ng-options="interestCalculationPeriodType.id as interestCalculationPeriodType.value for interestCalculationPeriodType in loanaccountinfo.interestCalculationPeriodTypeOptions" class="form-control width170px"
                            value="{{interestCalculationPeriodType.id}}" ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.interestCalculationPeriodType"/>
                </td>
                <td colspan="2" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.interestCalculationPeriodType == true || formData.interestCalculationPeriodType == 0"><label>{{ 'label.input.allowpartialperiodinterestcalcualtion' | translate }}&nbsp;<span class="required">*</span>: &nbsp;</label>
                    <label class="checkbox control-label">
                        <input id="allowPartialPeriodInterestCalcualtion" type="checkbox"
                               ng-model="formData.allowPartialPeriodInterestCalcualtion" ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.interestCalculationPeriodType">
                    </label>
                </td>

            </tr>
            <tr ng-if="showLoanTerms">
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.inArrearsTolerance == true"><label>{{ 'label.input.arearstolerance' | translate }}</label></td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.inArrearsTolerance == true">
                    <input id="inArrearsTolerance" type="text" autocomplete="off"
                           ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.inArrearsTolerance"
                           ng-model="formData.inArrearsTolerance" class="form-control" number-format/>&nbsp;{{loanaccountinfo.currency.displaySymbol}}
                </td>
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.graceOnInterestCharged == true"><label>{{ 'label.input.interestfreeperiod' | translate }}</label></td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.graceOnInterestCharged == true">
                    <input id="graceOnInterestCharged" type="text" autocomplete="off" ng-model="formData.graceOnInterestCharged" class="form-control"/>
                </td>
            </tr>
            <tr ng-if="showLoanTerms">
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.transactionProcessingStrategyId == true"><label>{{ 'label.input.repaymentstrategy' | translate }}&nbsp;<span
                        class="required">*</span></label></td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenField.transactionProcessingStrategyId == true">
                    <select id="transactionProcessingStrategyId" ng-model="formData.transactionProcessingStrategyId"
                            ng-options="transactionProcessingStrategy.id as transactionProcessingStrategy.name for transactionProcessingStrategy in loanaccountinfo.transactionProcessingStrategyOptions"
                            value="{{transactionProcessingStrategy.id}}"
                            ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.transactionProcessingStrategyId" class="form-control width170px"/>
                </td>
            </tr>
            <tr ng-if="showLoanTerms && showMoratorium">
                <td colspan=2>
                    <label>{{'label.input.grace' | translate }}:</label>
                    <i class="icon-question-sign" tooltip="{{'label.tooltip.moratorium' | translate}}"></i>
                </td>
            </tr>
            <tr ng-if="showLoanTerms && showMoratorium">
                <td colspan=2 ng-show="showGraceOnPrincipalPayment">
                    <label>{{'label.input.onprincipalpayment' | translate}}<span class="required" ng-show="isGraceOnPrincipalPaymentMandatory && isOverrideMoratorium">*</span></label>
                    <input id="graceOnPrincipalPayment" name="graceOnPrincipalPayment" type="text" autocomplete="off"
                           class="input-mini-small" ng-disabled="!isOverrideMoratorium"
                           ng-model="formData.graceOnPrincipalPayment" ng-required="isGraceOnPrincipalPaymentMandatory && isOverrideMoratorium">
                    <form-validate valattributeform="newloanaccountform" valattribute="graceOnPrincipalPayment"/>
                </td>
                <td colspan=2 ng-show="showGraceOnInterestPayment">
                    <label >{{'label.input.oninterestpayment' | translate}}<span class="required" ng-show="isGraceOnInterestPaymentMandatory && isOverrideMoratorium">*</span></label>
                    <input id="graceOnInterestPayment" name="graceOnInterestPayment" type="text" autocomplete="off" class="input-mini-small"
                           ng-disabled="!isOverrideMoratorium"
                           ng-model="formData.graceOnInterestPayment" ng-required="isGraceOnInterestPaymentMandatory && isOverrideMoratorium">
                    <form-validate valattributeform="newloanaccountform" valattribute="graceOnInterestPayment"/>
				</td> 
            </tr>
            <tr ng-if="showLoanTerms && showMoratorium">
                <td colspan=2 ng-show="showRecurringMoratoriumOnPrincipalPeriods">
                    <label>{{'label.input.recurringmoratoriumonprincipalperiods' | translate}}<span class="required" ng-show="isRecurringMoratoriumOnPrincipalPeriodsMandatory && isOverrideMoratorium">*</span></label>
                    <input name="recurringMoratoriumOnPrincipalPeriods" id="recurringMoratoriumOnPrincipalPeriods" type="text" autocomplete="off" class="input-mini-small"
                           ng-disabled="!isOverrideMoratorium"
                           ng-model="formData.recurringMoratoriumOnPrincipalPeriods" ng-required="isRecurringMoratoriumOnPrincipalPeriodsMandatory && isOverrideMoratorium">
                    <form-validate valattributeform="newloanaccountform" valattribute="recurringMoratoriumOnPrincipalPeriods"/>
                </td> 
                <td colspan=2>  
                    <label ng-show="showGraceOnArrearsAgeing">{{'label.input.onduedate' | translate}}</label>
                    <input ng-show="showGraceOnArrearsAgeing" id="graceOnArrearsAgeing" type="text" autocomplete="off" class="input-mini-small"
                           ng-disabled="!loanaccountinfo.product.allowAttributeOverrides.graceOnArrearsAgeing" ng-model="formData.graceOnArrearsAgeing">
                </td>
            </tr>
            <tr ng-if="showLoanTerms" ng-hide="!showBrokenPeriodType"  ng-show="formData.interestType == 1 && (formData.interestCalculationPeriodType == 0 || formData.allowPartialPeriodInterestCalcualtion)">
                <td class="width19">
                    <label>{{ 'label.input.brokenperiodmethodtype' | translate }}
                        <i class="icon-question-sign" tooltip="{{'label.tooltip.brokenperiodmethodtype' | translate}}"
                        tooltip-append-to-body="true"></i>
                     </label>
                </td>
                <td class="width32 paddedbottom10">
                    <select id="brokenPeriodMethodType" ng-model="formData.brokenPeriodMethodType"
                            class="form-control"
                            ng-options="brokenPeriodMethodType.id as brokenPeriodMethodType.value for brokenPeriodMethodType in loanaccountinfo.brokenPeriodMethodTypeOptions"
                            value="{{brokenPeriodMethodType.id}}"></select>
                </td>

                <td class="width19">
                    <label ng-if="loanaccountinfo.product.isRepaymentAtDisbursement && formData.brokenPeriodMethodType === 3">{{ 'label.input.broken.period.interest.collect.at.disbursement' | translate }}</label>
                </td>
                <td class="width32 paddedbottom10">
                    <input ng-if="loanaccountinfo.product.isRepaymentAtDisbursement && formData.brokenPeriodMethodType === 3" id="brokenPeriodInterestCollectAtDisbursement" type="checkbox" ng-model="formData.brokenPeriodInterestCollectAtDisbursement">
                </td>
            </tr>
            <tr ng-if="showLoanTerms" data-ng-show="loanaccountinfo.product.isFlatInterestRate && !loanaccountinfo.product.multiDisburseLoan">
                <td ><label>{{ 'label.input.discountondisbursalamount' | translate }}</label></td>
                <td class="paddedbottom10">
                    <input id="discountOnDisbursalAmount" type="text" autocomplete="off" ng-model="formData.discountOnDisbursalAmount" class="form-control" number-format/>
                </td>
            </tr>
            <tr ng-if="showLoanTerms">
                <td data-ng-show="loanaccountinfo.allowUpfrontCollection">
                    <label>{{ 'label.input.amountforupfrontcollection' | translate }}</label>
                </td>
                <td data-ng-show="loanaccountinfo.allowUpfrontCollection">
                    <input id="amountForUpfrontCollection" type="text" autocomplete="off" ng-model="formData.amountForUpfrontCollection"
                           class="form-control" number-format/>
                </td>

                <td class="width19" data-ng-show="loanaccountinfo.product.isRepaymentAtDisbursement">
                    <label>{{ 'label.input.no.of.adv.emi.collection' | translate }}</label>
                </td>
                <td class="width32 paddedbottom10" data-ng-show="loanaccountinfo.product.isRepaymentAtDisbursement">
                    <input ng-if="loanaccountinfo.product.isRepaymentAtDisbursement" id="noOfAdvEmiCollection" placeholder="{{'label.input.no.of.adv.emi.collection' | translate}}" type="text" autocomplete="off"
	               class="form-control" ng-model="formData.noOfAdvEmiCollection">
                </td>
            </tr>
            <tr ng-if="showLoanTerms" data-ng-show="loanaccountinfo.canDefineInstallmentAmount">
                <td >
                    <label>{{ 'label.input.fixedemiamount' | translate }}:</label>&nbsp;
                </td>
                <td class="paddedbottom10">
                    <input id="fixedEmiAmount" type="text" autocomplete="off" ng-model="formData.fixedEmiAmount" class="form-control" number-format/>&nbsp;
                </td>
            </tr>
            
            <tr ng-if="showLoanTerms" ng-show="loanaccountinfo.canUseForTopup">
                <td><label>{{ 'label.heading.isTopup' | translate }}</label></td>
                <td class="paddedbottom10" colspan="3">
                    <input type="checkbox" name="isTopup" ng-model="formData.isTopup" ng-change="isTopupSelected()"/>
                </td>
            </tr>
            <tr ng-if="showLoanTerms" ng-show="loanaccountinfo.canUseForTopup && formData.isTopup == true">
                <td></td>
                <td class="width36 paddedbottom10"  colspan="2" ng-show="formData.isTopup == true">
                     
                     <div  style="display: block; max-height: 300px; overflow-y: auto">
                        <table class="table well" style="table-layout: fixed">
                            <thead>
                                <tr class="graybg"> 
                                    <th><input type="checkbox" ng-model="isAllLoanToClose" ng-change="selectAllLoanToClose(isAllLoanToClose)"></th>
                                    <th>{{'label.heading.loanIdToClose' | translate}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-class="($index%2!=0)?'graybg':''" ng-repeat="loanTopupDetail in loanaccountinfo.clientActiveLoanOptions">
                                    <td><input type="checkbox" ng-model="loanTopupDetail.isSelected" ng-change="updateAllCheckbox()"></td>
                                    <td>{{loanTopupDetail.accountNo}}</td>
                                </tr>
                            </tbody>
                        </table>
                      </div>                    
                </td>
            </tr>
            <tr ng-if="showLoanTerms" ng-show="showIsDeferPaymentsForHalfTheLoanTerm">
                <td><label>{{ 'label.heading.deferpaymentsforhalftheloanterm' | translate }}</label></td>
                <td><input type="checkbox"  ng-model="formData.deferPaymentsForHalfTheLoanTerm"/></td>
            </tr>

            <tr ng-if="showLoanTerms">
                <td colspan="4" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true"><hr></td>
            </tr>
            <tr ng-if="showLoanTerms" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                <td>
                    <label class="control-label">{{ 'label.input.recalculateinterest' | translate }}</label>
                </td>
                <td class="paddedbottom10">
                    <label class="control-label">{{ loanaccountinfo.isInterestRecalculationEnabled | YesOrNo }}</label>
                </td>
                <td data-ng-show="loanaccountinfo.isInterestRecalculationEnabled">
                    <label>{{ 'label.input.daysinyears' | translate }}</label>
                    <i class="icon-question-sign" tooltip="{{'label.tooltip.days' | translate}}"></i>
                </td>
                <td class="paddedbottom10">
                    <label>{{ loanaccountinfo.daysInYearType.value}}</label>
                </td>
            </tr>
            <tr ng-if="showLoanTerms" data-ng-show="loanaccountinfo.isInterestRecalculationEnabled">
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label>{{ 'label.input.interest.recalculation.reschdule.strategy' | translate }}</label>
                </td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label>{{ loanaccountinfo.interestRecalculationData.rescheduleStrategyType.value}}</label>
                </td>
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label>{{ 'label.input.daysinmonth' | translate }}</label>
                    <i class="icon-question-sign" tooltip="{{'label.tooltip.days' | translate}}"></i>
                </td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label>{{ loanaccountinfo.daysInMonthType.value }}</label>
                </td>
            </tr>
            <tr ng-if="showLoanTerms" data-ng-show="loanaccountinfo.isInterestRecalculationEnabled">
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label class="control-label">{{ 'label.input.interest.recalculation.compounding.method' | translate }}</label>
                </td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label>{{ loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.value}}</label>
                </td>

                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label class="control-label">{{ 'label.input.frequency.for.recalculte.outstanding.principal' |
                        translate }}<span class="required">*</span></label>
                </td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label>{{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.value}}</label>
                    <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 3 &&
                        loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday != null"> on {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday.value}}</label>
                    <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 4 &&
		                loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay != null">on day {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay}}</label>
                    <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id == 4 &&
                        loanaccountinfo.interestRecalculationData.recalculationRestFrequencyOnDay == null &&
                        loanaccountinfo.interestRecalculationData.recalculationRestFrequencyNthDay != null">on {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyNthDay.value}} {{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyWeekday.value}}
                    </label>
                </td>
            </tr>
            <tr ng-if="showLoanTerms" data-ng-show="loanaccountinfo.isInterestRecalculationEnabled && loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id != 1">
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label class="control-label">{{ 'label.input.frequenc.interval.for.recalculte.outstanding.principal' | translate }}</label>
                </td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label>{{ loanaccountinfo.interestRecalculationData.recalculationRestFrequencyInterval}}</label>
                </td>
            </tr>
            <tr ng-if="showLoanTerms" data-ng-show="loanaccountinfo.isInterestRecalculationEnabled">
                <td >
                    <label class="control-label">{{ 'label.input.issubsidyapplicable' | translate }}</label>
                </td>
                <td class="paddedbottom10" >
                    <label>{{ loanaccountinfo.interestRecalculationData.isSubsidyApplicable }}</label>
                </td>
            </tr>
            <tr ng-if="showLoanTerms" data-ng-show="loanaccountinfo.isInterestRecalculationEnabled  && loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.id != 0">
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label class="control-label">{{ 'label.input.frequency.for.compounding' |
                        translate }}<span class="required">*</span></label>
                </td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label>{{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.value}}</label>
                    <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 3 &&
                        loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday != null"> on {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday.value}}</label>
                    <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 4 &&
		                loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay != null">on day {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay}}</label>
                    <label data-ng-show="loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id == 4 &&
                        loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyOnDay == null &&
                        loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyNthDay != null">on {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyNthDay.value}} {{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyWeekday.value}}
                    </label>
                </td>
            </tr>
            <tr ng-if="showLoanTerms" data-ng-show="loanaccountinfo.isInterestRecalculationEnabled && loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.id != 0 && loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id != 1">
                <td ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label class="control-label">{{ 'label.input.frequenc.interval.for.compounding' | translate }}</label>
                </td>
                <td class="paddedbottom10" ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.interestRecalculationSection == true">
                    <label>{{ loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyInterval}}</label>
                </td>
            </tr>
            <tr ng-if="showLoanTerms" data-ng-show="loanaccountinfo.isInterestRecalculationEnabled">
                <td data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id != 0 && loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id != 1">
                    <label>{{ 'label.input.frequenc.date.for.recalculte.outstanding.principal' | translate }}:&nbsp;</label>
                </td>
                <td class="paddedbottom10" data-ng-show="loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id != 0 && loanaccountinfo.interestRecalculationData.recalculationRestFrequencyType.id != 1">
                    <input type="text" autocomplete="off" id="recalculationRestFrequencyStartDate" name="recalculationRestFrequencyStartDate" datepicker-pop="{{df}}"
                           ng-model="recalculationRestFrequencyStartDate" is-open="opened" min="minDate" class="form-control" ng-readonly="isDatePickerReadOnly" />
                </td>
                <td data-ng-show="loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.id != 0 && loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id != 1">
                    <label>{{ 'label.input.frequenc.date.for.compounding' | translate }}:&nbsp;</label>
                </td>
                <td class="paddedbottom10" data-ng-show="loanaccountinfo.interestRecalculationData.interestRecalculationCompoundingType.id != 0 && loanaccountinfo.interestRecalculationData.recalculationCompoundingFrequencyType.id != 1">
                    <input id="recalculationCompoundingFrequencyStartDate" type="text" autocomplete="off" name="recalculationCompoundingFrequencyStartDate"
                           datepicker-pop="{{df}}" ng-model="recalculationCompoundingFrequencyStartDate" is-open="opened1" min="minDate"
                           class="form-control" ng-readonly="isDatePickerReadOnly"/>
                    <form-validate valattributeform="newloanaccountform" valattribute="expecteddisbursementon"/>
                </td>
            </tr>

        </table>

        <div ng-show="loanaccountinfo" ng-hide="previewRepayment">
            <div ng-show="multiDisburseLoan">
                <hr/>
                <label><strong>{{ 'label.heading.tranchedetails' | translate }}</strong></label>
                <table class="width100">
                    <tr>
                        <td class="width14"><label>{{'label.input.outstandingloanbalance' | translate}}:</label></td>
                        <td class="width36 paddedbottom10">
                            <input id="maxOutstandingLoanBalance" type="text" autocomplete="off"
                                   ng-model="formData.maxOutstandingLoanBalance" class="form-control" number-format/>&nbsp;
                            <a title="{{ 'label.button.addtranch' | translate }}" ng-click="addTranches()"><i
                                    class="icon-plus icon-white"></i></a>
                        </td>
                    </tr>
                </table>
                <table class="table width100" ng-show="formData.disbursementData.length>0">
                    <thead>
                    <tr class="graybg">
                        <th>{{'label.input.expecteddisbursementon' | translate}}</th>
                        <th>{{'label.input.principal' | translate}}</th>
                        <th data-ng-show="loanaccountinfo.product.isFlatInterestRate">{{'label.input.discountondisbursalamount' | translate}}</th>
                        <th>&nbsp;</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="disbursementDetail in formData.disbursementData">
                        <td>
                            <input id="disbursementDetail[{{$index}}].expectedDisbursementDate" type="text" autocomplete="off"
                                   datepicker-pop="{{df}}"
                                   placeholder="{{'label.input.expecteddisbursementon' | translate}}"
                                   ng-model="disbursementDetail.expectedDisbursementDate"
                                   is-open="'openedtranche'+$index" min="minDate" max="globalMaxDate" class="form-control" ng-readonly="isDatePickerReadOnly"/>
                        </td>
                        <td>
                            <input id="{{disbursementDetail[$index].principal}}"  class="input-sm form-control" number-format type="text" autocomplete="off"
                                   ng-model="disbursementDetail.principal"
                                   name="trancheAmount" id="trancheAmount" required=""
                                   placeholder="{{'label.input.principal' | translate}}">
                            <form-validate valattributeform="newloanaccountform" valattribute="trancheAmount"/>
                        </td>
                        <td data-ng-show="loanaccountinfo.product.isFlatInterestRate">
                            <input id="{{disbursementDetail[$index].discountOnDisbursalAmount}}"  class="input-sm form-control" number-format type="text" autocomplete="off"
                                   ng-model="disbursementDetail.discountOnDisbursalAmount"
                                   name="discountOnDisbursalAmount"
                                   placeholder="{{'label.input.discountondisbursalamount' | translate}}">
                        </td>
                        <td><a ng-click="deleteTranches($index)"><i class="icon-remove icon-white"></i></a></td>
                    </tr>
                    </tbody>
                </table>
                <div ng-if="loanaccountinfo.isDpConfigured">
                    <hr/>
                    <label><strong>{{ 'label.heading.dpdetails' | translate }}</strong></label>
                    <table class="table width100" >
                        <tr>
                            <td class="width14" >
                                <label class="control-label">{{ 'label.input.dplimit' | translate
                                    }}&nbsp;<span class="required">*</span></label></td>
                            <td class="width36 paddedbottom10" >
                                <input  id="dpLimitAmount" name="dpLimitAmount" type="text" class="form-control"
                                    ng-model="formData.principal" readonly number-format required late-validate>
                                <form-validate valattributeform="newloanaccountform" valattribute="dpLimitAmount"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="width14"><label class="control-label">{{ 'label.input.dplimitfrequency' | translate }}&nbsp;<span
                                    class="required">*</span></label></td>
                            <td class="width36 paddedbottom10">
                                <select id="frequencyType" name="frequencyType" class="form-control"
                                ng-model="loanAccountDpDetailData.frequencyType"
                                ng-options="type.id as type.value for type in loanProductDpDetailTemplateData.frequencyTypeOptions"
                                value="{{type.id}}" required late-validate ng-change="resetLoanAccountDpDetails()"></select>

                                <label  ng-if="loanAccountDpDetailData.frequencyType == 2">
                                <select id="frequencyNthDay" name="frequencyNthDay" class="form-control"
                                ng-model="loanAccountDpDetailData.frequencyNthDay"
                                ng-options="nthDayType.id as nthDayType.value for nthDayType in loanProductDpDetailTemplateData.nthDayTypeOptions"
                                value="{{nthDayType.id}}" ng-change="resetOnDayAndWeekType()" required late-validate>
                                </select>
                                <form-validate valattributeform="newloanaccountform" valattribute="frequencyNthDay"/>
                                </label>
                                <label ng-if="(loanAccountDpDetailData.frequencyType == 1 || loanAccountDpDetailData.frequencyType == 2 )  && loanAccountDpDetailData.frequencyNthDay != -2">
                                <select id="frequencyDayOfWeekType" name="frequencyDayOfWeekType" class="form-control"
                                ng-model="loanAccountDpDetailData.frequencyDayOfWeekType"
                                ng-options="dayOfWeekType.id as dayOfWeekType.value for dayOfWeekType in loanProductDpDetailTemplateData.dayOfWeekTypeOptions"
                                value="{{dayOfWeekType.id}}" required late-validate>
                                <option value="">--{{'label.menu.selectday' | translate}}--</option>
                                </select>
                                <form-validate valattributeform="newloanaccountform" valattribute="frequencyDayOfWeekType"/>
                                </label>
                                <label ng-if="loanAccountDpDetailData.frequencyType == 2 && loanAccountDpDetailData.frequencyNthDay == -2">
                                    <select id="frequencyOnDay" name="frequencyOnDay" class="form-control"
                                    ng-model="loanAccountDpDetailData.frequencyOnDay"
                                    ng-options="onDayType as onDayType for onDayType in onDayTypeOptions"
                                    value="{{onDayType}}" required late-validate></select>
                                    <form-validate valattributeform="newloanaccountform" valattribute="frequencyOnDay"/>
                                </label>
                            </td>
                            <td class="width14">
                                <label class="control-label">{{ 'label.input.dplimitreductionevery' | translate
                                    }}&nbsp;</label></td>
                            <td class="width36 paddedbottom10">
                                <input id="frequencyInterval" name="frequencyInterval" type="text" class="form-control"
                                ng-model="loanAccountDpDetailData.frequencyInterval" required late-validate>
                                <form-validate valattributeform="newloanaccountform" valattribute="frequencyInterval"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="width14"><label class="control-label">{{ 'label.input.dplimitcalculationType' | translate }}&nbsp;<span
                                    class="required">*</span></label></td>
                                <td class="width36 paddedbottom10">
                                <select id="loanDpLimitCalculationType" name="loanDpLimitCalculationType"
                                        ng-model="loanAccountDpDetailData.loanDpLimitCalculationType"
                                        ng-options="type.id as type.value for type in loanDpLimitCalculationTypeOptions"
                                        value="{{type.id}}" class="form-control width170px" required late-validate>
                                </select>
                                <form-validate valattributeform="newloanaccountform" valattribute="loanDpLimitCalculationType"/>
                            </td>
                            <td class="width14">
                                <label class="control-label">{{ 'label.input.amount' | translate
                                    }}&nbsp;<span class="required">*</span></label>
                            </td>
                            <td class="width36 paddedbottom10">
                                <input id="dpCalculateOnAmount" name="dpCalculateOnAmount" type="text" class="form-control"
                                    ng-model="loanAccountDpDetailData.dpCalculateOnAmount" number-format required late-validate>
                                <form-validate valattributeform="newloanaccountform" valattribute="dpCalculateOnAmount"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="width14">
                                <label class="control-label">{{ 'label.input.duration' | translate
                                    }}&nbsp;<span class="required">*</span></label></td>
                            <td class="width36 paddedbottom10">
                                <input id="dpDuration" name="dpDuration" type="text" class="form-control"
                                    ng-model="loanAccountDpDetailData.dpDuration" number-format required late-validate maxlength="4">
                                <form-validate valattributeform="newloanaccountform" valattribute="dpDuration"/>
                            </td>

                            <td class="width14">
                                <label ng-show="formData.productId" class="control-label">{{ 'label.input.dp.start.date' | translate
                                    }}&nbsp;<span class="required">*</span></label>
                            </td>
                            <td class="width36 paddedbottom10">
                                <input id="dpStartDate" name="dpStartDate" type="text" datepicker-pop="dd MMMM yyyy"
                                    ng-model="loanAccountDpDetailData.dpStartDate" is-open="opened" class="form-control" required/>
                                <form-validate valattributeform="newloanaccountform" valattribute="dpStartDate"/>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            
            <div class="col-md-12" ng-if="canDisburseToGroupsBanks()">
                <hr/>
                <div class="form-group">
                    <label class="control-label col-sm-3">{{'label.heading.groups' | translate}}
                        <span ng-if="parentGroups.length > 1" class="required">*</span></label>
                    <div class="col-sm-3" ng-if="parentGroups.length > 1">
                        <select id="groupId"  name = "groupId" ng-model="formData.groupId" class="form-control"
                                ng-options="parentGroup.id as parentGroup.name for parentGroup in parentGroups"
                                value="{{parentGroup.id}}" required>
                          <option value="">{{'label.menu.selectgroup' | translate}}</option>
                        </select>
                         <form-validate valattributeform="newloanaccountform" valattribute="groupId"/>
                    </div>
                    <div class="col-sm-3" ng-if="parentGroups.length == 1">
                        <input type="text" autocomplete="off" value="{{parentGroups[0].name}}" 
                        class="form-control" ng-model = "formData.groupId" ng-init="formData.groupId = parentGroups[0].id" readonly/> 
                    </div>
                </div>
            </div>
           
            <div class="col-md-12 paddedbottom10">
                <hr/>
                <div class="col-sm-1">
                <label><strong>{{ 'label.heading.charges' | translate }}</strong></label>
                </div>
                <select ng-show="canAddCharges" ng-model="chargeFormData.chargeId"
                        ng-options="charge.id as (charge.name + ',' + charge.currency.displaySymbol) for charge in loanaccountinfo.chargeOptions|filter:loanaccountinfo.currency.code:strict"
                        value="{{charge.id}}" class="form-control width170px">
                    <option value="">{{'label.selectcharge' | translate}}</option>
                </select>
                <a ng-show="canAddCharges" ng-click="addCharge()"><i class="icon-plus icon-white"></i></a>
            </div>
            <table class="table" class="width100" ng-show="charges.length>0">
                <tr class="graybg">
                    <th>{{'label.heading.name' | translate}}</th>
                    <th>{{'label.heading.type' | translate}}</th>
                    <th>{{'label.heading.amount' | translate}}</th>
                    <th>{{'label.heading.collectedon' | translate}}</th>
                    <th>{{'label.heading.date' | translate}}</th>
                    <th>{{'label.heading.iscapitalized' | translate}}</th>
                    <th>{{'label.heading.actions' | translate}}</th>
                </tr>
                <tr ng-repeat="charge in charges">
                    <td>{{charge.name}},{{charge.currency.displaySymbol}}</td>
                    <td>{{charge.chargeCalculationType.value}}</td>
                    <td><input id="{{charges[$index].amount}}" class="form-control" type="text" autocomplete="off" ng-model="charge.amount"
                               placeholder="{{'label.input.amount' | translate}}" number-format ng-readonly="isDatePickerReadOnly || !hasPermission('UPDATE_LOANCHARGE') || isChargeAmountNonEditable(charge)"></td>
                    <td>{{charge.chargeTimeType.value}}</td>
                    <td>
                        <input id="charges[{{$index}}].duedate" type="text" autocomplete="off" datepicker-pop="{{df}}" class="form-control"
                               placeholder="{{'label.input.duedate' | translate}}" ng-model="charge.dueDate"
                               is-open="'openedch'+$index" ng-readonly="isDatePickerReadOnly || charge.chargeTimeType.value == upfrontFee" min="minDate" max="globalMaxDate"/>
                    </td>
                    <td>{{charge.isCapitalized}}</td>
                    <td ng-hide="charge.isMandatory == true" has-permission='DELETE_LOANCHARGE'><a ng-click="deleteCharge($index)"><i class="icon-remove icon-white"></i></a></td>
                </tr>
            </table>

            <div class="col-md-12" ng-show="charges.length>0">
                <div ng-repeat="charge in charges " ng-show="charge.chargeTimeType.id == 50 && isGLIM" ng-init="outerIndex = $index">
                    <label>{{charge.name}}</label>

                    <table class="table" class="width50">
                        <tr>
                            <th>{{'label.heading.customername' | translate}}</th>
                            <th>{{'label.input.accountnumber' | translate}}</th>
                            <th>{{'label.heading.amount' | translate}}</th>
                        </tr>
                        <tr ng-repeat="glim in charges[outerIndex].glims">
                            <td>{{glim.displayName}}</td>
                            <td>{{glim.accountNo}}</td>
                            <td><input id="" class="form-control" type="text" autocomplete="off" ng-model="glim.upfrontChargeAmount" 
                                       placeholder="{{'label.input.amount' | translate}}"  ng-change="glimAutoCalFlatFeeAmount(outerIndex, charge.glims)" number-format
                                       ng-readonly="isDatePickerReadOnly || charges[outerIndex].chargeCalculationType.value == slabBasedCharge">
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div ng-show="loanaccountinfo.overdueCharges.length>0">
                <label><strong>{{ 'label.heading.overduepenalitycharge' | translate }}</strong></label>
                <table class="table" class="width100" >
                    <tr class="graybg">
                        <th>{{'label.heading.name' | translate}}</th>
                        <th>{{'label.heading.type' | translate}}</th>
                        <th>{{'label.heading.amount' | translate}}</th>
                        <th>{{'label.heading.collectedon' | translate}}</th>
                    </tr>
                    <tr ng-repeat="charge in loanaccountinfo.overdueCharges">
                        <td>{{charge.chargeData.name}},{{charge.chargeData.currency.displaySymbol}}</td>
                        <td>{{charge.chargeData.chargeCalculationType.value}}</td>
                        <td ng-if="isAmountNonEditable">{{charge.chargeData.amount | number}}</td>
                        <td ng-if="!isAmountNonEditable"><input id="{{charge.id}}" class="form-control" type="text" autocomplete="off" ng-model="charge.chargeData.amount"
                            placeholder="{{'label.input.amount' | translate}}" number-format /></td>
                        <td>{{charge.chargeData.chargeTimeType.value}}</td>
                    </tr>
                </table>
            </div><br><br>
            <hr ng-show="pledges.length>0 && !isLoanEmiPackEnabled"/>
            <div class="col-md-12" ng-show="pledges.length>0 && !isLoanEmiPackEnabled">
                <label><strong>{{ 'label.view.collaterals' | translate }}</strong></label>
                <br>
                <div class="">
                    <label class="control-label col-sm-4">
                        {{'label.input.collateralpledge' | translate}}
                    </label>
                    <div class="col-sm-4">
                        <select chosen="pledges" id="pledgeId" ng-model="formData.pledgeId"  class="form-control"
                                ng-options="pledge.id as pledge.pledgeNumber for pledge in pledges" value="{{pledge.id}}"
                                ng-change="changePledge(formData.pledgeId)"  name="pledgeId">
                            <option style="display:none" value="">{{'label.menu.selectpledge' | translate}}</option>
                        </select>
                    </div>
                </div>
                <br><br>
                <div  class="">
                    <label class="control-label col-sm-4">{{ 'label.input.noofitems' | translate }}</label>
                    <div class="col-sm-4">: {{pledge.collateralDetailsData.length}}</div>
                </div><br><br>
                <div  class="">
                    <label class="control-label col-sm-4">{{ 'label.input.systemdefinedprice' | translate }}</label>
                    <div class="col-sm-4">: {{pledge.systemValue}}</div>
                </div><br><br>
                <div  class="">
                    <label class="control-label col-sm-4">{{ 'label.input.userprice' | translate }}</label>
                    <div class="col-sm-4">: {{pledge.userValue}}</div>
                </div>
                <br><br>
                <table class="table">
                    <thead>
                    <tr>
                        <th>{{ 'label.heading.itemtype' | translate }}</th>
                        <th>{{ 'label.heading.itemsubtype' | translate }}</th>
                        <th>{{ 'label.heading.description' | translate }}</th>
                        <th>{{ 'label.heading.grossWeight' | translate }}</th>
                        <th>{{ 'label.heading.netWeight' | translate }}</th>
                        <th>{{ 'label.heading.systemprice' | translate }}</th>
                        <th>{{ 'label.heading.userprice' | translate }}</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="pointer-main" ng-repeat="pledgeData in pledge.collateralDetailsData">
                        <td class="pointer" >{{pledgeData.collateralName}}</td>
                        <td class="pointer" >{{pledgeData.name}}</td>
                        <td class="pointer" >{{pledgeData.description}}</td>
                        <td class="pointer" >{{pledgeData.grossWeight}}</td>
                        <td class="pointer" >{{pledgeData.netWeight}}</td>
                        <td class="pointer" >{{pledgeData.systemPrice}}</td>
                        <td class="pointer" >{{pledgeData.userPrice}}</td>
                    </tr>
                    </tbody>
                </table>
                <br><br>
            </div>
            <div class="col-md-12 paddedtop" ng-hide = "response.uiDisplayConfigurations.loanAccount.isHiddenSection.collateralSection == true  || isLoanEmiPackEnabled">
                <div class="col-sm-1">
                <label class="control-label"><strong>{{ 'label.heading.collaterals' | translate }}</strong></label>
                </div>
                <select ng-model="collateralFormData.collateralIdTemplate"
                        ng-options="collateralTemplate.name for collateralTemplate in collateralOptions"
                        value="{{collateralTemplate.id}}" class="form-control width170px">
                </select>&nbsp;&nbsp;
                <input class="form-control" type="text" autocomplete="off" ng-model="collateralFormData.collateralValueTemplate"
                       placeholder="{{'label.input.value' | translate}}" number-format>&nbsp;&nbsp;
                <input type="text" autocomplete="off" ng-model="collateralFormData.collateralDescriptionTemplate"
                       placeholder="{{'label.input.description' | translate}}" class="form-control">
                <a ng-click="addCollateral()">&nbsp;<i class="icon-plus icon-white"></i></a>
            </div>
            <div ng-hide="response.uiDisplayConfigurations.loanAccount.isHiddenSection.collateralSection == true">
            <table class="table" class="width100" ng-show="collaterals.length>0">
                <tr class="graybg">
                    <th>{{'label.heading.type' | translate}}</th>
                    <th>{{'label.heading.value' | translate}}</th>
                    <th>{{'label.heading.description' | translate}}</th>
                    <th>{{'label.heading.actions' | translate}}</th>
                </tr>
                <tr ng-repeat="collateral in collaterals">
                    <td><input type="text" autocomplete="off" class="input-sm form-control" ng-model="collateral.name" readonly></td>
                    <td><input id="{{collaterals[$index].value}}" type="text" autocomplete="off" class="form-control"
                               ng-model="collateral.value"></td>
                    <td><input id="{{collaterals[$index].description}}" type="text" autocomplete="off" ng-model="collateral.description"
                               placeholder="{{'label.input.description' | translate}}" class="form-control"/></td>
                    <td><a ng-click="deleteCollateral($index)"><i class="icon-remove icon-white"></i></a></td>
                </tr>
            </table>
            </div>
        </div>
    </div>
</div>
<br>

<div ng-show="previewRepayment" ng-include="'views/loans/loanrepaymentpreview.html'" />

<br>
<div class="col-md-offset-5 paddedtop10">
    <button id="cancel" type="reset" class="btn btn-default" ng-click="cancel()">{{'label.button.cancel' | translate}}</button>
    <button id="save" type="submit" has-permission='CREATE_LOAN' class="btn btn-primary" ng-show="loanaccountinfo" ng-click="isSubmitted = true">{{'label.button.save' | translate}}
    </button>
    <a ng-show="loanaccountinfo && !previewRepayment" class="btn btn-primary" ng-click="previewRepayments()">{{'label.button.schedulepreview' | translate}}</a>
    <a ng-show="loanaccountinfo && previewRepayment" class="btn btn-primary" ng-click="previewRepayment=!previewRepayment">{{'label.anchor.backtoloaninfo'
        | translate}}</a>
</div>
</form>
</div>
